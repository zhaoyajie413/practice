本文内容包括：</h2><ol><li>移动端底部input被弹出的键盘遮挡。</li><li>控制input显/隐密码。</li><li>在input中输入emoji表情导致请求失败。</li><li>input多行输入显示换行。</li><li>输入框首尾清除空格-trim()</li><li>在input中监听键盘事件</li></ol><p><br></p><h3 id="移动端底部input被弹出的键盘遮挡">移动端底部input被弹出的键盘遮挡</h3><p>input输入框是通过position:fixed一直放在页面底部，当点击input进行输入的时候，就会出现如下图片情况（有的机型会遮挡一些）。</p><p>当时这个问题是去年在ios中遇到的，在最新版的ios系统中，貌似解决了这个bug，但是为了向下兼容以及防止其他其他机型也出现这个问题，大家可以稍微记一下这个解决方法。</p><p>在解决这个问题的时候，有试过下面这种方法:</p><p><del>在input的focus事件中，开启一个定时器，然后每隔300毫秒进行一次document.body.scrollTop=document.body.scrollHeight的调整，运行3次即可。</del></p><p>当时还以为解决了，但是当你底部评论区还有很多内容，你每次点击input，想要输入的时候，整个页面通过scrollTop就会不断的向下滚动，这个体验不用说自己也知道是相当失败的，然后就再去找解决方法，结果就有了下面这个。</p><h4 id="Element-scrollIntoView"><a rel="nofollow" target="_blank" href="http://obkoro1.com/2018/05/12/%E5%85%B3%E4%BA%8Einput%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E5%88%86%E4%BA%AB/#Element-scrollIntoView" title="Element.scrollIntoView()"></a>Element.scrollIntoView()</h4><p><a rel="nofollow" target="_blank" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollIntoView">Element.scrollIntoView()</a>:方法<strong>让当前的元素滚动到浏览器窗口的可视区域内</strong>。</p><pre><code class="hljs javascript"><span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#inputId'</span>).scrollIntoView();
<span class="hljs-comment">//只要在input的点击事件，或者获取焦点的事件中，加入这个api就好了</span>
</code></pre><p>这个api还可以设置对齐方法，选择将input放在屏幕的上方/下方，类似的api还有:<a rel="nofollow" target="_blank" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollIntoViewIfNeeded">Element.scrollIntoViewIfNeeded()</a>，这两个是解决同一个问题的，选择一个用就可以了。</p><p><br></p><h3 id="控制input显-隐密码"><a rel="nofollow" target="_blank" href="http://obkoro1.com/2018/05/12/%E5%85%B3%E4%BA%8Einput%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E5%88%86%E4%BA%AB/#控制input显-隐密码" title="控制input显/隐密码"></a>控制input显/隐密码</h3><p>这个就很简单了，只需更改input的type属性值就可以了。可以看一下codepen的<a rel="nofollow" target="_blank" href="https://codepen.io/OBKoro1/pen/VxxgyG">demo</a></p><pre><code class="hljs javascript"><span class="hljs-comment">//点击函数，获取dom，判断更改属性。</span>
show(){
    <span class="hljs-keyword">let</span> input=<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"inputId"</span>);  
    <span class="hljs-keyword">if</span>(input.type==<span class="hljs-string">"password"</span>){ 
      input.type=<span class="hljs-string">'text'</span>;
    }<span class="hljs-keyword">else</span>{
      input.type=<span class="hljs-string">'password'</span>;
    } 
}</code></pre><p><br></p><h3 id="在input中输入emoji表情导致请求失败">在input中输入emoji表情导致请求失败</h3><p>现在用户输入emoji简直已经成为了习惯，如果前后端没有对emoji表情进行处理，那么用户在上传的时候，就会请求失败。</p><p><strong>通常这个问题是后端那边处理比较合适的</strong>，前端是做不了这件事的，或者说很难做这件事。</p><p>之前看过一篇<a rel="nofollow" target="_blank" href="https://www.bbsmax.com/A/nAJvkxjY5r/">文章</a>，这个文章里面讲了怎么在上传和拿数据下来的时候不会报错，但是不能在显示的时候转换为表情。</p><p>ps:之前拿微信用户名的时候，有些人可能在微信昵称上面就会包含表情，<strong>如果后端没对表情处理转换，那么普通请求也会出错</strong>。</p><p>之所以说这个，当表单请求错误的时候各位如果实在找不到问题可以往这方面考虑一下，我真的被坑过的o(╥﹏╥)o。</p><p><br></p><h3 id="textarea多行回车换行，显示的时候换行设置：">textarea多行回车换行，显示的时候换行设置：</h3><p>在使用textarea标签输入多行文本的时候，如果没有对多行文本显示处理，会导致没有换行的情况,就比如下面这种情况，用户在textarea是有换行的。</p><p><br></p><h4 id="Css属性-white-space"><a rel="nofollow" target="_blank" href="http://obkoro1.com/2018/05/12/%E5%85%B3%E4%BA%8Einput%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E5%88%86%E4%BA%AB/#Css属性-white-space" title="Css属性:white-space"></a>Css属性:<a rel="nofollow" target="_blank" href="http://www.w3school.com.cn/cssref/pr_text_white-space.asp">white-space</a></h4><p>white-space 属性用于设置如何处理元素内的空白，其中包括空白符和换行符。</p><p><img src="http://api.fly63.com/vue_blog/public/Uploads/20180516/5afb887fdb4ca.jpg" style="max-width:100%;"><br></p><p>只要在<strong>显示内容的地方将该属性设置为white-space: pre-line或者white-space:pre-wrap，多行文本就可以换行了</strong>。</p><h4 id="设置之后，显示效果："><br><a rel="nofollow" target="_blank" href="http://obkoro1.com/2018/05/12/%E5%85%B3%E4%BA%8Einput%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E5%88%86%E4%BA%AB/#设置之后，显示效果：" title="设置之后，显示效果："></a></h4><h3 id="输入框首尾清除空格-trim"><a rel="nofollow" target="_blank" href="http://obkoro1.com/2018/05/12/%E5%85%B3%E4%BA%8Einput%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E5%88%86%E4%BA%AB/#输入框首尾清除空格-trim" title="输入框首尾清除空格-trim()"></a>输入框首尾清除空格-trim()</h3><p>输入框清除首尾空格是input较为常见的需求，通常在上传的时候将首尾空格去除掉。一般使用:字符串的原生方法<a rel="nofollow" target="_blank" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/Trim">trim()</a>&nbsp;从一个字符串的两端删除空白字符。</p><p>trim() 方法并不影响原字符串本身，它返回的是一个新的字符串。</p><h4 id="原生清除方法"><a rel="nofollow" target="_blank" href="http://obkoro1.com/2018/05/12/%E5%85%B3%E4%BA%8Einput%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E5%88%86%E4%BA%AB/#原生清除方法" title="原生清除方法:"></a>原生清除方法:</h4><pre><code class="hljs javascript"><span class="hljs-comment">//原生方法获取值，清除首尾空格上传str2 </span>
<span class="hljs-keyword">var</span> str2 = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"inputId"</span>).trim();
</code></pre><h4 id="Vue清除方法："><a rel="nofollow" target="_blank" href="http://obkoro1.com/2018/05/12/%E5%85%B3%E4%BA%8Einput%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E5%88%86%E4%BA%AB/#Vue清除方法：" title="Vue清除方法："></a>Vue清除方法：</h4><p>Vue提供了<a rel="nofollow" target="_blank" href="https://cn.vuejs.org/v2/guide/forms.html#trim">修饰符</a>删除首尾空格， 加了修饰符.trim会自动过滤用户输入的首尾空白字符</p><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model.trim</span>=<span class="hljs-string">"msg"</span>&gt;</span>
</code></pre><p>貌似angular也提供了类似过滤的方法，感兴趣的可以自己去查一下。</p><p><br></p><h3 id="在input中监听键盘事件">在input中监听键盘事件</h3><p>在用户登录或者搜索框的时候，一般都会监听键盘事件绑定回车按键，来执行登录/搜索 等操作。</p><h4 id="原生绑定"><a rel="nofollow" target="_blank" href="http://obkoro1.com/2018/05/12/%E5%85%B3%E4%BA%8Einput%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E5%88%86%E4%BA%AB/#原生绑定" title="原生绑定:"></a>原生绑定:</h4><pre><code class="hljs php">&lt;input onkeydown=<span class="hljs-string">"keydownMsg(event)"</span> type=<span class="hljs-string">"text"</span> /&gt;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">keydownMsg</span><span class="hljs-params">(key)</span> </span>{
       keyCode = key.keyCode; <span class="hljs-comment">//获取按键代码</span>
       <span class="hljs-keyword">if</span> (keyCode == <span class="hljs-number">13</span>) {  <span class="hljs-comment">//判断按下的是否为回车键</span>
           <span class="hljs-comment">// 在input上监听到回车 do something</span>
       }
   }
</code></pre><h4 id="Vue按键修饰符"><a rel="nofollow" target="_blank" href="http://obkoro1.com/2018/05/12/%E5%85%B3%E4%BA%8Einput%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%E5%88%86%E4%BA%AB/#Vue按键修饰符" title="Vue按键修饰符"></a>Vue按键修饰符</h4><p>Vue为监听键盘事件，提供了<a rel="nofollow" target="_blank" href="https://cn.vuejs.org/v2/guide/events.html#%E6%8C%89%E9%94%AE%E4%BF%AE%E9%A5%B0%E7%AC%A6">按键修饰符</a>，并且为常用的按键提供了别名，使用方法如下:当回车按键在input中被按下的时候，会触发里面的函数。</p><p><a rel="nofollow" target="_blank" id="more"></a></p><pre><code class="hljs css">&lt;<span class="hljs-selector-tag">input</span> @<span class="hljs-keyword">keyup</span>.<span class="hljs-keyword">enter</span>="<span class="hljs-keyword">enterActive</span>"&gt;</code></pre><p><br></p><p>来源：<strong><a rel="nofollow" target="_blank" href="http://obkoro1.com/">个人blog</a></strong>&nbsp;and&nbsp;<strong><a rel="nofollow" target="_blank" href="https://juejin.im/user/58714f0eb123db4a2eb95372">掘金个人主页</a></strong></p><p><br></p><p>链接: <a href="http://www.fly63.com/article/detial/773" target="_self">http://www.fly63.com/article/detial/773</a></p><p></p></div><div class="defpage" data-v-61d5a382=""><a href="/article/detial/774" class="ellipsis" data-v-61d5a382=""><span data-v-61d5a382="">上一页: &nbsp;</span><span data-v-61d5a382="">js方式实现手机号码隐藏中间4位</span></a><a href="/article/detial/772" class="ellipsis" data-v-61d5a382=""><span data-v-61d5a382="">下一页: &nbsp;</span><span data-v-61d5a382="">数字在JavaScript中是如何编译的</span></a></div><div class="ad_banner pc_ad" data-v-61d5a382=""><!----><div id="center_two" class="baiduad"></div><!----><!----></div><div class="ad_banner m_ad" data-v-61d5a382=""><!----><div id="m_center_two" class="baiduad"></div><!----><!----></div></div>
