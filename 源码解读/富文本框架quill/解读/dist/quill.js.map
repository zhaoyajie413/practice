{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/amd-options.js","webpack:///(webpack)/buildin/global.js","webpack:///(webpack)/buildin/harmony-module.js","webpack:///(webpack)/node_modules/base64-js/index.js","webpack:///(webpack)/node_modules/buffer/index.js","webpack:///(webpack)/node_modules/ieee754/index.js","webpack:///(webpack)/node_modules/isarray/index.js","webpack:///./assets/icons/align-center.svg","webpack:///./assets/icons/align-justify.svg","webpack:///./assets/icons/align-left.svg","webpack:///./assets/icons/align-right.svg","webpack:///./assets/icons/background.svg","webpack:///./assets/icons/blockquote.svg","webpack:///./assets/icons/bold.svg","webpack:///./assets/icons/clean.svg","webpack:///./assets/icons/code.svg","webpack:///./assets/icons/color.svg","webpack:///./assets/icons/direction-ltr.svg","webpack:///./assets/icons/direction-rtl.svg","webpack:///./assets/icons/dropdown.svg","webpack:///./assets/icons/formula.svg","webpack:///./assets/icons/header-2.svg","webpack:///./assets/icons/header.svg","webpack:///./assets/icons/image.svg","webpack:///./assets/icons/indent.svg","webpack:///./assets/icons/italic.svg","webpack:///./assets/icons/link.svg","webpack:///./assets/icons/list-bullet.svg","webpack:///./assets/icons/list-check.svg","webpack:///./assets/icons/list-ordered.svg","webpack:///./assets/icons/outdent.svg","webpack:///./assets/icons/strike.svg","webpack:///./assets/icons/subscript.svg","webpack:///./assets/icons/superscript.svg","webpack:///./assets/icons/table.svg","webpack:///./assets/icons/underline.svg","webpack:///./assets/icons/video.svg","webpack:///./blots/block.js","webpack:///./blots/break.js","webpack:///./blots/container.js","webpack:///./blots/cursor.js","webpack:///./blots/embed.js","webpack:///./blots/inline.js","webpack:///./blots/scroll.js","webpack:///./blots/text.js","webpack:///./core.js","webpack:///./core/editor.js","webpack:///./core/emitter.js","webpack:///./core/instances.js","webpack:///./core/logger.js","webpack:///./core/module.js","webpack:///./core/quill.js","webpack:///./core/selection.js","webpack:///./core/theme.js","webpack:///./formats/align.js","webpack:///./formats/background.js","webpack:///./formats/blockquote.js","webpack:///./formats/bold.js","webpack:///./formats/code.js","webpack:///./formats/color.js","webpack:///./formats/direction.js","webpack:///./formats/font.js","webpack:///./formats/formula.js","webpack:///./formats/header.js","webpack:///./formats/image.js","webpack:///./formats/indent.js","webpack:///./formats/italic.js","webpack:///./formats/link.js","webpack:///./formats/list.js","webpack:///./formats/script.js","webpack:///./formats/size.js","webpack:///./formats/strike.js","webpack:///./formats/table.js","webpack:///./formats/underline.js","webpack:///./formats/video.js","webpack:///./modules/clipboard.js","webpack:///./modules/history.js","webpack:///./modules/keyboard.js","webpack:///./modules/syntax.js","webpack:///./modules/table.js","webpack:///./modules/toolbar.js","webpack:///./modules/uploader.js","webpack:///./node_modules/clone/clone.js","webpack:///./node_modules/deep-equal/index.js","webpack:///./node_modules/deep-equal/lib/is_arguments.js","webpack:///./node_modules/deep-equal/lib/keys.js","webpack:///./node_modules/eventemitter3/index.js","webpack:///./node_modules/extend/index.js","webpack:///./node_modules/fast-diff/diff.js","webpack:///./node_modules/parchment/dist/parchment.js","webpack:///./node_modules/quill-delta/dist/AttributeMap.js","webpack:///./node_modules/quill-delta/dist/Delta.js","webpack:///./node_modules/quill-delta/dist/Iterator.js","webpack:///./node_modules/quill-delta/dist/Op.js","webpack:///./quill.js","webpack:///./themes/base.js","webpack:///./themes/bubble.js","webpack:///./themes/snow.js","webpack:///./ui/color-picker.js","webpack:///./ui/icon-picker.js","webpack:///./ui/icons.js","webpack:///./ui/picker.js","webpack:///./ui/tooltip.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA;;;;;;;;;;;;;ACDA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;ACvBY;;AAEZ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kCAAkC,SAAS;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,UAAU;AACpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEY;;AAEZ,aAAa,mBAAO,CAAC,8GAAW;AAChC,cAAc,mBAAO,CAAC,0GAAS;AAC/B,cAAc,mBAAO,CAAC,0GAAS;;AAE/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,mDAAmD;AACxE;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,UAAU;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD,EAAE;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,wBAAwB,QAAQ;AAChC;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,mBAAmB,cAAc;AACjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qBAAqB,QAAQ;AAC7B;AACA;AACA,GAAG;AACH;AACA,eAAe,SAAS;AACxB;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,YAAY;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,gBAAgB;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;AC5vDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,QAAQ,WAAW;;AAEnB;AACA;AACA,QAAQ,UAAU;;AAElB;AACA;;;;;;;;;;;;ACnFA,iBAAiB;;AAEjB;AACA;AACA;;;;;;;;;;;;ACJA,qCAAqC,wT;;;;;;;;;;;ACArC,qCAAqC,wT;;;;;;;;;;;ACArC,qCAAqC,wT;;;;;;;;;;;ACArC,qCAAqC,wT;;;;;;;;;;;ACArC,qCAAqC,o6H;;;;;;;;;;;ACArC,qCAAqC,4c;;;;;;;;;;;ACArC,qCAAqC,oY;;;;;;;;;;;ACArC,qCAAqC,ohB;;;;;;;;;;;ACArC,qCAAqC,oV;;;;;;;;;;;ACArC,qCAAqC,gX;;;;;;;;;;;ACArC,qCAAqC,wgB;;;;;;;;;;;ACArC,qCAAqC,wgB;;;;;;;;;;;ACArC,qCAAqC,4O;;;;;;;;;;;ACArC,qCAAqC,43D;;;;;;;;;;;ACArC,qCAAqC,o2B;;;;;;;;;;;ACArC,qCAAqC,4wB;;;;;;;;;;;ACArC,qCAAqC,gW;;;;;;;;;;;ACArC,qCAAqC,ga;;;;;;;;;;;ACArC,qCAAqC,wT;;;;;;;;;;;ACArC,qCAAqC,4kB;;;;;;;;;;;ACArC,qCAAqC,wjB;;;;;;;;;;;ACArC,qCAAqC,wkB;;;;;;;;;;;ACArC,qCAAqC,ghC;;;;;;;;;;;ACArC,qCAAqC,oZ;;;;;;;;;;;ACArC,qCAAqC,ouB;;;;;;;;;;;ACArC,qCAAqC,g6B;;;;;;;;;;;ACArC,qCAAqC,gwB;;;;;;;;;;;ACArC,qCAAqC,wpB;;;;;;;;;;;ACArC,qCAAqC,oS;;;;;;;;;;;ACArC,qCAAqC,wmC;;;;;;;;;;;;ACArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4B;AACI;AAOb;AACS;AACE;AACA;;AAE9B;;AAEA,oBAAoB,mDAAS;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC,+CAAK;AACrC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,WAAW,OAAO;AAClB;AACA,wBAAwB,8CAAK;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,8CAAK;AAC1B,yBAAyB,8CAAK,EAAE,+CAAM,EAAE,mDAAS,EAAE,6CAAQ;;AAE3D,yBAAyB,mDAAS;AAClC;AACA;AACA,0BAA0B,yDAAe;AACzC;;AAEA;AACA,eAAe,kDAAK;AACpB;AACA,MAAM,6CAAM;AACZ;AACA;;AAEA;AACA,8CAA8C,+CAAK;AACnD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,mBAAmB,+CAAK;AACxB;;AAEA;AACA;AACA,iBAAiB,kDAAQ;AACzB;AACA;AACA;AACA;AACA,8DAA8D;AAC9D,KAAK,MAAM,kDAAK;AAChB;AACA;;AAEA,yCAAyC;AACzC;AACA;AACA,cAAc,6CAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEmE;;;;;;;;;;;;;ACtMnE;AAAA;AAAA;AAAsC;;AAEtC,oBAAoB,mDAAS;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEe,oEAAK,EAAC;;;;;;;;;;;;;ACxBrB;AAAA;AAAA;AAA0C;;AAE1C,wBAAwB,uDAAa;;AAEtB,wEAAS,EAAC;;;;;;;;;;;;;ACJzB;AAAA;AAAA;AAAA;AAA6C;AACf;;AAE9B,qBAAqB,mDAAS;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,+CAAK;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8CAA8C,6CAAQ;AACtD;AACA,8CAA8C,6CAAQ;AACtD;AACA,WAAW,WAAW;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;;AAEZ,qEAAM,EAAC;;;;;;;;;;;;;AC3JtB;AAAA;AAAA;AAAA;AAAsC;AACR;;AAE9B;;AAEA,oBAAoB,mDAAS;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+BAA+B,6CAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,+BAA+B,6CAAQ;AACvC;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEe,oEAAK,EAAC;;;;;;;;;;;;;AChFrB;AAAA;AAAA;AAAA;AAAA;AAAyD;AAC7B;AACF;;AAE1B,qBAAqB,oDAAU;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B,+CAAK;AACnC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,8CAAK,EAAE,mDAAS,EAAE,6CAAI;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,qEAAM,EAAC;;;;;;;;;;;;;AC5DtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6D;AACvB;AACM;AAChB;AACQ;;AAEpC;AACA,yBAAyB,8CAAK,oBAAoB,iDAAU;AAC5D;;AAEA,qBAAqB,oDAAU;AAC/B,kCAAkC,UAAU;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,qDAAO;AAC7B;;AAEA;AACA,sBAAsB,qDAAO;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iDAAU,oBAAoB,iDAAU;AACnE;AACA;AACA;AACA;AACA,sCAAsC,8CAAK;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kDAAkD,+CAAK;AACvD;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,+CAAK;AACpC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,2BAA2B,uDAAa;AACnD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA,uCAAuC;AACvC;AACA;AACA;AACA,wBAAwB,qDAAO;AAC/B;AACA;;AAEA;AACA,sCAAsC;AACtC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,qDAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,qDAAO;AAC/B;AACA,uCAAuC;AACvC;AACA,wBAAwB,qDAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,8CAAK;AAC3B,0BAA0B,8CAAK,EAAE,iDAAU,EAAE,kDAAS;;AAEvC,qEAAM,EAAC;;;;;;;;;;;;;ACrLtB;AAAA;AAAA;AAAA;AAAA;AAAqC;;AAErC,mBAAmB,kDAAQ;;AAE3B;AACA;AACA;AACA;AACA,iBAAiB;AACjB,gBAAgB;AAChB,gBAAgB;AAChB,kBAAkB;AAClB,iBAAiB;AACjB;AACA;AACA,GAAG;AACH;;AAEuC;;;;;;;;;;;;;AClBvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiC;;AAEiB;AAChB;AACQ;AACN;AACF;AACE;AACA;AACA;;AAEQ;AACJ;AACE;AACA;;AAE1C,mDAAK;AACL,iBAAiB,oDAAK;AACtB,uBAAuB,uDAAU;AACjC,iBAAiB,oDAAK;AACtB,qBAAqB,wDAAS;AAC9B,kBAAkB,qDAAM;AACxB,iBAAiB,oDAAK;AACtB,kBAAkB,qDAAM;AACxB,kBAAkB,qDAAM;AACxB,gBAAgB,mDAAQ;;AAExB,uBAAuB,0DAAS;AAChC,qBAAqB,yDAAO;AAC5B,sBAAsB,0DAAQ;AAC9B,sBAAsB,0DAAQ;AAC9B,CAAC;;AAEc,kHAAK,EAAC;;;;;;;;;;;;;ACjCrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0B;AACK;AACH;AACsB;AACb;AACD;AACK;AACyB;AAC/B;AACkB;;AAErD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,uDAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,6CAAM,GAAG,EAAE,kEAAa;AAChD,8BAA8B,oDAAK;AACnC,2CAA2C,kDAAQ;AACnD,sBAAsB,6CAAM,UAAU,kEAAa;AACnD;AACA,uBAAuB,wDAAY;AACnC,SAAS;AACT,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B,kDAAK;AAChC;;AAEA,wCAAwC;AACxC;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,sBAAsB,kDAAK,gCAAgC,4CAAK;AAChE;AACA;;AAEA,wCAAwC;AACxC;AACA;AACA,KAAK;AACL,sBAAsB,kDAAK,gCAAgC,4CAAK;AAChE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK,MAAM,kDAAK;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oDAAK;AACjC;AACA,SAAS,0BAA0B,kDAAQ;AAC3C;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,uCAAuC,kDAAQ;AAC/C;AACA;AACA;AACA,oBAAoB,kEAAa;AACjC;AACA;AACA;AACA,iCAAiC,kEAAa;AAC9C;AACA;AACA,KAAK;AACL,WAAW,6CAAM,OAAO,6CAAM;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B,kDAAK,yBAAyB,iBAAiB;AAC1E;;AAEA,sCAAsC;AACtC;AACA;AACA;AACA;AACA,KAAK;AACL,2BAA2B,kDAAK,8BAA8B,4CAAK;AACnE;;AAEA;AACA;AACA;AACA;AACA,mCAAmC,oDAAK;AACxC;AACA,0CAA0C,oDAAK;AAC/C;;AAEA;AACA;AACA;AACA;AACA,qBAAqB,kDAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,kDAAK;AACxC,sBAAsB,kDAAK;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,kEAAa;AACnC;AACA,qDAAqD,qDAAU;AAC/D,0BAA0B,kDAAK;AAC/B,0BAA0B,kDAAK;AAC/B;AACA;AACA;AACA;AACA,4BAA4B,kDAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAM,kDAAK;AAClB;AACA,KAAK;AACL;AACA,sBAAsB,iDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA,qBAAqB,OAAO,GAAG,2CAA2C;AAC1E;AACA,UAAU,sCAAsC;AAChD;AACA;AACA;AACA;AACA,iBAAiB,IAAI,MAAM,UAAU,GAAG;AACxC;AACA;AACA;AACA,QAAQ,EAAE,qCAAqC;AAC/C;AACA,eAAe,IAAI,OAAO,8CAA8C;AACxE;AACA;AACA;AACA,sBAAsB,UAAU,GAAG;AACnC;AACA;AACA;AACA,MAAM,EAAE,qCAAqC;AAC7C;AACA;AACA,mBAAmB,OAAO,GAAG,8CAA8C;AAC3E;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,mDAAQ;AAC9B,WAAW,8DAAU;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,WAAW,uBAAuB;AAClC,6CAA6C,UAAU;AACvD;AACA;AACA,mDAAmD,IAAI,eAAe,GAAG,IAAI;AAC7E;AACA,cAAc,MAAM,GAAG,eAAe,GAAG,IAAI;AAC7C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG,IAAI;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,MAAM,kDAAK;AACd;;AAEA,qBAAqB,gBAAgB;AACrC,aAAa,gDAAK;AAClB;;AAEe,qEAAM,EAAC;;;;;;;;;;;;;AC7VtB;AAAA;AAAA;AAAA;AAAA;AAAyC;AACL;AACN;;AAE9B,cAAc,uDAAM;AACpB;;AAEA;AACA;AACA;AACA,oBAAoB,kDAAS;AAC7B;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,CAAC;;AAED,sBAAsB,oDAAY;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iDAAiD,gBAAgB;AACjE;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,oCAAoC,gBAAgB;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,sEAAO,EAAC;;;;;;;;;;;;;AC9DvB;AAAe,4EAAa,EAAC;;;;;;;;;;;;;ACA7B;AAAA;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG,IAAI;AACP;;AAEA;AACA;AACA;AACA;;AAEe,wEAAS,EAAC;;;;;;;;;;;;;ACrBzB;AAAA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;;AAEe,qEAAM,EAAC;;;;;;;;;;;;;ACRtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgC;AACO;AACX;AACE;AACE;AACF;AACiB;AACX;AACN;AACF;;AAE5B,cAAc,uDAAM;;AAEpB,2BAA2B,kDAAkB;AAC7C,oDAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA,IAAI,+CAAM;AACV;;AAEA;AACA,WAAW,kDAAS;AACpB;;AAEA;AACA;AACA,mCAAmC,KAAK;AACxC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iCAAiC,KAAK;AACtC,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA,kCAAkC,KAAK;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,kDAAS;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,gDAAO;;AAE9B;AACA,MAAM,oDAAoB;AAC1B;AACA;AACA;AACA;AACA,KAAK;AACL,sBAAsB,+CAAM;AAC5B,yBAAyB,kDAAS;AAClC,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA,oBAAoB,gDAAO;AAC3B,mBAAmB,gDAAO;AAC1B;AACA;AACA,KAAK;AACL,oBAAoB,gDAAO;AAC3B;AACA;AACA;AACA,gCAAgC,qBAAqB;AACrD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,eAAe,KAAK;AACpB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,WAAW,YAAY;AACvB;AACA;AACA;AACA;;AAEA,+BAA+B,gDAAO;AACtC;AACA;AACA;AACA;AACA,yBAAyB,kDAAK;AAC9B;AACA,oCAAoC,+CAAe;AACnD;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA,iCAAiC,gDAAO;AACxC;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,8BAA8B,gDAAO;AACrC;AACA;AACA;AACA,oBAAoB,kDAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,kCAAkC,gDAAK;AACvC,qBAAqB,gDAAO;AAC5B;AACA;AACA;AACA;;AAEA,yBAAyB,gDAAO;AAChC,sBAAsB,kDAAK;AAC3B;AACA;;AAEA,kBAAkB,gDAAO;AACzB,8CAA8C;AAC9C;AACA;AACA;AACA;;AAEA,iCAAiC,gDAAO;AACxC;AACA;AACA;AACA,oBAAoB,kDAAK;AACzB;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,gDAAO;AACtB,gBAAgB,gDAAO;AACvB;AACA;;AAEA;AACA,SAAS,kDAAK;AACd,aAAa,sCAAS;AACtB,iBAAiB,+CAAM;AACvB,gBAAgB,8CAAK;AACrB;;AAEA;AACA,eAAe,6CAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,uBAAuB,8CAAK;AAC5B,GAAG;AACH,8CAA8C,iBAAiB;AAC/D;AACA;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA,sBAAsB,6CAAM,SAAS;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA,gDAAgD,KAAK;AACrD;AACA;AACA,uBAAuB,KAAK;AAC5B;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG,IAAI;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,6CAAM;AACrB;AACA,MAAM;AACN;AACA,KAAK,wBAAwB;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,gDAAO;AACtB;AACA;AACA,eAAe,kDAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,6BAA6B,gDAAO;AACpC;AACA;AACA,kBAAkB,gDAAO;AACzB,sBAAsB,gDAAO;AAC7B,mBAAmB,gDAAO;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,0BAA0B;AAC1B,KAAK;AACL,4BAA4B;AAC5B,0BAA0B;AAC1B;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,qBAAqB,gDAAO;AAC5B;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,kDAAK;AAC5B;AACA,8CAA8C,gDAAO;AACrD;AACA,GAAG;AACH;AACA,sDAAsD,gDAAO;AAC7D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,aAAa,gDAAK;AAClB;;AAEoE;;;;;;;;;;;;;ACloBpE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4C;AAClB;AACK;AACC;AACF;;AAE9B,cAAc,uDAAM;;AAEpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,gDAAO;AACjD;AACA,KAAK;AACL,oBAAoB,gDAAO;AAC3B;AACA;AACA;AACA,6DAA6D;AAC7D,wBAAwB,gDAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,gDAAO;AAC7B,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL,oBAAoB,gDAAO;AAC3B;AACA,eAAe,6CAA6C;AAC5D;AACA,oBAAoB,gDAAO;AAC3B;AACA,KAAK;AACL,gBAAgB,gDAAO;AACvB;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,kBAAkB,gDAAO;AACzB,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,+CAAK;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,kDAAQ;AAClC;AACA;AACA,OAAO;AACP,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,kDAAQ;AAClC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,YAAY,gEAAgE;AAC5E;AACA;AACA;AACA,WAAW,eAAe;AAC1B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,0CAA0C,gDAAO;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,kBAAkB,gDAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,iDAAK;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,gDAAO;AACf,QAAQ,4CAAK;AACb,QAAQ,4CAAK;AACb;AACA;AACA,wBAAwB,gDAAO;AAC/B,qBAAqB,gDAAO;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B;AAC1B,GAAG;AACH;AACA;AACA;AACA;;AAEuC;;;;;;;;;;;;;AClavC;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,iEAAiE,KAAK;AACtE;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEe,oEAAK,EAAC;;;;;;;;;;;;;AC/BrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgF;;AAEhF;AACA,SAAS,+CAAK;AACd;AACA;;AAEA,2BAA2B,oDAAU;AACrC,uBAAuB,yDAAe;AACtC,uBAAuB,yDAAe;;AAEY;;;;;;;;;;;;;ACXlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmD;AACT;;AAE1C,4BAA4B,yDAAe;AAC3C,SAAS,+CAAK;AACd,CAAC;AACD,4BAA4B,sDAAe;AAC3C,SAAS,+CAAK;AACd,CAAC;;AAE2C;;;;;;;;;;;;;ACV5C;AAAA;AAAmC;;AAEnC,yBAAyB,oDAAK;AAC9B;AACA;;AAEe,yEAAU,EAAC;;;;;;;;;;;;;ACN1B;AAAA;AAAqC;;AAErC,mBAAmB,qDAAM;AACzB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,mEAAI,EAAC;;;;;;;;;;;;;ACrBpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmC;AACA;AACE;AACA;AACgB;AACV;AACT;;AAElC,iCAAiC,wDAAS;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,8DAAU,OAAO;AACpC;AACA;;AAEA,wBAAwB,oDAAK;AAC7B;AACA,IAAI,mDAAK;AACT;AACA;;AAEA,mBAAmB,qDAAM;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,6BAA6B,mDAAQ,EAAE,oDAAK,EAAE,qDAAM;AACpD;AACA;;AAE0D;;;;;;;;;;;;;AC/C1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoE;;AAEpE,8BAA8B,yDAAe;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,qCAAqC;AAClE;AACA,eAAe,IAAI;AACnB;AACA;;AAEA,uBAAuB,yDAAe;AACtC,SAAS,+CAAK;AACd,CAAC;AACD;AACA,SAAS,+CAAK;AACd,CAAC;;AAEkD;;;;;;;;;;;;;ACtBnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgF;;AAEhF;AACA,SAAS,+CAAK;AACd;AACA;;AAEA,+BAA+B,oDAAU;AACzC,2BAA2B,yDAAe;AAC1C,2BAA2B,yDAAe;;AAEoB;;;;;;;;;;;;;ACX9D;AAAA;AAAA;AAAA;AAAA;AAAoE;;AAEpE;AACA,SAAS,+CAAK;AACd;AACA;;AAEA,sBAAsB,yDAAe;;AAErC,kCAAkC,yDAAe;AACjD;AACA;AACA;AACA;;AAEA;;AAEgC;;;;;;;;;;;;;ACjBhC;AAAA;AAAmC;;AAEnC,sBAAsB,oDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,WAAW,UAAU;AACrB,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;AACA;;AAEe,sEAAO,EAAC;;;;;;;;;;;;;AC/BvB;AAAA;AAAmC;;AAEnC,qBAAqB,oDAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEe,qEAAM,EAAC;;;;;;;;;;;;;ACVtB;AAAA;AAAA;AAAA;AAAsC;AACJ;;AAElC;;AAEA,oBAAoB,mDAAS;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;;AAEA;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,WAAW,sDAAQ;AACnB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEe,oEAAK,EAAC;;;;;;;;;;;;;AC3DrB;AAAA;AAAA;AAAmD;;AAEnD,+BAA+B,yDAAe;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,wDAAwD;AACxD;AACA;;AAEA;AACA,SAAS,+CAAK;AACd;AACA,CAAC;;AAEc,0EAAW,EAAC;;;;;;;;;;;;;AC7B3B;AAAA;AAA0B;;AAE1B,qBAAqB,6CAAI;AACzB;AACA;;AAEe,qEAAM,EAAC;;;;;;;;;;;;;ACNtB;AAAA;AAAA;AAAA;AAAqC;;AAErC,mBAAmB,qDAAM;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEqC;;;;;;;;;;;;;ACtCrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmC;AACQ;AACT;;AAElC,4BAA4B,wDAAS;AACrC;AACA;;AAEA,uBAAuB,oDAAK;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI,mDAAK;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAE8C;;;;;;;;;;;;;ACxD9C;AAAA;AAAqC;;AAErC,qBAAqB,qDAAM;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,qEAAM,EAAC;;;;;;;;;;;;;ACtBtB;AAAA;AAAA;AAAA;AAAA;AAAoE;;AAEpE,sBAAsB,yDAAe;AACrC,SAAS,+CAAK;AACd;AACA,CAAC;AACD,sBAAsB,yDAAe;AACrC,SAAS,+CAAK;AACd;AACA,CAAC;;AAE+B;;;;;;;;;;;;;ACXhC;AAAA;AAAqC;;AAErC,qBAAqB,qDAAM;AAC3B;AACA;;AAEe,qEAAM,EAAC;;;;;;;;;;;;;ACNtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmC;AACQ;;AAE3C,wBAAwB,oDAAK;AAC7B;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,wDAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAwB,wDAAS;AACjC;AACA;;AAEA,6BAA6B,wDAAS;AACtC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB,GAAG;AACnB;;AAEmE;;;;;;;;;;;;;AC9LnE;AAAA;AAAqC;;AAErC,wBAAwB,qDAAM;AAC9B;AACA;;AAEe,wEAAS,EAAC;;;;;;;;;;;;;ACNzB;AAAA;AAAA;AAA4C;AAClB;;AAE1B;;AAEA,oBAAoB,uDAAU;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT;;AAEA;AACA,WAAW,6CAAI,eAAe;AAC9B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,WAAW,QAAQ;AACnB,uBAAuB,MAAM,IAAI,MAAM;AACvC;AACA;AACA;AACA;AACA;;AAEe,oEAAK,EAAC;;;;;;;;;;;;;ACpDrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4B;AACI;AAQb;AACyB;AACV;AACE;AACA;;AAE0B;AACN;AAChB;AACM;AAC4B;AAC9B;AACA;;AAE5C,cAAc,4DAAM;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,6DAAc,EAAE,sEAAkB;AACjE;AACA;AACA;AACA,GAAG;AACH,IAAI;AACJ;;AAEA;AACA,EAAE,yDAAU;AACZ,EAAE,mEAAe;AACjB,EAAE,0DAAU;AACZ,EAAE,kEAAc;AAChB,EAAE,wDAAS;AACX,EAAE,wDAAS;AACX;AACA;AACA;AACA,CAAC,IAAI;;AAEL,wBAAwB,oDAAM;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA,WAAW,aAAa,cAAc;AACtC,gBAAgB,qDAAS;AACzB,iBAAiB,kDAAK;AACtB,SAAS,qDAAS,oBAAoB,qDAAS;AAC/C,OAAO;AACP;AACA;AACA,iBAAiB,kDAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,kDAAK;AACpC;AACA;AACA;;AAEA,6CAA6C,mDAAK;AAClD;AACA,kCAAkC,wBAAwB;AAC1D;AACA,iCAAiC,mDAAK;AACtC,KAAK;AACL,kCAAkC,iBAAiB;AACnD;AACA,YAAY,kDAAK;AACjB;AACA;AACA,sDAAsD,mDAAK;AAC3D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,aAAa;AACxB;AACA;AACA;AACA,mCAAmC,mDAAK;AACxC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,2BAA2B,aAAa;AACxC;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;;AAEA,kBAAkB,aAAa;AAC/B;AACA,sCAAsC,aAAa;AACnD,uCAAuC,aAAa;AACpD,sBAAsB,kDAAK;AAC3B;AACA;AACA;AACA,qCAAqC,mDAAK;AAC1C;AACA;AACA;AACA,MAAM,mDAAK;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,WAAW;AACX;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,6CAAM,GAAG,GAAG,kBAAkB;AACpC;AACA,GAAG,MAAM,kDAAK;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK,MAAM,kDAAK;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK,MAAM,kDAAK;AAChB;AACA,aAAa,kDAAK;AAClB;;AAEA;AACA;AACA;;AAEA;AACA,qBAAqB,oDAAU;AAC/B,kBAAkB,yDAAe;AACjC,iBAAiB,yDAAe;AAChC;AACA;AACA;AACA;AACA;AACA,oCAAoC,+CAAK;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iCAAiC,mDAAS;AAC1C;AACA;AACA;AACA;AACA,iBAAiB,kDAAK;AACtB;AACA,GAAG;AACH,mCAAmC,mDAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa,kDAAK;AAClB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,gCAAgC,GAAG;AAC1E,GAAG,MAAM,kDAAK;AACd;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB;AACA;AACA;AACA;AACA;AACA,gDAAgD,uDAAU;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kDAAK;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA,iEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AASE;;;;;;;;;;;;;AC3gBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkC;AACA;AACE;;AAEpC,sBAAsB,oDAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,mDAAK;AACX;AACA,0BAA0B,mDAAK;AAC/B,iDAAiD,mDAAK;AACtD;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO,2BAA2B;AAClC;AACA;AACA;AACA,OAAO,2CAA2C;AAClD;AACA;AACA;AACA;AACA,SAAS,2BAA2B;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,mDAAK;AAC1C;AACA;AACA;AACA;;AAEA;AACA,kBAAkB;AAClB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC,QAAQ;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,+CAAK;AACrC,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEkD;;;;;;;;;;;;;ACxIlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA0B;AACK;AACH;AACsB;AACK;AACrB;AACE;AACA;;AAEpC,cAAc,4DAAM;;AAEpB;;AAEA,uBAAuB,oDAAM;AAC7B;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,qBAAqB,+BAA+B;AACpD;AACA,OAAO,2DAA2D;AAClE,cAAc;AACd;AACA;AACA;AACA;AACA,SAAS,mBAAmB;AAC5B,SAAS,kBAAkB;AAC3B;AACA;AACA;AACA,SAAS,gBAAgB;AACzB,SAAS,kBAAkB;AAC3B;AACA;AACA,KAAK;AACL;AACA,SAAS,mBAAmB;AAC5B,SAAS,kCAAkC;AAC3C;AACA;AACA;AACA,SAAS,gBAAgB;AACzB,SAAS,kCAAkC;AAC3C;AACA;AACA;AACA;AACA,OAAO,mBAAmB;AAC1B,OAAO,mBAAmB;AAC1B;AACA;AACA;AACA,OAAO,gBAAgB;AACvB,OAAO,mBAAmB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,OAAO,6BAA6B;AACpC;AACA;AACA;AACA;;AAEA,qCAAqC,cAAc;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,4BAA4B,6CAAM,GAAG,YAAY,MAAM;AACvD;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,kDAAQ;AACrC;AACA;AACA;AACA,2BAA2B,kDAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iDAAK;AAC1B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAK;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,wDAAY;AAC9B;AACA;AACA,kCAAkC,kDAAK;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,mDAAK;AAC1C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,kDAAK;AACzB;AACA;AACA;AACA;AACA;AACA,kBAAkB,wDAAY;AAC9B;AACA;AACA;AACA;AACA;AACA,qCAAqC,mDAAK;AAC1C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,wDAAY;AAC5B;AACA,iCAAiC,mDAAK;AACtC;AACA,qDAAqD,mDAAK;AAC1D;AACA,yCAAyC,mDAAK;AAC9C;AACA;;AAEA;AACA;AACA;AACA;AACA,0CAA0C,+CAAK;AAC/C;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,QAAQ;AACR;AACA,sBAAsB,kDAAK;AAC3B;AACA;AACA;AACA,qCAAqC,mDAAK;AAC1C,6CAA6C,mDAAK;AAClD;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,mDAAK;AACzD,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,mDAAK;AAC/C;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,mDAAK;AAC/C;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mDAAK;AACjD,SAAS;AACT,2CAA2C,mDAAK;AAChD;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,mDAAK;AACvD,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,0BAA0B,kDAAK;AAC/B;AACA;AACA;AACA,yCAAyC,mDAAK;AAC9C;AACA,iDAAiD,mDAAK;AACtD;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,mDAAK;AACpD,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,mDAAK;AACf;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,eAAe,kBAAkB;AACjC;AACA;AACA,wBAAwB,6CAAM,GAAG,mBAAmB,kBAAkB;AACtE,0BAA0B,kDAAK;AAC/B;AACA;AACA;AACA,sBAAsB,oBAAoB;AAC1C,yCAAyC,mDAAK;AAC9C,iDAAiD,mDAAK;AACtD;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,kDAAK;AAC/B;AACA;AACA;AACA,sBAAsB,eAAe;AACrC,yCAAyC,mDAAK;AAC9C,iDAAiD,mDAAK;AACtD;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kDAAK;AACnC,6CAA6C,mDAAK;AAClD;AACA;AACA;AACA,cAAc,mDAAK;AACnB;AACA,WAAW;AACX;AACA,8BAA8B,kDAAK;AACnC,6CAA6C,mDAAK;AAClD,2CAA2C,mDAAK;AAChD;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,eAAe,oBAAoB;AACnC;AACA;AACA,8CAA8C,mDAAK;AACnD,SAAS;AACT,0DAA0D,mDAAK;AAC/D;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,mDAAK;AACrD;AACA,0BAA0B,kDAAK;AAC/B;AACA;AACA;AACA,sBAAsB,cAAc;AACpC,yCAAyC,mDAAK;AAC9C;AACA,sDAAsD,mDAAK;AAC3D;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kDAAK;AACnC;AACA,0BAA0B,qBAAqB;AAC/C;AACA,6CAA6C,mDAAK;AAClD,qDAAqD,mDAAK;AAC1D;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,aAAa,qBAAqB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP,wBAAwB,mDAAK;AAC7B,6CAA6C,mDAAK;AAClD,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA,4BAA4B,mDAAS;AACrC;AACA;AACA;AACA;AACA;AACA,YAAY,mDAAK;AACjB;AACA,SAAS;AACT,mDAAmD,mDAAK;AACxD;AACA,OAAO;AACP;AACA;AACA;AACA,UAAU,mDAAK;AACf;AACA,OAAO;AACP;AACA;AACA,UAAU,mDAAK;AACf;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yDAAyD,mDAAK;AAC9D,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,mDAAK;AACjD;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,mDAAK;AACnB;AACA,WAAW;AACX;AACA;AACA;AACA,cAAc,mDAAK;AACnB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,eAAe;AACf,GAAG;AACH,cAAc,4CAAK;AACnB,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEoD;;;;;;;;;;;;;AC9sBpD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgC;AACmB;AACd;AACH;AACE;AACQ;AACL;AACE;AACY;AACW;AACzB;;AAEvC,4BAA4B,yDAAe;AAC3C,SAAS,+CAAK;AACd,CAAC;AACD,wBAAwB,qDAAM;AAC9B;AACA;AACA,kCAAkC,qDAAS;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8BAA8B,qDAAS;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAsB;;AAEtB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,uCAAuC,gEAAkB;AACzD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB,+CAA+C;AACnE;AACA;AACA;AACA;AACA,8BAA8B,+DAAU;AACxC,SAAS,MAAM,kDAAK;AACpB;AACA,6CAA6C,qBAAqB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,qDAAU,EAAE,mDAAQ,EAAE,oDAAS;;AAE7E,qBAAqB,oDAAM;AAC3B;AACA,IAAI,mDAAK;AACT,IAAI,mDAAK;AACT,IAAI,mDAAK;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,mDAAK;AACvB;AACA;AACA,uCAAuC,aAAa;AACpD;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,gCAAgC;AAChC;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,kBAAkB,mDAAK;AACvB;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA,sBAAsB,mDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,sBAAsB,mDAAK;AAC3B;AACA,qCAAqC,mDAAK;AAC1C;AACA;;AAEA;AACA;AACA,aAAa,8DAAU;AACvB;AACA;AACA;AACA,gCAAgC,EAAE,qDAAS,sBAAsB;AACjE;AACA;AACA,SAAS,MAAM,kDAAK;AACpB;AACA;AACA,4BAA4B,qDAAS;AACrC;AACA,WAAW,4DAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kDAAK;AACvB;AACA,eAAe;AACf;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,4CAA4C,EAAE,qDAAS,sBAAsB;AAC7E;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK,+BAA+B;AACpC,KAAK,6BAA6B;AAClC,KAAK,2BAA2B;AAChC,KAAK,yBAAyB;AAC9B,KAAK,2BAA2B;AAChC,KAAK,6BAA6B;AAClC,KAAK,gCAAgC;AACrC,KAAK,6BAA6B;AAClC,KAAK,yCAAyC;AAC9C,KAAK,qCAAqC;AAC1C,KAAK,2BAA2B;AAChC,KAAK,iCAAiC;AACtC,KAAK,6BAA6B;AAClC,KAAK,2BAA2B;AAChC;AACA;;AAEsE;;;;;;;;;;;;;ACnStE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgC;AACE;AACE;AAOV;;AAE1B,oBAAoB,oDAAM;AAC1B;AACA,IAAI,mDAAK,UAAU,wDAAS;AAC5B,IAAI,mDAAK,UAAU,uDAAQ;AAC3B,IAAI,mDAAK,UAAU,wDAAS;AAC5B,IAAI,mDAAK,UAAU,6DAAc;AACjC;;AAEA;AACA;AACA;AACA;;AAEA;AACA,kCAAkC,6DAAc;AAChD;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,mDAAK;AAC3B;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,mDAAK;AAC3B;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAsB,mDAAK;AAC3B,oCAAoC,mDAAK;AACzC;;AAEA;AACA;AACA;AACA,kDAAkD,wDAAS;AAC3D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,mDAAK;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,mDAAK;AACX;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,mDAAK;AAC3B;AACA,qCAAqC,mDAAK;AAC1C,KAAK;AACL;AACA;AACA;AACA,QAAQ,mDAAK;AACb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC,QAAQ,8DAAO,IAAI;AACnD,KAAK,MAAM,kDAAK;AAChB,qCAAqC,mDAAK;AAC1C,yCAAyC,mDAAK;AAC9C;AACA;;AAEA;AACA,kBAAkB,mDAAK;AACvB;AACA;AACA,0BAA0B,mDAAK;AAC/B,2BAA2B,mDAAK;AAChC;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;AAEe,oEAAK,EAAC;;;;;;;;;;;;;AChJrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgC;AACa;AACX;AACE;AACA;;AAEpC,cAAc,4DAAM;;AAEpB,sBAAsB,oDAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA,kBAAkB,mDAAK;AACvB,mBAAmB,mDAAK;AACxB;AACA;AACA,KAAK;AACL,kBAAkB,mDAAK;AACvB,sDAAsD;AACtD;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,6DAA6D,mDAAS;AACtE;AACA,gCAAgC,OAAO,GAAG;AAC1C;AACA;AACA,cAAc,kDAAK;AACnB;AACA;AACA,qBAAqB,kBAAkB;AACvC,UAAU,mDAAK;AACf;AACA,OAAO;AACP,yCAAyC,mDAAK;AAC9C;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,wDAAwD,MAAM;AAC9D;AACA;AACA,2BAA2B;AAC3B;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,4BAA4B,OAAO;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;;AAEA;AACA;AACA,4BAA4B,OAAO;AACnC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,+CAAK;AACjD,2CAA2C,mDAAK;AAChD;AACA,SAAS;AACT,OAAO;AACP,uCAAuC,mDAAK;AAC5C;AACA,KAAK;AACL;AACA,aAAa,QAAQ;AACrB;AACA,4CAA4C,mDAAK;AACjD,OAAO;AACP,0CAA0C,mDAAK;AAC/C;AACA,4CAA4C,mDAAK;AACjD,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,mDAAK;AAC5D;AACA,KAAK;AACL;AACA;AACA,0CAA0C;AAC1C;AACA,uCAAuC,mDAAK;AAC5C,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,2CAA2C,mDAAK;AAChD,SAAS;AACT,iDAAiD,mDAAK;AACtD;AACA,OAAO;AACP,yCAAyC,mDAAK;AAC9C;AACA,KAAK;AACL,GAAG;AACH;;AAE2C;;;;;;;;;;;;;ACnQ3C;AAAA;AAAA;AAAA;AAAA;AAAgC;AACM;AACF;;AAEpC,uBAAuB,oDAAM;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,6BAA6B,QAAQ;AACrC,OAAO,MAAM,kDAAK;AAClB,wCAAwC,qDAAO;AAC/C;AACA;AACA,QAAQ,qDAAO;AACf;AACA,KAAK;AACL,GAAG;AACH;;AAEe,uEAAQ,EAAC;;;;;;;;;;;;AChExB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,6BAA6B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED,IAAI,KAA0B;AAC9B;AACA;;;;;;;;;;;;;AChQA;AACA,iBAAiB,mBAAO,CAAC,4DAAe;AACxC,kBAAkB,mBAAO,CAAC,4EAAuB;;AAEjD;AACA;AACA;AACA;AACA;;AAEA,GAAG;AACH;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC;AACA;AACA;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC7FA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACRa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yDAAyD,OAAO;AAChE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAyC,SAAS;AAClD;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA,eAAe,YAAY;AAC3B;;AAEA;AACA,2DAA2D;AAC3D,+DAA+D;AAC/D,mEAAmE;AACnE,uEAAuE;AACvE;AACA,0DAA0D,SAAS;AACnE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,aAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,aAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB,aAAa,aAAa;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,2DAA2D,YAAY;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,aAAa;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI,IAA6B;AACjC;AACA;;;;;;;;;;;;;AC/Ua;;AAEb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,YAAY;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,2BAA2B,kDAAkD;;AAE7E;AACA,MAAM;AACN,2BAA2B,6BAA6B;AACxD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACpHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,WAAW;AACtB,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,WAAW;AAC5B;AACA,+BAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,eAAe;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,cAAc,eAAe;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK,+BAA+B;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;;;;;;ACrwBA,eAAe,KAAiD,oBAAoB,SAAiH,CAAC,mBAAmB,mBAAmB,SAAS,cAAc,4BAA4B,YAAY,qBAAqB,2DAA2D,uCAAuC,qCAAqC,oBAAoB,EAAE,iBAAiB,4FAA4F,eAAe,wCAAwC,SAAS,EAAE,mBAAmB,8BAA8B,qDAAqD,0BAA0B,6CAA6C,sBAAsB,6DAA6D,YAAY,eAAe,SAAS,iBAAiB,iCAAiC,iBAAiB,YAAY,UAAU,sBAAsB,mBAAmB,iDAAiD,iBAAiB,kBAAkB,eAAe,iBAAiB,aAAa,MAAM,mBAAmB,+SAA+S,SAAS,GAAG,QAAQ,YAAY,cAAc,4CAA4C,aAAa,4EAA4E,MAAM,wBAAwB,UAAU,KAAK,OAAO,YAAY,SAAS,YAAY,wBAAwB,UAAU,KAAK,EAAE,EAAE,kBAAkB,MAAM,SAAS,WAAW,wBAAwB,cAAc,KAAK,EAAE,EAAE,kBAAkB,WAAW,SAAS,kBAAkB,kPAAkP,UAAU,oBAAoB,KAAK,QAAQ,EAAE,kBAAkB,uBAAuB,SAAS,UAAU,6KAA6K,sBAAsB,WAAW,UAAU,8BAA8B,aAAa,wBAAwB,UAAU,KAAK,EAAE,EAAE,mBAAmB,kEAAkE,WAAW,eAAe,WAAW,wBAAwB,UAAU,KAAK,EAAE,YAAY,iBAAiB,eAAe,wBAAwB,UAAU,yBAAyB,UAAU,KAAK,SAAS,EAAE,mBAAmB,oEAAoE,OAAO,+CAA+C,YAAY,wBAAwB,UAAU,KAAK,EAAE,gBAAgB,WAAW,sBAAsB,eAAe,0EAA0E,QAAQ,cAAc,kBAAkB,gBAAgB,aAAa,eAAe,oBAAoB,+FAA+F,cAAc,sBAAsB,2CAA2C,EAAE,QAAQ,oFAAoF,kCAAkC,aAAa,mBAAmB,iBAAiB,MAAM,0DAA0D,yEAAyE,0GAA0G,kCAAkC,oGAAoG,+DAA+D,eAAe,gDAAgD,aAAa,8FAA8F,yEAAyE,gGAAgG,0EAA0E,oKAAoK,wDAAwD,EAAE,UAAU,oBAAoB,QAAQ,iBAAiB,+EAA+E,iBAAiB,qEAAqE,MAAM,oXAAoX,cAAc,wBAAwB,UAAU,QAAQ,mCAAmC,6BAA6B,SAAS,8EAA8E,cAAc,2BAA2B,kBAAkB,0BAA0B,oDAAoD,gDAAgD,+CAA+C,yBAAyB,gBAAgB,qFAAqF,sCAAsC,aAAa,sBAAsB,wDAAwD,oBAAoB,SAAS,SAAS,sBAAsB,6FAA6F,YAAY,2IAA2I,SAAS,+FAA+F,iBAAiB,qDAAqD,0FAA0F,WAAW,4BAA4B,aAAa,UAAU,qDAAqD,gIAAgI,EAAE,GAAG,8BAA8B,sBAAsB,QAAQ,kBAAkB,iBAAiB,yCAAyC,eAAe,qBAAqB,SAAS,yCAAyC,WAAW,EAAE,YAAY,yNAAyN,QAAQ,yGAAyG,IAAI,yBAAyB,gDAAgD,SAAS,yBAAyB,SAAS,EAAE,cAAc,iDAAiD,sCAAsC,gBAAgB,EAAE,kBAAkB,iCAAiC,iHAAiH,sCAAsC,aAAa,6CAA6C,8HAA8H,IAAI,SAAS,0BAA0B,WAAW,iBAAiB,yBAAyB,SAAS,0BAA0B,YAAY,4NAA4N,EAAE,kBAAkB,sCAAsC,oBAAoB,EAAE,gBAAgB,iCAAiC,uBAAuB,KAAK,qEAAqE,qBAAqB,kBAAkB,4CAA4C,WAAW,gMAAgM,SAAS,mDAAmD,kBAAkB,0BAA0B,oBAAoB,EAAE,YAAY,yOAAyO,+DAA+D,oBAAoB,mBAAmB,aAAa,gDAAgD,uEAAuE,eAAe,wBAAwB,iBAAiB,qDAAqD,iEAAiE,cAAc,OAAO,qBAAqB,sCAAsC,qBAAqB,oHAAoH,qBAAqB,0BAA0B,IAAI,cAAc,qBAAqB,KAAK,aAAa,uBAAuB,oEAAoE,SAAS,4EAA4E,YAAY,gBAAgB,cAAc,6GAA6G,gBAAgB,iIAAiI,4BAA4B,uFAAuF,gKAAgK,WAAW,yDAAyD,yBAAyB,sGAAsG,iCAAiC,gBAAgB,gBAAgB,eAAe,cAAc,SAAS,0DAA0D,yBAAyB,kEAAkE,SAAS,aAAa,QAAQ,kBAAkB,aAAa,4EAA4E,cAAc,kDAAkD,kBAAkB,sDAAsD,gBAAgB,oDAAoD,YAAY,iIAAiI,4CAA4C,QAAQ,kBAAkB,gBAAgB,SAAS,WAAW,sHAAsH,cAAc,uEAAuE,2CAA2C,QAAQ,OAAO,+DAA+D,sBAAsB,QAAQ,QAAQ,eAAe,+CAA+C,oBAAoB,EAAE,+BAA+B,2BAA2B,uGAAuG,SAAS,8DAA8D,YAAY,gIAAgI,UAAU,gCAAgC,SAAS,qCAAqC,iCAAiC,gBAAgB,4EAA4E,EAAE,KAAK,sBAAsB,eAAe,4FAA4F,SAAS,6DAA6D,aAAa,GAAG,EAAE,OAAO,UAAU,8BAA8B,sBAAsB,qDAAqD,SAAS,gEAAgE,+BAA+B,cAAc,iFAAiF,cAAc,sBAAsB,eAAe,4CAA4C,kCAAkC,SAAS,0DAA0D,UAAU,gFAAgF,SAAS,iCAAiC,+BAA+B,YAAY,eAAe,kBAAkB,6BAA6B,eAAe,oLAAoL,QAAQ,mBAAmB,6BAA6B,kBAAkB,2EAA2E,kCAAkC,sCAAsC,gDAAgD,EAAE,QAAQ,yCAAyC,+CAA+C,cAAc,EAAE,QAAQ,sDAAsD,wCAAwC,qBAAqB,SAAS,oGAAoG,IAAI,kBAAkB,iBAAiB,+CAA+C,oBAAoB,4BAA4B,oIAAoI,YAAY,iCAAiC,sCAAsC,kBAAkB,0HAA0H,+BAA+B,kEAAkE,gBAAgB,UAAU,kFAAkF,+CAA+C,kBAAkB,8DAA8D,8BAA8B,6BAA6B,YAAY,kBAAkB,uBAAuB,kDAAkD,kBAAkB,6CAA6C,0DAA0D,yCAAyC,SAAS,mDAAmD,iBAAiB,+BAA+B,iCAAiC,YAAY,qGAAqG,UAAU,wBAAwB,kDAAkD,mFAAmF,QAAQ,kBAAkB,iBAAiB,+CAA+C,oBAAoB,4BAA4B,oIAAoI,YAAY,qCAAqC,+LAA+L,UAAU,kFAAkF,+CAA+C,kBAAkB,4EAA4E,gBAAgB,sEAAsE,KAAK,sBAAsB,0EAA0E,gCAAgC,6BAA6B,iBAAiB,+BAA+B,iCAAiC,YAAY,sGAAsG,gFAAgF,QAAQ,sBAAsB,qBAAqB,YAAY,oCAAoC,kBAAkB,kEAAkE,UAAU,wDAAwD,SAAS,gFAAgF,OAAO,kBAAkB,iBAAiB,mGAAmG,eAAe,sDAAsD,YAAY,sCAAsC,aAAa,+BAA+B,iBAAiB,gCAAgC,eAAe,oCAAoC,QAAQ,iCAAiC,SAAS,0CAA0C,cAAc,iEAAiE,WAAW,sBAAsB,kBAAkB,sCAAsC,gBAAgB,oCAAoC,kBAAkB,EAAE,kBAAkB,oCAAoC,8CAA8C,KAAK,WAAW,iBAAiB,mBAAmB,sGAAsG,OAAO,6FAA6F,QAAQ,YAAY,WAAW,MAAM,2EAA2E,kBAAkB,+BAA+B,+HAA+H,wBAAwB,+CAA+C,QAAQ,EAAE,2CAA2C,iFAAiF,WAAW,kBAAkB,aAAa,EAAE,iCAAiC,oBAAoB,UAAU,4BAA4B,8FAA8F,cAAc,sEAAsE,gGAAgG,kGAAkG,QAAQ,kBAAkB,iBAAiB,sDAAsD,iBAAiB,kCAAkC,gBAAgB,cAAc,cAAc,sEAAsE,WAAW,6BAA6B,gBAAgB,gHAAgH,SAAS,wBAAwB,YAAY,mNAAmN,iBAAiB,uBAAuB,cAAc,OAAO,qBAAqB,sCAAsC,sDAAsD,kGAAkG,YAAY,2GAA2G,QAAQ,kBAAkB,wCAAwC,QAAQ,8BAA8B,SAAS,mCAAmC,SAAS,8BAA8B,SAAS,+BAA+B,SAAS,gCAAgC,SAAS,+BAA+B,SAAS,gCAAgC,SAAS,8BAA8B,SAAS,gCAAgC,SAAS,qCAAqC,SAAS,qCAAqC,SAAS,qCAAqC,SAAS,8BAA8B,SAAS,2BAA2B,SAAS,EAAE,GAAG;AACjqqB,qC;;;;;;;;;;;;ACDa;AACb;AACA,4CAA4C;AAC5C;AACA,8CAA8C,cAAc;AAC5D,mCAAmC,mBAAO,CAAC,sDAAY;AACvD,+BAA+B,mBAAO,CAAC,8CAAQ;AAC/C;AACA;AACA;AACA,2BAA2B,QAAQ;AACnC,2BAA2B,QAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,IAAI;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ;AACnC,2BAA2B,QAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,IAAI;AACb;AACA;AACA;AACA;AACA,8BAA8B,WAAW;AACzC,8BAA8B,WAAW;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,IAAI;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,SAAS,IAAI;AACb;AACA;AACA;AACA,CAAC,oCAAoC;AACrC;AACA,wC;;;;;;;;;;;;AC/Fa;AACb;AACA,4CAA4C;AAC5C;AACA,mCAAmC,mBAAO,CAAC,sDAAY;AACvD,+BAA+B,mBAAO,CAAC,8CAAQ;AAC/C,kCAAkC,mBAAO,CAAC,mDAAW;AACrD,qCAAqC,mBAAO,CAAC,uEAAgB;AAC7D,2BAA2B,mBAAO,CAAC,mDAAM;AACzC,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,iBAAiB;AAC3C;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,WAAW;AAC1C,6BAA6B,gBAAgB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,iC;;;;;;;;;;;;ACpZa;AACb;AACA,4CAA4C;AAC5C;AACA,8CAA8C,cAAc;AAC5D,2BAA2B,mBAAO,CAAC,mDAAM;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,oC;;;;;;;;;;;;ACtGa;AACb;AACA,4CAA4C;AAC5C;AACA,8CAA8C,cAAc;AAC5D,iCAAiC,mBAAO,CAAC,+DAAY;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gBAAgB;AACjB;AACA,8B;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2B;;AAE8B;AAK5B;AACS;;AAEQ;AACR;AACJ;;AAEsC;AACf;AACH;AACA;;AAEpB;AACI;AACJ;AACI;AACA;AACM;;AAEJ;AACJ;AACA;;AAE2B;;AAEzB;AACF;AACI;;AAET;AACE;AACW;AACF;AACP;;AAEO;AACJ;;AAEtC,6CAAK;AACL;AACA,uCAAuC,qEAAkB;;AAEzD,+BAA+B,yDAAU;AACzC,oCAAoC,mEAAe;AACnD,+BAA+B,yDAAU;AACzC,mCAAmC,iEAAc;AACjD,8BAA8B,uDAAS;AACvC,8BAA8B,wDAAS;;AAEvC,+BAA+B,yDAAU;AACzC,oCAAoC,mEAAe;AACnD,+BAA+B,yDAAU;AACzC,mCAAmC,iEAAc;AACjD,8BAA8B,uDAAS;AACvC,8BAA8B,wDAAS;AACvC,GAAG;AACH;AACA;;AAEA,6CAAK;AACL;AACA,qBAAqB,yDAAU;AAC/B,yBAAyB,iEAAc;AACvC,sBAAsB,uDAAM;;AAE5B,0BAA0B,mEAAe;AACzC,qBAAqB,yDAAU;AAC/B,oBAAoB,uDAAS;AAC7B,oBAAoB,wDAAS;;AAE7B,0BAA0B,2DAAU;AACpC,0BAA0B,sDAAS;AACnC,sBAAsB,uDAAM;AAC5B,oBAAoB,qDAAI;;AAExB,oBAAoB,sDAAI;AACxB,oBAAoB,mDAAU;AAC9B,sBAAsB,wDAAM;AAC5B,oBAAoB,sDAAI;AACxB,sBAAsB,wDAAM;AAC5B,sBAAsB,wDAAM;AAC5B,yBAAyB,2DAAS;;AAElC,uBAAuB,yDAAO;AAC9B,qBAAqB,uDAAK;AAC1B,qBAAqB,uDAAK;;AAE1B,sBAAsB,wDAAM;AAC5B,qBAAqB,uDAAK;AAC1B,uBAAuB,yDAAO;;AAE9B,qBAAqB,uDAAW;AAChC,mBAAmB,qDAAS;;AAE5B,gBAAgB,kDAAK;AACrB,iBAAiB,mDAAM;AACvB,sBAAsB,wDAAU;AAChC,uBAAuB,yDAAW;AAClC,kBAAkB,oDAAO;AACzB,GAAG;AACH;AACA;;AAEA,KAAK,KAA0B;AAC/B,qBAAqB,6CAAK;AAC1B,CAAC;AACD,yCAAyC,qIAAU;AACnD,0CAA0C,eAAe,EAAE;AAC3D;AACA;;AAEA;AACA,kCAAkC,6CAAK;AACvC;;;;;;;;;;;;;;ACxHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4B;AACU;AACJ;AACW;AACF;AACT;AACE;;AAEpC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,wBAAwB,mDAAK;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,uDAAU;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,wDAAW;AAC9B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA,iBAAiB,kDAAM;AACvB,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA,kBAAkB,qDAAO;AACzB;AACA;AACA,qBAAqB,6CAAM,SAAS,EAAE,mDAAK;AAC3C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH,CAAC;;AAED,0BAA0B,mDAAO;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,KAAK;AAC7C;AACA;AACA;;AAEA;AACA,WAAW,YAAY;AACvB;AACA;AACA;;AAEA;AACA,SAAS,QAAQ;AACjB;AACA;AACA,eAAe,YAAY;AAC3B;AACA;AACA;AACA;AACA;AACA,YAAY,qDAAO;AACnB;AACA;AACA,SAAS;AACT;AACA,2CAA2C,qDAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,qDAAO;AACnB;AACA;AACA,kDAAkD,qDAAO;AACzD;AACA,6CAA6C,qDAAO;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,oBAAoB;AAClC;AACA,KAAK;AACL;AACA;AACA;AACA,cAAc,oBAAoB,4BAA4B,SAAS;AACvE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;;AAE6C;;;;;;;;;;;;;ACzT7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4B;AACU;AACU;AACN;AACV;;AAEhC;AACA;AACA,IAAI,YAAY,GAAG,YAAY;AAC/B;;AAEA,4BAA4B,iDAAW;AACvC;AACA;AACA;AACA,MAAM,qDAAO;AACb;AACA,qBAAqB,qDAAO;AAC5B;AACA;AACA;AACA,qBAAqB,qDAAO;AAC5B;AACA;AACA;AACA;AACA;AACA,qCAAqC,sBAAsB;AAC3D;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,qDAAK;AAC9D;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,kBAAkB,qDAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kCAAkC,mCAAmC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B,6CAAS;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oEAAoE,iDAAK;AACzE,oEAAoE,iDAAK;AACzE;AACA;AACA,uBAAuB,6CAAM,SAAS,EAAE,6CAAS;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH,CAAC;;AAEgD;;;;;;;;;;;;;AC7HjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4B;AACU;AACU;AACT;AACG;AACV;;AAEhC;AACA,IAAI,iCAAiC;AACrC;AACA,IAAI,kBAAkB,GAAG,iBAAiB;AAC1C;AACA;;AAEA,0BAA0B,iDAAW;AACrC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,oDAAoD,qDAAO;AAC3D;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,MAAM,qDAAO;AACb;AACA;AACA,6CAA6C,qDAAO;AACpD;AACA,YAAY,qDAAQ;AACpB;AACA;AACA;AACA,iCAAiC,qDAAK;AACtC,4BAA4B,qDAAQ;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAwB,6CAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oEAAoE,iDAAK;AACzE,oEAAoE,iDAAK;AACzE;AACA;AACA;AACA,SAAS,2BAA2B;AACpC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,qBAAqB,6CAAM,SAAS,EAAE,6CAAS;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,QAAQ;AAC1C;AACA,mBAAmB,UAAU;AAC7B;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH,CAAC;;AAEc,wEAAS,EAAC;;;;;;;;;;;;;ACnIzB;AAAA;AAA8B;;AAE9B,0BAA0B,+CAAM;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEe,0EAAW,EAAC;;;;;;;;;;;;;AClC3B;AAAA;AAA8B;;AAE9B,yBAAyB,+CAAM;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,yEAAU,EAAC;;;;;;;;;;;;;ACvB1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2D;AACI;AACF;AACI;AACL;AACA;AACZ;AACE;AACF;AACE;AACuB;AACA;AACnB;AACF;AACG;AACH;AACF;AACE;AACE;AACN;AACa;AACF;AACI;AACL;AACI;AACV;AACF;AACQ;AACR;;AAEnC;AACf;AACA,QAAQ,mEAAa;AACrB,YAAY,qEAAe;AAC3B,WAAW,oEAAc;AACzB,aAAa,sEAAgB;AAC7B,GAAG;AACH,cAAc,mEAAc;AAC5B,cAAc,mEAAc;AAC5B,QAAQ,6DAAQ;AAChB,SAAS,8DAAS;AAClB,QAAQ,6DAAQ;AAChB,gBAAgB,6DAAQ;AACxB,SAAS,8DAAS;AAClB;AACA,QAAQ,uEAAwB;AAChC,SAAS,uEAAwB;AACjC,GAAG;AACH,WAAW,iEAAW;AACtB;AACA,SAAS,gEAAU;AACnB,SAAS,kEAAW;AACpB,GAAG;AACH,UAAU,gEAAU;AACpB,SAAS,+DAAS;AAClB;AACA,UAAU,gEAAU;AACpB,UAAU,iEAAW;AACrB,GAAG;AACH,QAAQ,8DAAQ;AAChB;AACA,YAAY,qEAAc;AAC1B,WAAW,oEAAa;AACxB,aAAa,sEAAe;AAC5B,GAAG;AACH;AACA,SAAS,mEAAa;AACtB,WAAW,qEAAe;AAC1B,GAAG;AACH,UAAU,gEAAU;AACpB,SAAS,+DAAS;AAClB,aAAa,mEAAa;AAC1B,SAAS,+DAAS;AAClB,CAAC,EAAC;;;;;;;;;;;;;ACzEF;AAAA;AAAA;AAAwD;;AAExD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,sBAAsB,iEAAY;AAClC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,sCAAsC,eAAe;AACrD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,qEAAM,EAAC;;;;;;;;;;;;;ACnLtB;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,+BAA+B;AACtE,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,8BAA8B,KAAK;AACnC,6BAA6B,IAAI;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA;AACA;AACA,gCAAgC,aAAa;AAC7C;AACA;AACA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEe,sEAAO,EAAC","file":"quill.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./quill.js\");\n","/* globals __webpack_amd_options__ */\nmodule.exports = __webpack_amd_options__;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  for (var i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iMTUiIHgyPSIzIiB5MT0iOSIgeTI9IjkiPjwvbGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjE0IiB4Mj0iNCIgeTE9IjE0IiB5Mj0iMTQiPjwvbGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjEyIiB4Mj0iNiIgeTE9IjQiIHkyPSI0Ij48L2xpbmU+DQo8L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iMTUiIHgyPSIzIiB5MT0iOSIgeTI9IjkiPjwvbGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjE1IiB4Mj0iMyIgeTE9IjE0IiB5Mj0iMTQiPjwvbGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjE1IiB4Mj0iMyIgeTE9IjQiIHkyPSI0Ij48L2xpbmU+DQo8L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iMyIgeDI9IjE1IiB5MT0iOSIgeTI9IjkiPjwvbGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjMiIHgyPSIxMyIgeTE9IjE0IiB5Mj0iMTQiPjwvbGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjMiIHgyPSI5IiB5MT0iNCIgeTI9IjQiPjwvbGluZT4NCjwvc3ZnPg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iMTUiIHgyPSIzIiB5MT0iOSIgeTI9IjkiPjwvbGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjE1IiB4Mj0iNSIgeTE9IjE0IiB5Mj0iMTQiPjwvbGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjE1IiB4Mj0iOSIgeTE9IjQiIHkyPSI0Ij48L2xpbmU+DQo8L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8ZyBjbGFzcz0icWwtZmlsbCBxbC1jb2xvci1sYWJlbCI+DQogICAgPHBvbHlnb24gcG9pbnRzPSI2IDYuODY4IDYgNiA1IDYgNSA3IDUuOTQyIDcgNiA2Ljg2OCI+PC9wb2x5Z29uPg0KICAgIDxyZWN0IGhlaWdodD0iMSIgd2lkdGg9IjEiIHg9IjQiIHk9IjQiPjwvcmVjdD4NCiAgICA8cG9seWdvbiBwb2ludHM9IjYuODE3IDUgNiA1IDYgNiA2LjM4IDYgNi44MTcgNSI+PC9wb2x5Z29uPg0KICAgIDxyZWN0IGhlaWdodD0iMSIgd2lkdGg9IjEiIHg9IjIiIHk9IjYiPjwvcmVjdD4NCiAgICA8cmVjdCBoZWlnaHQ9IjEiIHdpZHRoPSIxIiB4PSIzIiB5PSI1Ij48L3JlY3Q+DQogICAgPHJlY3QgaGVpZ2h0PSIxIiB3aWR0aD0iMSIgeD0iNCIgeT0iNyI+PC9yZWN0Pg0KICAgIDxwb2x5Z29uIHBvaW50cz0iNCAxMS40MzkgNCAxMSAzIDExIDMgMTIgMy43NTUgMTIgNCAxMS40MzkiPjwvcG9seWdvbj4NCiAgICA8cmVjdCBoZWlnaHQ9IjEiIHdpZHRoPSIxIiB4PSIyIiB5PSIxMiI+PC9yZWN0Pg0KICAgIDxyZWN0IGhlaWdodD0iMSIgd2lkdGg9IjEiIHg9IjIiIHk9IjkiPjwvcmVjdD4NCiAgICA8cmVjdCBoZWlnaHQ9IjEiIHdpZHRoPSIxIiB4PSIyIiB5PSIxNSI+PC9yZWN0Pg0KICAgIDxwb2x5Z29uIHBvaW50cz0iNC42MyAxMCA0IDEwIDQgMTEgNC4xOTIgMTEgNC42MyAxMCI+PC9wb2x5Z29uPg0KICAgIDxyZWN0IGhlaWdodD0iMSIgd2lkdGg9IjEiIHg9IjMiIHk9IjgiPjwvcmVjdD4NCiAgICA8cGF0aCBkPSJNMTAuODMyLDQuMkwxMSw0LjU4MlY0SDEwLjcwOEExLjk0OCwxLjk0OCwwLDAsMSwxMC44MzIsNC4yWiI+PC9wYXRoPg0KICAgIDxwYXRoIGQ9Ik03LDQuNTgyTDcuMTY4LDQuMkExLjkyOSwxLjkyOSwwLDAsMSw3LjI5Miw0SDdWNC41ODJaIj48L3BhdGg+DQogICAgPHBhdGggZD0iTTgsMTNINy42ODNsLTAuMzUxLjhhMS45MzMsMS45MzMsMCwwLDEtLjEyNC4ySDhWMTNaIj48L3BhdGg+DQogICAgPHJlY3QgaGVpZ2h0PSIxIiB3aWR0aD0iMSIgeD0iMTIiIHk9IjIiPjwvcmVjdD4NCiAgICA8cmVjdCBoZWlnaHQ9IjEiIHdpZHRoPSIxIiB4PSIxMSIgeT0iMyI+PC9yZWN0Pg0KICAgIDxwYXRoIGQ9Ik05LDNIOFYzLjI4MkExLjk4NSwxLjk4NSwwLDAsMSw5LDNaIj48L3BhdGg+DQogICAgPHJlY3QgaGVpZ2h0PSIxIiB3aWR0aD0iMSIgeD0iMiIgeT0iMyI+PC9yZWN0Pg0KICAgIDxyZWN0IGhlaWdodD0iMSIgd2lkdGg9IjEiIHg9IjYiIHk9IjIiPjwvcmVjdD4NCiAgICA8cmVjdCBoZWlnaHQ9IjEiIHdpZHRoPSIxIiB4PSIzIiB5PSIyIj48L3JlY3Q+DQogICAgPHJlY3QgaGVpZ2h0PSIxIiB3aWR0aD0iMSIgeD0iNSIgeT0iMyI+PC9yZWN0Pg0KICAgIDxyZWN0IGhlaWdodD0iMSIgd2lkdGg9IjEiIHg9IjkiIHk9IjIiPjwvcmVjdD4NCiAgICA8cmVjdCBoZWlnaHQ9IjEiIHdpZHRoPSIxIiB4PSIxNSIgeT0iMTQiPjwvcmVjdD4NCiAgICA8cG9seWdvbiBwb2ludHM9IjEzLjQ0NyAxMC4xNzQgMTMuNDY5IDEwLjIyNSAxMy40NzIgMTAuMjMyIDEzLjgwOCAxMSAxNCAxMSAxNCAxMCAxMy4zNyAxMCAxMy40NDcgMTAuMTc0Ij48L3BvbHlnb24+DQogICAgPHJlY3QgaGVpZ2h0PSIxIiB3aWR0aD0iMSIgeD0iMTMiIHk9IjciPjwvcmVjdD4NCiAgICA8cmVjdCBoZWlnaHQ9IjEiIHdpZHRoPSIxIiB4PSIxNSIgeT0iNSI+PC9yZWN0Pg0KICAgIDxyZWN0IGhlaWdodD0iMSIgd2lkdGg9IjEiIHg9IjE0IiB5PSI2Ij48L3JlY3Q+DQogICAgPHJlY3QgaGVpZ2h0PSIxIiB3aWR0aD0iMSIgeD0iMTUiIHk9IjgiPjwvcmVjdD4NCiAgICA8cmVjdCBoZWlnaHQ9IjEiIHdpZHRoPSIxIiB4PSIxNCIgeT0iOSI+PC9yZWN0Pg0KICAgIDxwYXRoIGQ9Ik0zLjc3NSwxNEgzdjFINFYxNC4zMTRBMS45NywxLjk3LDAsMCwxLDMuNzc1LDE0WiI+PC9wYXRoPg0KICAgIDxyZWN0IGhlaWdodD0iMSIgd2lkdGg9IjEiIHg9IjE0IiB5PSIzIj48L3JlY3Q+DQogICAgPHBvbHlnb24gcG9pbnRzPSIxMiA2Ljg2OCAxMiA2IDExLjYyIDYgMTIgNi44NjgiPjwvcG9seWdvbj4NCiAgICA8cmVjdCBoZWlnaHQ9IjEiIHdpZHRoPSIxIiB4PSIxNSIgeT0iMiI+PC9yZWN0Pg0KICAgIDxyZWN0IGhlaWdodD0iMSIgd2lkdGg9IjEiIHg9IjEyIiB5PSI1Ij48L3JlY3Q+DQogICAgPHJlY3QgaGVpZ2h0PSIxIiB3aWR0aD0iMSIgeD0iMTMiIHk9IjQiPjwvcmVjdD4NCiAgICA8cG9seWdvbiBwb2ludHM9IjEyLjkzMyA5IDEzIDkgMTMgOCAxMi40OTUgOCAxMi45MzMgOSI+PC9wb2x5Z29uPg0KICAgIDxyZWN0IGhlaWdodD0iMSIgd2lkdGg9IjEiIHg9IjkiIHk9IjE0Ij48L3JlY3Q+DQogICAgPHJlY3QgaGVpZ2h0PSIxIiB3aWR0aD0iMSIgeD0iOCIgeT0iMTUiPjwvcmVjdD4NCiAgICA8cGF0aCBkPSJNNiwxNC45MjZWMTVIN1YxNC4zMTZBMS45OTMsMS45OTMsMCwwLDEsNiwxNC45MjZaIj48L3BhdGg+DQogICAgPHJlY3QgaGVpZ2h0PSIxIiB3aWR0aD0iMSIgeD0iNSIgeT0iMTUiPjwvcmVjdD4NCiAgICA8cGF0aCBkPSJNMTAuNjY4LDEzLjhMMTAuMzE3LDEzSDEwdjFoMC43OTJBMS45NDcsMS45NDcsMCwwLDEsMTAuNjY4LDEzLjhaIj48L3BhdGg+DQogICAgPHJlY3QgaGVpZ2h0PSIxIiB3aWR0aD0iMSIgeD0iMTEiIHk9IjE1Ij48L3JlY3Q+DQogICAgPHBhdGggZD0iTTE0LjMzMiwxMi4yYTEuOTksMS45OSwwLDAsMSwuMTY2LjhIMTVWMTJIMTQuMjQ1WiI+PC9wYXRoPg0KICAgIDxyZWN0IGhlaWdodD0iMSIgd2lkdGg9IjEiIHg9IjE0IiB5PSIxNSI+PC9yZWN0Pg0KICAgIDxyZWN0IGhlaWdodD0iMSIgd2lkdGg9IjEiIHg9IjE1IiB5PSIxMSI+PC9yZWN0Pg0KICA8L2c+DQogIDxwb2x5bGluZSBjbGFzcz0icWwtc3Ryb2tlIiBwb2ludHM9IjUuNSAxMyA5IDUgMTIuNSAxMyI+PC9wb2x5bGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjExLjYzIiB4Mj0iNi4zOCIgeTE9IjExIiB5Mj0iMTEiPjwvbGluZT4NCjwvc3ZnPg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8cmVjdCBjbGFzcz0icWwtZmlsbCBxbC1zdHJva2UiIGhlaWdodD0iMyIgd2lkdGg9IjMiIHg9IjQiIHk9IjUiPjwvcmVjdD4NCiAgPHJlY3QgY2xhc3M9InFsLWZpbGwgcWwtc3Ryb2tlIiBoZWlnaHQ9IjMiIHdpZHRoPSIzIiB4PSIxMSIgeT0iNSI+PC9yZWN0Pg0KICA8cGF0aCBjbGFzcz0icWwtZXZlbiBxbC1maWxsIHFsLXN0cm9rZSIgZD0iTTcsOGMwLDQuMDMxLTMsNS0zLDUiPjwvcGF0aD4NCiAgPHBhdGggY2xhc3M9InFsLWV2ZW4gcWwtZmlsbCBxbC1zdHJva2UiIGQ9Ik0xNCw4YzAsNC4wMzEtMyw1LTMsNSI+PC9wYXRoPg0KPC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8cGF0aCBjbGFzcz0icWwtc3Ryb2tlIiBkPSJNNSw0SDkuNUEyLjUsMi41LDAsMCwxLDEyLDYuNXYwQTIuNSwyLjUsMCwwLDEsOS41LDlINUEwLDAsMCwwLDEsNSw5VjRBMCwwLDAsMCwxLDUsNFoiPjwvcGF0aD4NCiAgPHBhdGggY2xhc3M9InFsLXN0cm9rZSIgZD0iTTUsOWg1LjVBMi41LDIuNSwwLDAsMSwxMywxMS41djBBMi41LDIuNSwwLDAsMSwxMC41LDE0SDVhMCwwLDAsMCwxLDAsMFY5QTAsMCwwLDAsMSw1LDlaIj48L3BhdGg+DQo8L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iIiB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iNSIgeDI9IjEzIiB5MT0iMyIgeTI9IjMiPjwvbGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjYiIHgyPSI5LjM1IiB5MT0iMTIiIHkyPSIzIj48L2xpbmU+DQogIDxsaW5lIGNsYXNzPSJxbC1zdHJva2UiIHgxPSIxMSIgeDI9IjE1IiB5MT0iMTEiIHkyPSIxNSI+PC9saW5lPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iMTUiIHgyPSIxMSIgeTE9IjExIiB5Mj0iMTUiPjwvbGluZT4NCiAgPHJlY3QgY2xhc3M9InFsLWZpbGwiIGhlaWdodD0iMSIgcng9IjAuNSIgcnk9IjAuNSIgd2lkdGg9IjciIHg9IjIiIHk9IjE0Ij48L3JlY3Q+DQo8L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8cG9seWxpbmUgY2xhc3M9InFsLWV2ZW4gcWwtc3Ryb2tlIiBwb2ludHM9IjUgNyAzIDkgNSAxMSI+PC9wb2x5bGluZT4NCiAgPHBvbHlsaW5lIGNsYXNzPSJxbC1ldmVuIHFsLXN0cm9rZSIgcG9pbnRzPSIxMyA3IDE1IDkgMTMgMTEiPjwvcG9seWxpbmU+DQogIDxsaW5lIGNsYXNzPSJxbC1zdHJva2UiIHgxPSIxMCIgeDI9IjgiIHkxPSI1IiB5Mj0iMTMiPjwvbGluZT4NCjwvc3ZnPg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8bGluZSBjbGFzcz0icWwtY29sb3ItbGFiZWwgcWwtc3Ryb2tlIHFsLXRyYW5zcGFyZW50IiB4MT0iMyIgeDI9IjE1IiB5MT0iMTUiIHkyPSIxNSI+PC9saW5lPg0KICA8cG9seWxpbmUgY2xhc3M9InFsLXN0cm9rZSIgcG9pbnRzPSI1LjUgMTEgOSAzIDEyLjUgMTEiPjwvcG9seWxpbmU+DQogIDxsaW5lIGNsYXNzPSJxbC1zdHJva2UiIHgxPSIxMS42MyIgeDI9IjYuMzgiIHkxPSI5IiB5Mj0iOSI+PC9saW5lPg0KPC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8cG9seWdvbiBjbGFzcz0icWwtc3Ryb2tlIHFsLWZpbGwiIHBvaW50cz0iMyAxMSA1IDkgMyA3IDMgMTEiPjwvcG9seWdvbj4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSBxbC1maWxsIiB4MT0iMTUiIHgyPSIxMSIgeTE9IjQiIHkyPSI0Ij48L2xpbmU+DQogIDxwYXRoIGNsYXNzPSJxbC1maWxsIiBkPSJNMTEsM2EzLDMsMCwwLDAsMCw2aDFWM0gxMVoiPjwvcGF0aD4NCiAgPHJlY3QgY2xhc3M9InFsLWZpbGwiIGhlaWdodD0iMTEiIHdpZHRoPSIxIiB4PSIxMSIgeT0iNCI+PC9yZWN0Pg0KICA8cmVjdCBjbGFzcz0icWwtZmlsbCIgaGVpZ2h0PSIxMSIgd2lkdGg9IjEiIHg9IjEzIiB5PSI0Ij48L3JlY3Q+DQo8L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8cG9seWdvbiBjbGFzcz0icWwtc3Ryb2tlIHFsLWZpbGwiIHBvaW50cz0iMTUgMTIgMTMgMTAgMTUgOCAxNSAxMiI+PC9wb2x5Z29uPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIHFsLWZpbGwiIHgxPSI5IiB4Mj0iNSIgeTE9IjQiIHkyPSI0Ij48L2xpbmU+DQogIDxwYXRoIGNsYXNzPSJxbC1maWxsIiBkPSJNNSwzQTMsMywwLDAsMCw1LDlINlYzSDVaIj48L3BhdGg+DQogIDxyZWN0IGNsYXNzPSJxbC1maWxsIiBoZWlnaHQ9IjExIiB3aWR0aD0iMSIgeD0iNSIgeT0iNCI+PC9yZWN0Pg0KICA8cmVjdCBjbGFzcz0icWwtZmlsbCIgaGVpZ2h0PSIxMSIgd2lkdGg9IjEiIHg9IjciIHk9IjQiPjwvcmVjdD4NCjwvc3ZnPg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8cG9seWdvbiBjbGFzcz0icWwtc3Ryb2tlIiBwb2ludHM9IjcgMTEgOSAxMyAxMSAxMSA3IDExIj48L3BvbHlnb24+DQogIDxwb2x5Z29uIGNsYXNzPSJxbC1zdHJva2UiIHBvaW50cz0iNyA3IDkgNSAxMSA3IDcgNyI+PC9wb2x5Z29uPg0KPC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8cGF0aCBjbGFzcz0icWwtZmlsbCIgZD0iTTExLjc1OSwyLjQ4MmEyLjU2MSwyLjU2MSwwLDAsMC0zLjUzLjYwN0E3LjY1Niw3LjY1NiwwLDAsMCw2LjgsNi4yQzYuMTA5LDkuMTg4LDUuMjc1LDE0LjY3Nyw0LjE1LDE0LjkyN2ExLjU0NSwxLjU0NSwwLDAsMC0xLjMtLjkzM0EwLjkyMiwwLjkyMiwwLDAsMCwyLDE1LjAzNlMxLjk1NCwxNiw0LjExOSwxNnMzLjA5MS0yLjY5MSwzLjctNS41NTNjMC4xNzctLjgyNi4zNi0xLjcyNiwwLjU1NC0yLjZMOC43NzUsNi4yYzAuMzgxLTEuNDIxLjgwNy0yLjUyMSwxLjMwNi0yLjY3NmExLjAxNCwxLjAxNCwwLDAsMCwxLjAyLjU2QTAuOTY2LDAuOTY2LDAsMCwwLDExLjc1OSwyLjQ4MloiPjwvcGF0aD4NCiAgPHJlY3QgY2xhc3M9InFsLWZpbGwiIGhlaWdodD0iMS42IiByeD0iMC44IiByeT0iMC44IiB3aWR0aD0iNSIgeD0iNS4xNSIgeT0iNi4yIj48L3JlY3Q+DQogIDxwYXRoIGNsYXNzPSJxbC1maWxsIiBkPSJNMTMuNjYzLDEyLjAyN2ExLjY2MiwxLjY2MiwwLDAsMSwuMjY2LTAuMjc2cTAuMTkzLDAuMDY5LjQ1NiwwLjEzOGEyLjEsMi4xLDAsMCwwLC41MzUuMDY5LDEuMDc1LDEuMDc1LDAsMCwwLC43NjctMC4zLDEuMDQ0LDEuMDQ0LDAsMCwwLC4zMTQtMC44LDAuODQsMC44NCwwLDAsMC0uMjM4LTAuNjE5LDAuOCwwLjgsMCwwLDAtLjU5NC0wLjIzOSwxLjE1NCwxLjE1NCwwLDAsMC0uNzgxLjMsNC42MDcsNC42MDcsMCwwLDAtLjc4MSwxcS0wLjA5MS4xNS0uMjE4LDAuMzQ2bC0wLjI0Ni4zOGMtMC4wNjgtLjI4OC0wLjEzNy0wLjU4Mi0wLjIxMi0wLjg4NS0wLjQ1OS0xLjg0Ny0yLjQ5NC0uOTg0LTIuOTQxLTAuOC0wLjQ4Mi4yLS4zNTMsMC42NDctMC4wOTQsMC41MjlhMC44NjksMC44NjksMCwwLDEsMS4yODEuNTg1YzAuMjE3LDAuNzUxLjM3NywxLjQzNiwwLjUyNywyLjAzOGE1LjY4OCw1LjY4OCwwLDAsMS0uMzYyLjQ2NywyLjY5LDIuNjksMCwwLDEtLjI2NC4yNzFxLTAuMjIxLS4wOC0wLjQ3MS0wLjE0N2EyLjAyOSwyLjAyOSwwLDAsMC0uNTIyLTAuMDY2LDEuMDc5LDEuMDc5LDAsMCwwLS43NjguM0ExLjA1OCwxLjA1OCwwLDAsMCw5LDE1LjEzMWEwLjgyLDAuODIsMCwwLDAsLjgzMi44NTIsMS4xMzQsMS4xMzQsMCwwLDAsLjc4Ny0wLjMsNS4xMSw1LjExLDAsMCwwLC43NzYtMC45OTNxMC4xNDEtLjIxOS4yMTUtMC4zNGMwLjA0Ni0uMDc2LjEyMi0wLjE5NCwwLjIyMy0wLjM0NmEyLjc4NiwyLjc4NiwwLDAsMCwuOTE4LDEuNzI2LDIuNTgyLDIuNTgyLDAsMCwwLDIuMzc2LS4xODVjMC4zMTctLjE4MS4yMTItMC41NjUsMC0wLjQ5NEEwLjgwNywwLjgwNywwLDAsMSwxNC4xNzYsMTVhNS4xNTksNS4xNTksMCwwLDEtLjkxMy0yLjQ0NmwwLDBRMTMuNDg3LDEyLjI0LDEzLjY2MywxMi4wMjdaIj48L3BhdGg+DQo8L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiPg0KICA8cGF0aCBjbGFzcz0icWwtZmlsbCIgZD0iTTE2LjczOTc1LDEzLjgxNDQ1di40Mzk0NWEuNTQwODUuNTQwODUsMCwwLDEtLjYwNS42MDU0N0gxMS44NTVhLjU4MzkyLjU4MzkyLDAsMCwxLS42NDg5My0uNjA1NDdWMTQuMDEyN2MwLTIuOTA1MjcsMy4zOTk0MS0zLjQyMTg3LDMuMzk5NDEtNC41NTQ2OWEuNzc2NzUuNzc2NzUsMCwwLDAtLjg0NzE3LS43ODEyNSwxLjE3Njg0LDEuMTc2ODQsMCwwLDAtLjgzNTk0LjM4NDc3Yy0uMjc0OS4yNjM2Ny0uNTYxLjM3NC0uODU3OTEuMTMxODRsLS40MjkyLS4zNDA4MmMtLjMwODExLS4yNDIxOS0uMzg1MjUtLjUxNzU4LS4xNTQzLS44MTQ0NWEyLjk3MTU1LDIuOTcxNTUsMCwwLDEsMi40NTM2MS0xLjE3Njc2LDIuNDUzOTMsMi40NTM5MywwLDAsMSwyLjY4NDA4LDIuNDA5MThjMCwyLjQ1MzEyLTMuMTc5MiwyLjkyNjc2LTMuMjc4MzIsMy45Mzg0OGgyLjc5NDQzQS41NDA4NS41NDA4NSwwLDAsMSwxNi43Mzk3NSwxMy44MTQ0NVpNOSwzQS45OTk3NC45OTk3NCwwLDAsMCw4LDRWOEgzVjRBMSwxLDAsMCwwLDEsNFYxNGExLDEsMCwwLDAsMiwwVjEwSDh2NGExLDEsMCwwLDAsMiwwVjRBLjk5OTc0Ljk5OTc0LDAsMCwwLDksM1oiLz4NCjwvc3ZnPg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTggMTgiPg0KICA8cGF0aCBjbGFzcz0icWwtZmlsbCIgZD0iTTEwLDRWMTRhMSwxLDAsMCwxLTIsMFYxMEgzdjRhMSwxLDAsMCwxLTIsMFY0QTEsMSwwLDAsMSwzLDRWOEg4VjRhMSwxLDAsMCwxLDIsMFptNi4wNjc4Nyw5LjIwOUgxNC45ODk3NVY3LjU5ODYzYS41NDA4NS41NDA4NSwwLDAsMC0uNjA1LS42MDU0N2gtLjYyNzQ0YTEuMDExMTksMS4wMTExOSwwLDAsMC0uNzQ4LjI5Njg4TDExLjY0NSw4LjU2NjQxYS41NDM1LjU0MzUsMCwwLDAtLjAyMi44NTg0bC4yODYxMy4zMDc2MmEuNTM4NjEuNTM4NjEsMCwwLDAsLjg0NzE3LjAzMzJsLjA5OTEyLS4wODc4OWExLjIxMzcsMS4yMTM3LDAsMCwwLC4yNDE3LS4zNTI1NGguMDIyNDZzLS4wMTEyMy4zMDg1OS0uMDExMjMuNjA1NDdWMTMuMjA5SDEyLjA0MWEuNTQwODUuNTQwODUsMCwwLDAtLjYwNS42MDU0N3YuNDM5NDVhLjU0MDg1LjU0MDg1LDAsMCwwLC42MDUuNjA1NDdoNC4wMjY4NmEuNTQwODUuNTQwODUsMCwwLDAsLjYwNS0uNjA1NDd2LS40Mzk0NUEuNTQwODUuNTQwODUsMCwwLDAsMTYuMDY3ODcsMTMuMjA5WiIvPg0KPC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8cmVjdCBjbGFzcz0icWwtc3Ryb2tlIiBoZWlnaHQ9IjEwIiB3aWR0aD0iMTIiIHg9IjMiIHk9IjQiPjwvcmVjdD4NCiAgPGNpcmNsZSBjbGFzcz0icWwtZmlsbCIgY3g9IjYiIGN5PSI3IiByPSIxIj48L2NpcmNsZT4NCiAgPHBvbHlsaW5lIGNsYXNzPSJxbC1ldmVuIHFsLWZpbGwiIHBvaW50cz0iNSAxMiA1IDExIDcgOSA4IDEwIDExIDcgMTMgOSAxMyAxMiA1IDEyIj48L3BvbHlsaW5lPg0KPC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iMyIgeDI9IjE1IiB5MT0iMTQiIHkyPSIxNCI+PC9saW5lPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iMyIgeDI9IjE1IiB5MT0iNCIgeTI9IjQiPjwvbGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjkiIHgyPSIxNSIgeTE9IjkiIHkyPSI5Ij48L2xpbmU+DQogIDxwb2x5bGluZSBjbGFzcz0icWwtZmlsbCBxbC1zdHJva2UiIHBvaW50cz0iMyA3IDMgMTEgNSA5IDMgNyI+PC9wb2x5bGluZT4NCjwvc3ZnPg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iNyIgeDI9IjEzIiB5MT0iNCIgeTI9IjQiPjwvbGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjUiIHgyPSIxMSIgeTE9IjE0IiB5Mj0iMTQiPjwvbGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjgiIHgyPSIxMCIgeTE9IjE0IiB5Mj0iNCI+PC9saW5lPg0KPC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iNyIgeDI9IjExIiB5MT0iNyIgeTI9IjExIj48L2xpbmU+DQogIDxwYXRoIGNsYXNzPSJxbC1ldmVuIHFsLXN0cm9rZSIgZD0iTTguOSw0LjU3N2EzLjQ3NiwzLjQ3NiwwLDAsMSwuMzYsNC42NzlBMy40NzYsMy40NzYsMCwwLDEsNC41NzcsOC45QzMuMTg1LDcuNSwyLjAzNSw2LjQsNC4yMTcsNC4yMTdTNy41LDMuMTg1LDguOSw0LjU3N1oiPjwvcGF0aD4NCiAgPHBhdGggY2xhc3M9InFsLWV2ZW4gcWwtc3Ryb2tlIiBkPSJNMTMuNDIzLDkuMWEzLjQ3NiwzLjQ3NiwwLDAsMC00LjY3OS0uMzYsMy40NzYsMy40NzYsMCwwLDAsLjM2LDQuNjc5YzEuMzkyLDEuMzkyLDIuNSwyLjU0Miw0LjY3OS4zNlMxNC44MTUsMTAuNSwxMy40MjMsOS4xWiI+PC9wYXRoPg0KPC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iNiIgeDI9IjE1IiB5MT0iNCIgeTI9IjQiPjwvbGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjYiIHgyPSIxNSIgeTE9IjkiIHkyPSI5Ij48L2xpbmU+DQogIDxsaW5lIGNsYXNzPSJxbC1zdHJva2UiIHgxPSI2IiB4Mj0iMTUiIHkxPSIxNCIgeTI9IjE0Ij48L2xpbmU+DQogIDxsaW5lIGNsYXNzPSJxbC1zdHJva2UiIHgxPSIzIiB4Mj0iMyIgeTE9IjQiIHkyPSI0Ij48L2xpbmU+DQogIDxsaW5lIGNsYXNzPSJxbC1zdHJva2UiIHgxPSIzIiB4Mj0iMyIgeTE9IjkiIHkyPSI5Ij48L2xpbmU+DQogIDxsaW5lIGNsYXNzPSJxbC1zdHJva2UiIHgxPSIzIiB4Mj0iMyIgeTE9IjE0IiB5Mj0iMTQiPjwvbGluZT4NCjwvc3ZnPg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iIiB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iOSIgeDI9IjE1IiB5MT0iNCIgeTI9IjQiPjwvbGluZT4NCiAgPHBvbHlsaW5lIGNsYXNzPSJxbC1zdHJva2UiIHBvaW50cz0iMyA0IDQgNSA2IDMiPjwvcG9seWxpbmU+DQogIDxsaW5lIGNsYXNzPSJxbC1zdHJva2UiIHgxPSI5IiB4Mj0iMTUiIHkxPSIxNCIgeTI9IjE0Ij48L2xpbmU+DQogIDxwb2x5bGluZSBjbGFzcz0icWwtc3Ryb2tlIiBwb2ludHM9IjMgMTQgNCAxNSA2IDEzIj48L3BvbHlsaW5lPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iOSIgeDI9IjE1IiB5MT0iOSIgeTI9IjkiPjwvbGluZT4NCiAgPHBvbHlsaW5lIGNsYXNzPSJxbC1zdHJva2UiIHBvaW50cz0iMyA5IDQgMTAgNiA4Ij48L3BvbHlsaW5lPg0KPC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iNyIgeDI9IjE1IiB5MT0iNCIgeTI9IjQiPjwvbGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjciIHgyPSIxNSIgeTE9IjkiIHkyPSI5Ij48L2xpbmU+DQogIDxsaW5lIGNsYXNzPSJxbC1zdHJva2UiIHgxPSI3IiB4Mj0iMTUiIHkxPSIxNCIgeTI9IjE0Ij48L2xpbmU+DQogIDxsaW5lIGNsYXNzPSJxbC1zdHJva2UgcWwtdGhpbiIgeDE9IjIuNSIgeDI9IjQuNSIgeTE9IjUuNSIgeTI9IjUuNSI+PC9saW5lPg0KICA8cGF0aCBjbGFzcz0icWwtZmlsbCIgZD0iTTMuNSw2QTAuNSwwLjUsMCwwLDEsMyw1LjVWMy4wODVsLTAuMjc2LjEzOEEwLjUsMC41LDAsMCwxLDIuMDUzLDNjLTAuMTI0LS4yNDctMC4wMjMtMC4zMjQuMjI0LTAuNDQ3bDEtLjVBMC41LDAuNSwwLDAsMSw0LDIuNXYzQTAuNSwwLjUsMCwwLDEsMy41LDZaIj48L3BhdGg+DQogIDxwYXRoIGNsYXNzPSJxbC1zdHJva2UgcWwtdGhpbiIgZD0iTTQuNSwxMC41aC0yYzAtLjIzNCwxLjg1LTEuMDc2LDEuODUtMi4yMzRBMC45NTksMC45NTksMCwwLDAsMi41LDguMTU2Ij48L3BhdGg+DQogIDxwYXRoIGNsYXNzPSJxbC1zdHJva2UgcWwtdGhpbiIgZD0iTTIuNSwxNC44NDZhMC45NTksMC45NTksMCwwLDAsMS44NS0uMTA5QTAuNywwLjcsMCwwLDAsMy43NSwxNGEwLjY4OCwwLjY4OCwwLDAsMCwuNi0wLjczNiwwLjk1OSwwLjk1OSwwLDAsMC0xLjg1LS4xMDkiPjwvcGF0aD4NCjwvc3ZnPg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iMyIgeDI9IjE1IiB5MT0iMTQiIHkyPSIxNCI+PC9saW5lPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIiB4MT0iMyIgeDI9IjE1IiB5MT0iNCIgeTI9IjQiPjwvbGluZT4NCiAgPGxpbmUgY2xhc3M9InFsLXN0cm9rZSIgeDE9IjkiIHgyPSIxNSIgeTE9IjkiIHkyPSI5Ij48L2xpbmU+DQogIDxwb2x5bGluZSBjbGFzcz0icWwtc3Ryb2tlIiBwb2ludHM9IjUgNyA1IDExIDMgOSA1IDciPjwvcG9seWxpbmU+DQo8L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8bGluZSBjbGFzcz0icWwtc3Ryb2tlIHFsLXRoaW4iIHgxPSIxNS41IiB4Mj0iMi41IiB5MT0iOC41IiB5Mj0iOS41Ij48L2xpbmU+DQogIDxwYXRoIGNsYXNzPSJxbC1maWxsIiBkPSJNOS4wMDcsOEM2LjU0Miw3Ljc5MSw2LDcuNTE5LDYsNi41LDYsNS43OTIsNy4yODMsNSw5LDVjMS41NzEsMCwyLjc2NS42NzksMi45NjksMS4zMDlhMSwxLDAsMCwwLDEuOS0uNjE3QzEzLjM1Niw0LjEwNiwxMS4zNTQsMyw5LDMsNi4yLDMsNCw0LjUzOCw0LDYuNWEzLjIsMy4yLDAsMCwwLC41LDEuODQzWiI+PC9wYXRoPg0KICA8cGF0aCBjbGFzcz0icWwtZmlsbCIgZD0iTTguOTg0LDEwQzExLjQ1NywxMC4yMDgsMTIsMTAuNDc5LDEyLDExLjVjMCwwLjcwOC0xLjI4MywxLjUtMywxLjUtMS41NzEsMC0yLjc2NS0uNjc5LTIuOTY5LTEuMzA5YTEsMSwwLDEsMC0xLjkuNjE3QzQuNjQ0LDEzLjg5NCw2LjY0NiwxNSw5LDE1YzIuOCwwLDUtMS41MzgsNS0zLjVhMy4yLDMuMiwwLDAsMC0uNS0xLjg0M1oiPjwvcGF0aD4NCjwvc3ZnPg==\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8cGF0aCBjbGFzcz0icWwtZmlsbCIgZD0iTTE1LjUsMTVIMTMuODYxYTMuODU4LDMuODU4LDAsMCwwLDEuOTE0LTIuOTc1LDEuOCwxLjgsMCwwLDAtMS42LTEuNzUxQTEuOTIxLDEuOTIxLDAsMCwwLDEyLjAyMSwxMS43YTAuNTAwMTMsMC41MDAxMywwLDEsMCwuOTU3LjI5MWgwYTAuOTE0LDAuOTE0LDAsMCwxLDEuMDUzLS43MjUsMC44MSwwLjgxLDAsMCwxLC43NDQuNzYyYzAsMS4wNzYtMS4xNjk3MSwxLjg2OTgyLTEuOTM5NzEsMi40MzA4MkExLjQ1NjM5LDEuNDU2MzksMCwwLDAsMTIsMTUuNWEwLjUsMC41LDAsMCwwLC41LjVoM0EwLjUsMC41LDAsMCwwLDE1LjUsMTVaIi8+DQogIDxwYXRoIGNsYXNzPSJxbC1maWxsIiBkPSJNOS42NSw1LjI0MWExLDEsMCwwLDAtMS40MDkuMTA4TDYsNy45NjQsMy43NTksNS4zNDlBMSwxLDAsMCwwLDIuMTkyLDYuNTkxNzhRMi4yMTU0MSw2LjYyMTMsMi4yNDEsNi42NDlMNC42ODQsOS41LDIuMjQxLDEyLjM1QTEsMSwwLDAsMCwzLjcxLDEzLjcwNzIycTAuMDI1NTctLjAyNzY4LjA0OS0wLjA1NzIyTDYsMTEuMDM2LDguMjQxLDEzLjY1YTEsMSwwLDEsMCwxLjU2Ny0xLjI0Mjc3UTkuNzg0NTksMTIuMzc3Nyw5Ljc1OSwxMi4zNUw3LjMxNiw5LjUsOS43NTksNi42NTFBMSwxLDAsMCwwLDkuNjUsNS4yNDFaIi8+DQo8L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8cGF0aCBjbGFzcz0icWwtZmlsbCIgZD0iTTE1LjUsN0gxMy44NjFhNC4wMTUsNC4wMTUsMCwwLDAsMS45MTQtMi45NzUsMS44LDEuOCwwLDAsMC0xLjYtMS43NTFBMS45MjIsMS45MjIsMCwwLDAsMTIuMDIxLDMuN2EwLjUsMC41LDAsMSwwLC45NTcuMjkxLDAuOTE3LDAuOTE3LDAsMCwxLDEuMDUzLS43MjUsMC44MSwwLjgxLDAsMCwxLC43NDQuNzYyYzAsMS4wNzctMS4xNjQsMS45MjUtMS45MzQsMi40ODZBMS40MjMsMS40MjMsMCwwLDAsMTIsNy41YTAuNSwwLjUsMCwwLDAsLjUuNWgzQTAuNSwwLjUsMCwwLDAsMTUuNSw3WiIvPg0KICA8cGF0aCBjbGFzcz0icWwtZmlsbCIgZD0iTTkuNjUxLDUuMjQxYTEsMSwwLDAsMC0xLjQxLjEwOEw2LDcuOTY0LDMuNzU5LDUuMzQ5YTEsMSwwLDEsMC0xLjUxOSwxLjNMNC42ODMsOS41LDIuMjQxLDEyLjM1YTEsMSwwLDEsMCwxLjUxOSwxLjNMNiwxMS4wMzYsOC4yNDEsMTMuNjVhMSwxLDAsMCwwLDEuNTE5LTEuM0w3LjMxNyw5LjUsOS43NTksNi42NTFBMSwxLDAsMCwwLDkuNjUxLDUuMjQxWiIvPg0KPC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8cmVjdCBjbGFzcz0icWwtc3Ryb2tlIiBoZWlnaHQ9IjEyIiB3aWR0aD0iMTIiIHg9IjMiIHk9IjMiPjwvcmVjdD4NCiAgPHJlY3QgY2xhc3M9InFsLWZpbGwiIGhlaWdodD0iMiIgd2lkdGg9IjMiIHg9IjUiIHk9IjUiPjwvcmVjdD4NCiAgPHJlY3QgY2xhc3M9InFsLWZpbGwiIGhlaWdodD0iMiIgd2lkdGg9IjQiIHg9IjkiIHk9IjUiPjwvcmVjdD4NCiAgPGcgY2xhc3M9InFsLWZpbGwgcWwtdHJhbnNwYXJlbnQiPg0KICAgIDxyZWN0IGhlaWdodD0iMiIgd2lkdGg9IjMiIHg9IjUiIHk9IjgiPjwvcmVjdD4NCiAgICA8cmVjdCBoZWlnaHQ9IjIiIHdpZHRoPSI0IiB4PSI5IiB5PSI4Ij48L3JlY3Q+DQogICAgPHJlY3QgaGVpZ2h0PSIyIiB3aWR0aD0iMyIgeD0iNSIgeT0iMTEiPjwvcmVjdD4NCiAgICA8cmVjdCBoZWlnaHQ9IjIiIHdpZHRoPSI0IiB4PSI5IiB5PSIxMSI+PC9yZWN0Pg0KICA8L2c+DQo8L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8cGF0aCBjbGFzcz0icWwtc3Ryb2tlIiBkPSJNNSwzVjlhNC4wMTIsNC4wMTIsMCwwLDAsNCw0SDlhNC4wMTIsNC4wMTIsMCwwLDAsNC00VjMiPjwvcGF0aD4NCiAgPHJlY3QgY2xhc3M9InFsLWZpbGwiIGhlaWdodD0iMSIgcng9IjAuNSIgcnk9IjAuNSIgd2lkdGg9IjEyIiB4PSIzIiB5PSIxNSI+PC9yZWN0Pg0KPC9zdmc+\"","module.exports = \"data:image/svg+xml;base64,PHN2ZyB2aWV3Ym94PSIwIDAgMTggMTgiPg0KICA8cmVjdCBjbGFzcz0icWwtc3Ryb2tlIiBoZWlnaHQ9IjEyIiB3aWR0aD0iMTIiIHg9IjMiIHk9IjMiPjwvcmVjdD4NCiAgPHJlY3QgY2xhc3M9InFsLWZpbGwiIGhlaWdodD0iMTIiIHdpZHRoPSIxIiB4PSI1IiB5PSIzIj48L3JlY3Q+DQogIDxyZWN0IGNsYXNzPSJxbC1maWxsIiBoZWlnaHQ9IjEyIiB3aWR0aD0iMSIgeD0iMTIiIHk9IjMiPjwvcmVjdD4NCiAgPHJlY3QgY2xhc3M9InFsLWZpbGwiIGhlaWdodD0iMiIgd2lkdGg9IjgiIHg9IjUiIHk9IjgiPjwvcmVjdD4NCiAgPHJlY3QgY2xhc3M9InFsLWZpbGwiIGhlaWdodD0iMSIgd2lkdGg9IjMiIHg9IjMiIHk9IjUiPjwvcmVjdD4NCiAgPHJlY3QgY2xhc3M9InFsLWZpbGwiIGhlaWdodD0iMSIgd2lkdGg9IjMiIHg9IjMiIHk9IjciPjwvcmVjdD4NCiAgPHJlY3QgY2xhc3M9InFsLWZpbGwiIGhlaWdodD0iMSIgd2lkdGg9IjMiIHg9IjMiIHk9IjEwIj48L3JlY3Q+DQogIDxyZWN0IGNsYXNzPSJxbC1maWxsIiBoZWlnaHQ9IjEiIHdpZHRoPSIzIiB4PSIzIiB5PSIxMiI+PC9yZWN0Pg0KICA8cmVjdCBjbGFzcz0icWwtZmlsbCIgaGVpZ2h0PSIxIiB3aWR0aD0iMyIgeD0iMTIiIHk9IjUiPjwvcmVjdD4NCiAgPHJlY3QgY2xhc3M9InFsLWZpbGwiIGhlaWdodD0iMSIgd2lkdGg9IjMiIHg9IjEyIiB5PSI3Ij48L3JlY3Q+DQogIDxyZWN0IGNsYXNzPSJxbC1maWxsIiBoZWlnaHQ9IjEiIHdpZHRoPSIzIiB4PSIxMiIgeT0iMTAiPjwvcmVjdD4NCiAgPHJlY3QgY2xhc3M9InFsLWZpbGwiIGhlaWdodD0iMSIgd2lkdGg9IjMiIHg9IjEyIiB5PSIxMiI+PC9yZWN0Pg0KPC9zdmc+\"","import extend from 'extend';\r\nimport Delta from 'quill-delta';\r\nimport {\r\n  AttributorStore,\r\n  BlockBlot,\r\n  EmbedBlot,\r\n  LeafBlot,\r\n  Scope,\r\n} from 'parchment';\r\nimport Break from './break';\r\nimport Inline from './inline';\r\nimport TextBlot from './text';\r\n\r\nconst NEWLINE_LENGTH = 1;\r\n\r\nclass Block extends BlockBlot {\r\n  constructor(scroll, domNode) {\r\n    super(scroll, domNode);\r\n    this.cache = {};\r\n  }\r\n\r\n  delta() {\r\n    if (this.cache.delta == null) {\r\n      this.cache.delta = blockDelta(this);\r\n    }\r\n    return this.cache.delta;\r\n  }\r\n\r\n  deleteAt(index, length) {\r\n    super.deleteAt(index, length);\r\n    this.cache = {};\r\n  }\r\n\r\n  formatAt(index, length, name, value) {\r\n    if (length <= 0) return;\r\n    if (this.scroll.query(name, Scope.BLOCK)) {\r\n      if (index + length === this.length()) {\r\n        this.format(name, value);\r\n      }\r\n    } else {\r\n      super.formatAt(\r\n        index,\r\n        Math.min(length, this.length() - index - 1),\r\n        name,\r\n        value,\r\n      );\r\n    }\r\n    this.cache = {};\r\n  }\r\n\r\n  insertAt(index, value, def) {\r\n    if (def != null) {\r\n      super.insertAt(index, value, def);\r\n      this.cache = {};\r\n      return;\r\n    }\r\n    if (value.length === 0) return;\r\n    const lines = value.split('\\n');\r\n    const text = lines.shift();\r\n    if (text.length > 0) {\r\n      if (index < this.length() - 1 || this.children.tail == null) {\r\n        super.insertAt(Math.min(index, this.length() - 1), text);\r\n      } else {\r\n        this.children.tail.insertAt(this.children.tail.length(), text);\r\n      }\r\n      this.cache = {};\r\n    }\r\n    let block = this;\r\n    lines.reduce((lineIndex, line) => {\r\n      block = block.split(lineIndex, true);\r\n      block.insertAt(0, line);\r\n      return line.length;\r\n    }, index + text.length);\r\n  }\r\n\r\n  insertBefore(blot, ref) {\r\n    const { head } = this.children;\r\n    super.insertBefore(blot, ref);\r\n    if (head instanceof Break) {\r\n      head.remove();\r\n    }\r\n    this.cache = {};\r\n  }\r\n\r\n  length() {\r\n    if (this.cache.length == null) {\r\n      this.cache.length = super.length() + NEWLINE_LENGTH;\r\n    }\r\n    return this.cache.length;\r\n  }\r\n\r\n  moveChildren(target, ref) {\r\n    super.moveChildren(target, ref);\r\n    this.cache = {};\r\n  }\r\n\r\n  optimize(context) {\r\n    super.optimize(context);\r\n    this.cache = {};\r\n  }\r\n\r\n  path(index) {\r\n    return super.path(index, true);\r\n  }\r\n\r\n  removeChild(child) {\r\n    super.removeChild(child);\r\n    this.cache = {};\r\n  }\r\n\r\n  split(index, force = false) {\r\n    if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\r\n      const clone = this.clone();\r\n      if (index === 0) {\r\n        this.parent.insertBefore(clone, this);\r\n        return this;\r\n      }\r\n      this.parent.insertBefore(clone, this.next);\r\n      return clone;\r\n    }\r\n    const next = super.split(index, force);\r\n    this.cache = {};\r\n    return next;\r\n  }\r\n}\r\nBlock.blotName = 'block';\r\nBlock.tagName = 'P';\r\nBlock.defaultChild = Break;\r\nBlock.allowedChildren = [Break, Inline, EmbedBlot, TextBlot];\r\n\r\nclass BlockEmbed extends EmbedBlot {\r\n  attach() {\r\n    super.attach();\r\n    this.attributes = new AttributorStore(this.domNode);\r\n  }\r\n\r\n  delta() {\r\n    return new Delta().insert(\r\n      this.value(),\r\n      extend(this.formats(), this.attributes.values()),\r\n    );\r\n  }\r\n\r\n  format(name, value) {\r\n    const attribute = this.scroll.query(name, Scope.BLOCK_ATTRIBUTE);\r\n    if (attribute != null) {\r\n      this.attributes.attribute(attribute, value);\r\n    }\r\n  }\r\n\r\n  formatAt(index, length, name, value) {\r\n    this.format(name, value);\r\n  }\r\n\r\n  insertAt(index, value, def) {\r\n    if (typeof value === 'string' && value.endsWith('\\n')) {\r\n      const block = this.scroll.create(Block.blotName);\r\n      this.parent.insertBefore(block, index === 0 ? this : this.next);\r\n      block.insertAt(0, value.slice(0, -1));\r\n    } else {\r\n      super.insertAt(index, value, def);\r\n    }\r\n  }\r\n}\r\nBlockEmbed.scope = Scope.BLOCK_BLOT;\r\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\r\n\r\nfunction blockDelta(blot, filter = true) {\r\n  return blot\r\n    .descendants(LeafBlot)\r\n    .reduce((delta, leaf) => {\r\n      if (leaf.length() === 0) {\r\n        return delta;\r\n      }\r\n      return delta.insert(leaf.value(), bubbleFormats(leaf, {}, filter));\r\n    }, new Delta())\r\n    .insert('\\n', bubbleFormats(blot));\r\n}\r\n\r\nfunction bubbleFormats(blot, formats = {}, filter = true) {\r\n  if (blot == null) return formats;\r\n  if (typeof blot.formats === 'function') {\r\n    formats = extend(formats, blot.formats());\r\n    if (filter) {\r\n      // exclude syntax highlighting from deltas and getFormat()\r\n      delete formats['code-token'];\r\n    }\r\n  }\r\n  if (\r\n    blot.parent == null ||\r\n    blot.parent.statics.blotName === 'scroll' ||\r\n    blot.parent.statics.scope !== blot.statics.scope\r\n  ) {\r\n    return formats;\r\n  }\r\n  return bubbleFormats(blot.parent, formats, filter);\r\n}\r\n\r\nexport { blockDelta, bubbleFormats, BlockEmbed, Block as default };\r\n","import { EmbedBlot } from 'parchment';\r\n\r\nclass Break extends EmbedBlot {\r\n  static value() {\r\n    return undefined;\r\n  }\r\n\r\n  optimize() {\r\n    if (this.prev || this.next) {\r\n      this.remove();\r\n    }\r\n  }\r\n\r\n  length() {\r\n    return 0;\r\n  }\r\n\r\n  value() {\r\n    return '';\r\n  }\r\n}\r\nBreak.blotName = 'break';\r\nBreak.tagName = 'BR';\r\n\r\nexport default Break;\r\n","import { ContainerBlot } from 'parchment';\r\n\r\nclass Container extends ContainerBlot {}\r\n\r\nexport default Container;\r\n","import { EmbedBlot, Scope } from 'parchment';\r\nimport TextBlot from './text';\r\n\r\nclass Cursor extends EmbedBlot {\r\n  static value() {\r\n    return undefined;\r\n  }\r\n\r\n  constructor(scroll, domNode, selection) {\r\n    super(scroll, domNode);\r\n    this.selection = selection;\r\n    this.textNode = document.createTextNode(Cursor.CONTENTS);\r\n    this.domNode.appendChild(this.textNode);\r\n    this.savedLength = 0;\r\n  }\r\n\r\n  detach() {\r\n    // super.detach() will also clear domNode.__blot\r\n    if (this.parent != null) this.parent.removeChild(this);\r\n  }\r\n\r\n  format(name, value) {\r\n    if (this.savedLength !== 0) {\r\n      super.format(name, value);\r\n      return;\r\n    }\r\n    let target = this;\r\n    let index = 0;\r\n    while (target != null && target.statics.scope !== Scope.BLOCK_BLOT) {\r\n      index += target.offset(target.parent);\r\n      target = target.parent;\r\n    }\r\n    if (target != null) {\r\n      this.savedLength = Cursor.CONTENTS.length;\r\n      target.optimize();\r\n      target.formatAt(index, Cursor.CONTENTS.length, name, value);\r\n      this.savedLength = 0;\r\n    }\r\n  }\r\n\r\n  index(node, offset) {\r\n    if (node === this.textNode) return 0;\r\n    return super.index(node, offset);\r\n  }\r\n\r\n  length() {\r\n    return this.savedLength;\r\n  }\r\n\r\n  position() {\r\n    return [this.textNode, this.textNode.data.length];\r\n  }\r\n\r\n  remove() {\r\n    super.remove();\r\n    this.parent = null;\r\n  }\r\n\r\n  restore() {\r\n    if (this.selection.composing || this.parent == null) return null;\r\n    const range = this.selection.getNativeRange();\r\n    // Link format will insert text outside of anchor tag\r\n    while (\r\n      this.domNode.lastChild != null &&\r\n      this.domNode.lastChild !== this.textNode\r\n    ) {\r\n      this.domNode.parentNode.insertBefore(\r\n        this.domNode.lastChild,\r\n        this.domNode,\r\n      );\r\n    }\r\n\r\n    const prevTextBlot = this.prev instanceof TextBlot ? this.prev : null;\r\n    const prevTextLength = prevTextBlot ? prevTextBlot.length() : 0;\r\n    const nextTextBlot = this.next instanceof TextBlot ? this.next : null;\r\n    const nextText = nextTextBlot ? nextTextBlot.text : '';\r\n    const { textNode } = this;\r\n    // take text from inside this blot and reset it\r\n    const newText = textNode.data.split(Cursor.CONTENTS).join('');\r\n    textNode.data = Cursor.CONTENTS;\r\n\r\n    // proactively merge TextBlots around cursor so that optimization\r\n    // doesn't lose the cursor.  the reason we are here in cursor.restore\r\n    // could be that the user clicked in prevTextBlot or nextTextBlot, or\r\n    // the user typed something.\r\n    let mergedTextBlot;\r\n    if (prevTextBlot) {\r\n      mergedTextBlot = prevTextBlot;\r\n      if (newText || nextTextBlot) {\r\n        prevTextBlot.insertAt(prevTextBlot.length(), newText + nextText);\r\n        if (nextTextBlot) {\r\n          nextTextBlot.remove();\r\n        }\r\n      }\r\n    } else if (nextTextBlot) {\r\n      mergedTextBlot = nextTextBlot;\r\n      nextTextBlot.insertAt(0, newText);\r\n    } else {\r\n      const newTextNode = document.createTextNode(newText);\r\n      mergedTextBlot = this.scroll.create(newTextNode);\r\n      this.parent.insertBefore(mergedTextBlot, this);\r\n    }\r\n\r\n    this.remove();\r\n    if (range) {\r\n      // calculate selection to restore\r\n      const remapOffset = (node, offset) => {\r\n        if (prevTextBlot && node === prevTextBlot.domNode) {\r\n          return offset;\r\n        }\r\n        if (node === textNode) {\r\n          return prevTextLength + offset - 1;\r\n        }\r\n        if (nextTextBlot && node === nextTextBlot.domNode) {\r\n          return prevTextLength + newText.length + offset;\r\n        }\r\n        return null;\r\n      };\r\n\r\n      const start = remapOffset(range.start.node, range.start.offset);\r\n      const end = remapOffset(range.end.node, range.end.offset);\r\n      if (start !== null && end !== null) {\r\n        return {\r\n          startNode: mergedTextBlot.domNode,\r\n          startOffset: start,\r\n          endNode: mergedTextBlot.domNode,\r\n          endOffset: end,\r\n        };\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  update(mutations, context) {\r\n    if (\r\n      mutations.some(mutation => {\r\n        return (\r\n          mutation.type === 'characterData' && mutation.target === this.textNode\r\n        );\r\n      })\r\n    ) {\r\n      const range = this.restore();\r\n      if (range) context.range = range;\r\n    }\r\n  }\r\n\r\n  value() {\r\n    return '';\r\n  }\r\n}\r\nCursor.blotName = 'cursor';\r\nCursor.className = 'ql-cursor';\r\nCursor.tagName = 'span';\r\nCursor.CONTENTS = '\\uFEFF'; // Zero width no break space\r\n\r\nexport default Cursor;\r\n","import { EmbedBlot } from 'parchment';\r\nimport TextBlot from './text';\r\n\r\nconst GUARD_TEXT = '\\uFEFF';\r\n\r\nclass Embed extends EmbedBlot {\r\n  constructor(scroll, node) {\r\n    super(scroll, node);\r\n    this.contentNode = document.createElement('span');\r\n    this.contentNode.setAttribute('contenteditable', false);\r\n    Array.from(this.domNode.childNodes).forEach(childNode => {\r\n      this.contentNode.appendChild(childNode);\r\n    });\r\n    this.leftGuard = document.createTextNode(GUARD_TEXT);\r\n    this.rightGuard = document.createTextNode(GUARD_TEXT);\r\n    this.domNode.appendChild(this.leftGuard);\r\n    this.domNode.appendChild(this.contentNode);\r\n    this.domNode.appendChild(this.rightGuard);\r\n  }\r\n\r\n  index(node, offset) {\r\n    if (node === this.leftGuard) return 0;\r\n    if (node === this.rightGuard) return 1;\r\n    return super.index(node, offset);\r\n  }\r\n\r\n  restore(node) {\r\n    let range;\r\n    let textNode;\r\n    const text = node.data.split(GUARD_TEXT).join('');\r\n    if (node === this.leftGuard) {\r\n      if (this.prev instanceof TextBlot) {\r\n        const prevLength = this.prev.length();\r\n        this.prev.insertAt(prevLength, text);\r\n        range = {\r\n          startNode: this.prev.domNode,\r\n          startOffset: prevLength + text.length,\r\n        };\r\n      } else {\r\n        textNode = document.createTextNode(text);\r\n        this.parent.insertBefore(this.scroll.create(textNode), this);\r\n        range = {\r\n          startNode: textNode,\r\n          startOffset: text.length,\r\n        };\r\n      }\r\n    } else if (node === this.rightGuard) {\r\n      if (this.next instanceof TextBlot) {\r\n        this.next.insertAt(0, text);\r\n        range = {\r\n          startNode: this.next.domNode,\r\n          startOffset: text.length,\r\n        };\r\n      } else {\r\n        textNode = document.createTextNode(text);\r\n        this.parent.insertBefore(this.scroll.create(textNode), this.next);\r\n        range = {\r\n          startNode: textNode,\r\n          startOffset: text.length,\r\n        };\r\n      }\r\n    }\r\n    node.data = GUARD_TEXT;\r\n    return range;\r\n  }\r\n\r\n  update(mutations, context) {\r\n    mutations.forEach(mutation => {\r\n      if (\r\n        mutation.type === 'characterData' &&\r\n        (mutation.target === this.leftGuard ||\r\n          mutation.target === this.rightGuard)\r\n      ) {\r\n        const range = this.restore(mutation.target);\r\n        if (range) context.range = range;\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport default Embed;\r\n","import { EmbedBlot, InlineBlot, Scope } from 'parchment';\r\nimport Break from './break';\r\nimport Text from './text';\r\n\r\nclass Inline extends InlineBlot {\r\n  static compare(self, other) {\r\n    const selfIndex = Inline.order.indexOf(self);\r\n    const otherIndex = Inline.order.indexOf(other);\r\n    if (selfIndex >= 0 || otherIndex >= 0) {\r\n      return selfIndex - otherIndex;\r\n    }\r\n    if (self === other) {\r\n      return 0;\r\n    }\r\n    if (self < other) {\r\n      return -1;\r\n    }\r\n    return 1;\r\n  }\r\n\r\n  formatAt(index, length, name, value) {\r\n    if (\r\n      Inline.compare(this.statics.blotName, name) < 0 &&\r\n      this.scroll.query(name, Scope.BLOT)\r\n    ) {\r\n      const blot = this.isolate(index, length);\r\n      if (value) {\r\n        blot.wrap(name, value);\r\n      }\r\n    } else {\r\n      super.formatAt(index, length, name, value);\r\n    }\r\n  }\r\n\r\n  optimize(context) {\r\n    super.optimize(context);\r\n    if (\r\n      this.parent instanceof Inline &&\r\n      Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0\r\n    ) {\r\n      const parent = this.parent.isolate(this.offset(), this.length());\r\n      this.moveChildren(parent);\r\n      parent.wrap(this);\r\n    }\r\n  }\r\n}\r\nInline.allowedChildren = [Inline, Break, EmbedBlot, Text];\r\n// Lower index means deeper in the DOM tree, since not found (-1) is for embeds\r\nInline.order = [\r\n  'cursor',\r\n  'inline', // Must be lower\r\n  'underline',\r\n  'strike',\r\n  'italic',\r\n  'bold',\r\n  'script',\r\n  'link',\r\n  'code', // Must be higher\r\n];\r\n\r\nexport default Inline;\r\n","import { Scope, ScrollBlot, ContainerBlot } from 'parchment';\r\nimport Emitter from '../core/emitter';\r\nimport Block, { BlockEmbed } from './block';\r\nimport Break from './break';\r\nimport Container from './container';\r\n\r\nfunction isLine(blot) {\r\n  return blot instanceof Block || blot instanceof BlockEmbed;\r\n}\r\n\r\nclass Scroll extends ScrollBlot {\r\n  constructor(registry, domNode, { emitter }) {\r\n    super(registry, domNode);\r\n    this.emitter = emitter;\r\n    this.batch = false;\r\n    this.optimize();\r\n    this.enable();\r\n    this.domNode.addEventListener('dragstart', e => this.handleDragStart(e));\r\n  }\r\n\r\n  batchStart() {\r\n    if (!Array.isArray(this.batch)) {\r\n      this.batch = [];\r\n    }\r\n  }\r\n\r\n  batchEnd() {\r\n    const mutations = this.batch;\r\n    this.batch = false;\r\n    this.update(mutations);\r\n  }\r\n\r\n  emitMount(blot) {\r\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_MOUNT, blot);\r\n  }\r\n\r\n  emitUnmount(blot) {\r\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_UNMOUNT, blot);\r\n  }\r\n\r\n  deleteAt(index, length) {\r\n    const [first, offset] = this.line(index);\r\n    const [last] = this.line(index + length);\r\n    super.deleteAt(index, length);\r\n    if (last != null && first !== last && offset > 0) {\r\n      if (first instanceof BlockEmbed || last instanceof BlockEmbed) {\r\n        this.optimize();\r\n        return;\r\n      }\r\n      const ref =\r\n        last.children.head instanceof Break ? null : last.children.head;\r\n      first.moveChildren(last, ref);\r\n      first.remove();\r\n    }\r\n    this.optimize();\r\n  }\r\n\r\n  enable(enabled = true) {\r\n    this.domNode.setAttribute('contenteditable', enabled);\r\n  }\r\n\r\n  formatAt(index, length, format, value) {\r\n    super.formatAt(index, length, format, value);\r\n    this.optimize();\r\n  }\r\n\r\n  handleDragStart(event) {\r\n    event.preventDefault();\r\n  }\r\n\r\n  insertAt(index, value, def) {\r\n    if (index >= this.length()) {\r\n      if (def == null || this.scroll.query(value, Scope.BLOCK) == null) {\r\n        const blot = this.scroll.create(this.statics.defaultChild.blotName);\r\n        this.appendChild(blot);\r\n        if (def == null && value.endsWith('\\n')) {\r\n          blot.insertAt(0, value.slice(0, -1), def);\r\n        } else {\r\n          blot.insertAt(0, value, def);\r\n        }\r\n      } else {\r\n        const embed = this.scroll.create(value, def);\r\n        this.appendChild(embed);\r\n      }\r\n    } else {\r\n      super.insertAt(index, value, def);\r\n    }\r\n    this.optimize();\r\n  }\r\n\r\n  insertBefore(blot, ref) {\r\n    if (blot.statics.scope === Scope.INLINE_BLOT) {\r\n      const wrapper = this.scroll.create(this.statics.defaultChild.blotName);\r\n      wrapper.appendChild(blot);\r\n      super.insertBefore(wrapper, ref);\r\n    } else {\r\n      super.insertBefore(blot, ref);\r\n    }\r\n  }\r\n\r\n  isEnabled() {\r\n    return this.domNode.getAttribute('contenteditable') === 'true';\r\n  }\r\n\r\n  leaf(index) {\r\n    return this.path(index).pop() || [null, -1];\r\n  }\r\n\r\n  line(index) {\r\n    if (index === this.length()) {\r\n      return this.line(index - 1);\r\n    }\r\n    return this.descendant(isLine, index);\r\n  }\r\n\r\n  lines(index = 0, length = Number.MAX_VALUE) {\r\n    const getLines = (blot, blotIndex, blotLength) => {\r\n      let lines = [];\r\n      let lengthLeft = blotLength;\r\n      blot.children.forEachAt(\r\n        blotIndex,\r\n        blotLength,\r\n        (child, childIndex, childLength) => {\r\n          if (isLine(child)) {\r\n            lines.push(child);\r\n          } else if (child instanceof ContainerBlot) {\r\n            lines = lines.concat(getLines(child, childIndex, lengthLeft));\r\n          }\r\n          lengthLeft -= childLength;\r\n        },\r\n      );\r\n      return lines;\r\n    };\r\n    return getLines(this, index, length);\r\n  }\r\n\r\n  optimize(mutations = [], context = {}) {\r\n    if (this.batch) return;\r\n    super.optimize(mutations, context);\r\n    if (mutations.length > 0) {\r\n      this.emitter.emit(Emitter.events.SCROLL_OPTIMIZE, mutations, context);\r\n    }\r\n  }\r\n\r\n  path(index) {\r\n    return super.path(index).slice(1); // Exclude self\r\n  }\r\n\r\n  remove() {\r\n    // Never remove self\r\n  }\r\n\r\n  update(mutations) {\r\n    if (this.batch) {\r\n      if (Array.isArray(mutations)) {\r\n        this.batch = this.batch.concat(mutations);\r\n      }\r\n      return;\r\n    }\r\n    let source = Emitter.sources.USER;\r\n    if (typeof mutations === 'string') {\r\n      source = mutations;\r\n    }\r\n    if (!Array.isArray(mutations)) {\r\n      mutations = this.observer.takeRecords();\r\n    }\r\n    if (mutations.length > 0) {\r\n      this.emitter.emit(Emitter.events.SCROLL_BEFORE_UPDATE, source, mutations);\r\n    }\r\n    super.update(mutations.concat([])); // pass copy\r\n    if (mutations.length > 0) {\r\n      this.emitter.emit(Emitter.events.SCROLL_UPDATE, source, mutations);\r\n    }\r\n  }\r\n}\r\nScroll.blotName = 'scroll';\r\nScroll.className = 'ql-editor';\r\nScroll.tagName = 'DIV';\r\nScroll.defaultChild = Block;\r\nScroll.allowedChildren = [Block, BlockEmbed, Container];\r\n\r\nexport default Scroll;\r\n","import { TextBlot } from 'parchment';\r\n\r\nclass Text extends TextBlot {}\r\n\r\nfunction escapeText(text) {\r\n  return text.replace(/[&<>\"']/g, s => {\r\n    // https://lodash.com/docs#escape\r\n    const entityMap = {\r\n      '&': '&amp;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '\"': '&quot;',\r\n      \"'\": '&#39;',\r\n    };\r\n    return entityMap[s];\r\n  });\r\n}\r\n\r\nexport { Text as default, escapeText };\r\n","import Quill from './core/quill';\r\n\r\nimport Block, { BlockEmbed } from './blots/block';\r\nimport Break from './blots/break';\r\nimport Container from './blots/container';\r\nimport Cursor from './blots/cursor';\r\nimport Embed from './blots/embed';\r\nimport Inline from './blots/inline';\r\nimport Scroll from './blots/scroll';\r\nimport TextBlot from './blots/text';\r\n\r\nimport Clipboard from './modules/clipboard';\r\nimport History from './modules/history';\r\nimport Keyboard from './modules/keyboard';\r\nimport Uploader from './modules/uploader';\r\n\r\nQuill.register({\r\n  'blots/block': Block,\r\n  'blots/block/embed': BlockEmbed,\r\n  'blots/break': Break,\r\n  'blots/container': Container,\r\n  'blots/cursor': Cursor,\r\n  'blots/embed': Embed,\r\n  'blots/inline': Inline,\r\n  'blots/scroll': Scroll,\r\n  'blots/text': TextBlot,\r\n\r\n  'modules/clipboard': Clipboard,\r\n  'modules/history': History,\r\n  'modules/keyboard': Keyboard,\r\n  'modules/uploader': Uploader,\r\n});\r\n\r\nexport default Quill;\r\n","import clone from 'clone';\r\nimport equal from 'deep-equal';\r\nimport extend from 'extend';\r\nimport Delta, { AttributeMap } from 'quill-delta';\r\nimport { LeafBlot } from 'parchment';\r\nimport { Range } from './selection';\r\nimport CursorBlot from '../blots/cursor';\r\nimport Block, { BlockEmbed, bubbleFormats } from '../blots/block';\r\nimport Break from '../blots/break';\r\nimport TextBlot, { escapeText } from '../blots/text';\r\n\r\nconst ASCII = /^[ -~]*$/;\r\n\r\nclass Editor {\r\n  constructor(scroll) {\r\n    this.scroll = scroll;\r\n    this.delta = this.getDelta();\r\n  }\r\n\r\n  applyDelta(delta) {\r\n    let consumeNextNewline = false;\r\n    this.scroll.update();\r\n    let scrollLength = this.scroll.length();\r\n    this.scroll.batchStart();\r\n    const normalizedDelta = normalizeDelta(delta);\r\n    normalizedDelta.reduce((index, op) => {\r\n      const length = op.retain || op.delete || op.insert.length || 1;\r\n      let attributes = op.attributes || {};\r\n      if (op.insert != null) {\r\n        if (typeof op.insert === 'string') {\r\n          let text = op.insert;\r\n          if (text.endsWith('\\n') && consumeNextNewline) {\r\n            consumeNextNewline = false;\r\n            text = text.slice(0, -1);\r\n          }\r\n          if (\r\n            (index >= scrollLength ||\r\n              this.scroll.descendant(BlockEmbed, index)[0]) &&\r\n            !text.endsWith('\\n')\r\n          ) {\r\n            consumeNextNewline = true;\r\n          }\r\n          this.scroll.insertAt(index, text);\r\n          const [line, offset] = this.scroll.line(index);\r\n          let formats = extend({}, bubbleFormats(line));\r\n          if (line instanceof Block) {\r\n            const [leaf] = line.descendant(LeafBlot, offset);\r\n            formats = extend(formats, bubbleFormats(leaf));\r\n          }\r\n          attributes = AttributeMap.diff(formats, attributes) || {};\r\n        } else if (typeof op.insert === 'object') {\r\n          const key = Object.keys(op.insert)[0]; // There should only be one key\r\n          if (key == null) return index;\r\n          this.scroll.insertAt(index, key, op.insert[key]);\r\n        }\r\n        scrollLength += length;\r\n      }\r\n      Object.keys(attributes).forEach(name => {\r\n        this.scroll.formatAt(index, length, name, attributes[name]);\r\n      });\r\n      return index + length;\r\n    }, 0);\r\n    normalizedDelta.reduce((index, op) => {\r\n      if (typeof op.delete === 'number') {\r\n        this.scroll.deleteAt(index, op.delete);\r\n        return index;\r\n      }\r\n      return index + (op.retain || op.insert.length || 1);\r\n    }, 0);\r\n    this.scroll.batchEnd();\r\n    this.scroll.optimize();\r\n    return this.update(normalizedDelta);\r\n  }\r\n\r\n  deleteText(index, length) {\r\n    this.scroll.deleteAt(index, length);\r\n    return this.update(new Delta().retain(index).delete(length));\r\n  }\r\n\r\n  formatLine(index, length, formats = {}) {\r\n    this.scroll.update();\r\n    Object.keys(formats).forEach(format => {\r\n      this.scroll.lines(index, Math.max(length, 1)).forEach(line => {\r\n        line.format(format, formats[format]);\r\n      });\r\n    });\r\n    this.scroll.optimize();\r\n    const delta = new Delta().retain(index).retain(length, clone(formats));\r\n    return this.update(delta);\r\n  }\r\n\r\n  formatText(index, length, formats = {}) {\r\n    Object.keys(formats).forEach(format => {\r\n      this.scroll.formatAt(index, length, format, formats[format]);\r\n    });\r\n    const delta = new Delta().retain(index).retain(length, clone(formats));\r\n    return this.update(delta);\r\n  }\r\n\r\n  getContents(index, length) {\r\n    return this.delta.slice(index, index + length);\r\n  }\r\n\r\n  getDelta() {\r\n    return this.scroll.lines().reduce((delta, line) => {\r\n      return delta.concat(line.delta());\r\n    }, new Delta());\r\n  }\r\n\r\n  getFormat(index, length = 0) {\r\n    let lines = [];\r\n    let leaves = [];\r\n    if (length === 0) {\r\n      this.scroll.path(index).forEach(path => {\r\n        const [blot] = path;\r\n        if (blot instanceof Block) {\r\n          lines.push(blot);\r\n        } else if (blot instanceof LeafBlot) {\r\n          leaves.push(blot);\r\n        }\r\n      });\r\n    } else {\r\n      lines = this.scroll.lines(index, length);\r\n      leaves = this.scroll.descendants(LeafBlot, index, length);\r\n    }\r\n    const formatsArr = [lines, leaves].map(blots => {\r\n      if (blots.length === 0) return {};\r\n      let formats = bubbleFormats(blots.shift());\r\n      while (Object.keys(formats).length > 0) {\r\n        const blot = blots.shift();\r\n        if (blot == null) return formats;\r\n        formats = combineFormats(bubbleFormats(blot), formats);\r\n      }\r\n      return formats;\r\n    });\r\n    return extend.apply(extend, formatsArr);\r\n  }\r\n\r\n  getHTML(index, length) {\r\n    const [line, lineOffset] = this.scroll.line(index);\r\n    if (line.length() >= lineOffset + length) {\r\n      return convertHTML(line, lineOffset, length, true);\r\n    }\r\n    return convertHTML(this.scroll, index, length, true);\r\n  }\r\n\r\n  getText(index, length) {\r\n    return this.getContents(index, length)\r\n      .filter(op => typeof op.insert === 'string')\r\n      .map(op => op.insert)\r\n      .join('');\r\n  }\r\n\r\n  insertEmbed(index, embed, value) {\r\n    this.scroll.insertAt(index, embed, value);\r\n    return this.update(new Delta().retain(index).insert({ [embed]: value }));\r\n  }\r\n\r\n  insertText(index, text, formats = {}) {\r\n    text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\r\n    this.scroll.insertAt(index, text);\r\n    Object.keys(formats).forEach(format => {\r\n      this.scroll.formatAt(index, text.length, format, formats[format]);\r\n    });\r\n    return this.update(new Delta().retain(index).insert(text, clone(formats)));\r\n  }\r\n\r\n  isBlank() {\r\n    if (this.scroll.children.length === 0) return true;\r\n    if (this.scroll.children.length > 1) return false;\r\n    const block = this.scroll.children.head;\r\n    if (block.statics.blotName !== Block.blotName) return false;\r\n    if (block.children.length > 1) return false;\r\n    return block.children.head instanceof Break;\r\n  }\r\n\r\n  removeFormat(index, length) {\r\n    const text = this.getText(index, length);\r\n    const [line, offset] = this.scroll.line(index + length);\r\n    let suffixLength = 0;\r\n    let suffix = new Delta();\r\n    if (line != null) {\r\n      suffixLength = line.length() - offset;\r\n      suffix = line\r\n        .delta()\r\n        .slice(offset, offset + suffixLength - 1)\r\n        .insert('\\n');\r\n    }\r\n    const contents = this.getContents(index, length + suffixLength);\r\n    const diff = contents.diff(new Delta().insert(text).concat(suffix));\r\n    const delta = new Delta().retain(index).concat(diff);\r\n    return this.applyDelta(delta);\r\n  }\r\n\r\n  update(change, mutations = [], selectionInfo = undefined) {\r\n    const oldDelta = this.delta;\r\n    if (\r\n      mutations.length === 1 &&\r\n      mutations[0].type === 'characterData' &&\r\n      mutations[0].target.data.match(ASCII) &&\r\n      this.scroll.find(mutations[0].target)\r\n    ) {\r\n      // Optimization for character changes\r\n      const textBlot = this.scroll.find(mutations[0].target);\r\n      const formats = bubbleFormats(textBlot);\r\n      const index = textBlot.offset(this.scroll);\r\n      const oldValue = mutations[0].oldValue.replace(CursorBlot.CONTENTS, '');\r\n      const oldText = new Delta().insert(oldValue);\r\n      const newText = new Delta().insert(textBlot.value());\r\n      const relativeSelectionInfo = selectionInfo && {\r\n        oldRange: shiftRange(selectionInfo.oldRange, -index),\r\n        newRange: shiftRange(selectionInfo.newRange, -index),\r\n      };\r\n      const diffDelta = new Delta()\r\n        .retain(index)\r\n        .concat(oldText.diff(newText, relativeSelectionInfo));\r\n      change = diffDelta.reduce((delta, op) => {\r\n        if (op.insert) {\r\n          return delta.insert(op.insert, formats);\r\n        }\r\n        return delta.push(op);\r\n      }, new Delta());\r\n      this.delta = oldDelta.compose(change);\r\n    } else {\r\n      this.delta = this.getDelta();\r\n      if (!change || !equal(oldDelta.compose(change), this.delta)) {\r\n        change = oldDelta.diff(this.delta, selectionInfo);\r\n      }\r\n    }\r\n    return change;\r\n  }\r\n}\r\n\r\nfunction convertListHTML(items, lastIndent, types) {\r\n  if (items.length === 0) {\r\n    const [endTag] = getListType(types.pop());\r\n    if (lastIndent <= 0) {\r\n      return `</li></${endTag}>`;\r\n    }\r\n    return `</li></${endTag}>${convertListHTML([], lastIndent - 1, types)}`;\r\n  }\r\n  const [{ child, offset, length, indent, type }, ...rest] = items;\r\n  const [tag, attribute] = getListType(type);\r\n  if (indent > lastIndent) {\r\n    types.push(type);\r\n    if (indent === lastIndent + 1) {\r\n      return `<${tag}><li${attribute}>${convertHTML(\r\n        child,\r\n        offset,\r\n        length,\r\n      )}${convertListHTML(rest, indent, types)}`;\r\n    }\r\n    return `<${tag}><li>${convertListHTML(items, lastIndent + 1, types)}`;\r\n  }\r\n  const previousType = types[types.length - 1];\r\n  if (indent === lastIndent && type === previousType) {\r\n    return `</li><li${attribute}>${convertHTML(\r\n      child,\r\n      offset,\r\n      length,\r\n    )}${convertListHTML(rest, indent, types)}`;\r\n  }\r\n  const [endTag] = getListType(types.pop());\r\n  return `</li></${endTag}>${convertListHTML(items, lastIndent - 1, types)}`;\r\n}\r\n\r\nfunction convertHTML(blot, index, length, isRoot = false) {\r\n  if (typeof blot.html === 'function') {\r\n    return blot.html(index, length);\r\n  }\r\n  if (blot instanceof TextBlot) {\r\n    return escapeText(blot.value().slice(index, index + length));\r\n  }\r\n  if (blot.children) {\r\n    // TODO fix API\r\n    if (blot.statics.blotName === 'list-container') {\r\n      const items = [];\r\n      blot.children.forEachAt(index, length, (child, offset, childLength) => {\r\n        const formats = child.formats();\r\n        items.push({\r\n          child,\r\n          offset,\r\n          length: childLength,\r\n          indent: formats.indent || 0,\r\n          type: formats.list,\r\n        });\r\n      });\r\n      return convertListHTML(items, -1, []);\r\n    }\r\n    const parts = [];\r\n    blot.children.forEachAt(index, length, (child, offset, childLength) => {\r\n      parts.push(convertHTML(child, offset, childLength));\r\n    });\r\n    if (isRoot || blot.statics.blotName === 'list') {\r\n      return parts.join('');\r\n    }\r\n    const { outerHTML, innerHTML } = blot.domNode;\r\n    const [start, end] = outerHTML.split(`>${innerHTML}<`);\r\n    // TODO cleanup\r\n    if (start === '<table') {\r\n      return `<table style=\"border: 1px solid #000;\">${parts.join('')}<${end}`;\r\n    }\r\n    return `${start}>${parts.join('')}<${end}`;\r\n  }\r\n  return blot.domNode.outerHTML;\r\n}\r\n\r\nfunction combineFormats(formats, combined) {\r\n  return Object.keys(combined).reduce((merged, name) => {\r\n    if (formats[name] == null) return merged;\r\n    if (combined[name] === formats[name]) {\r\n      merged[name] = combined[name];\r\n    } else if (Array.isArray(combined[name])) {\r\n      if (combined[name].indexOf(formats[name]) < 0) {\r\n        merged[name] = combined[name].concat([formats[name]]);\r\n      }\r\n    } else {\r\n      merged[name] = [combined[name], formats[name]];\r\n    }\r\n    return merged;\r\n  }, {});\r\n}\r\n\r\nfunction getListType(type) {\r\n  const tag = type === 'ordered' ? 'ol' : 'ul';\r\n  switch (type) {\r\n    case 'checked':\r\n      return [tag, ' data-list=\"checked\"'];\r\n    case 'unchecked':\r\n      return [tag, ' data-list=\"unchecked\"'];\r\n    default:\r\n      return [tag, ''];\r\n  }\r\n}\r\n\r\nfunction normalizeDelta(delta) {\r\n  return delta.reduce((normalizedDelta, op) => {\r\n    if (typeof op.insert === 'string') {\r\n      const text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\r\n      return normalizedDelta.insert(text, op.attributes);\r\n    }\r\n    return normalizedDelta.push(op);\r\n  }, new Delta());\r\n}\r\n\r\nfunction shiftRange({ index, length }, amount) {\r\n  return new Range(index + amount, length);\r\n}\r\n\r\nexport default Editor;\r\n","import EventEmitter from 'eventemitter3';\r\nimport instances from './instances';\r\nimport logger from './logger';\r\n\r\nconst debug = logger('quill:events');\r\nconst EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\r\n\r\nEVENTS.forEach(eventName => {\r\n  document.addEventListener(eventName, (...args) => {\r\n    Array.from(document.querySelectorAll('.ql-container')).forEach(node => {\r\n      const quill = instances.get(node);\r\n      if (quill && quill.emitter) {\r\n        quill.emitter.handleDOM(...args);\r\n      }\r\n    });\r\n  });\r\n});\r\n\r\nclass Emitter extends EventEmitter {\r\n  constructor() {\r\n    super();\r\n    this.listeners = {};\r\n    this.on('error', debug.error);\r\n  }\r\n\r\n  emit(...args) {\r\n    debug.log.call(debug, ...args);\r\n    super.emit(...args);\r\n  }\r\n\r\n  handleDOM(event, ...args) {\r\n    (this.listeners[event.type] || []).forEach(({ node, handler }) => {\r\n      if (event.target === node || node.contains(event.target)) {\r\n        handler(event, ...args);\r\n      }\r\n    });\r\n  }\r\n\r\n  listenDOM(eventName, node, handler) {\r\n    if (!this.listeners[eventName]) {\r\n      this.listeners[eventName] = [];\r\n    }\r\n    this.listeners[eventName].push({ node, handler });\r\n  }\r\n}\r\n\r\nEmitter.events = {\r\n  EDITOR_CHANGE: 'editor-change',\r\n  SCROLL_BEFORE_UPDATE: 'scroll-before-update',\r\n  SCROLL_BLOT_MOUNT: 'scroll-blot-mount',\r\n  SCROLL_BLOT_UNMOUNT: 'scroll-blot-unmount',\r\n  SCROLL_OPTIMIZE: 'scroll-optimize',\r\n  SCROLL_UPDATE: 'scroll-update',\r\n  SELECTION_CHANGE: 'selection-change',\r\n  TEXT_CHANGE: 'text-change',\r\n};\r\nEmitter.sources = {\r\n  API: 'api',\r\n  SILENT: 'silent',\r\n  USER: 'user',\r\n};\r\n\r\nexport default Emitter;\r\n","export default new WeakMap();\r\n","const levels = ['error', 'warn', 'log', 'info'];\r\nlet level = 'warn';\r\n\r\nfunction debug(method, ...args) {\r\n  if (levels.indexOf(method) <= levels.indexOf(level)) {\r\n    console[method](...args); // eslint-disable-line no-console\r\n  }\r\n}\r\n\r\nfunction namespace(ns) {\r\n  return levels.reduce((logger, method) => {\r\n    logger[method] = debug.bind(console, method, ns);\r\n    return logger;\r\n  }, {});\r\n}\r\n\r\nnamespace.level = newLevel => {\r\n  level = newLevel;\r\n};\r\ndebug.level = namespace.level;\r\n\r\nexport default namespace;\r\n","class Module {\r\n  constructor(quill, options = {}) {\r\n    this.quill = quill;\r\n    this.options = options;\r\n  }\r\n}\r\nModule.DEFAULTS = {};\r\n\r\nexport default Module;\r\n","import Delta from 'quill-delta';\r\nimport * as Parchment from 'parchment';\r\nimport extend from 'extend';\r\nimport Editor from './editor';\r\nimport Emitter from './emitter';\r\nimport Module from './module';\r\nimport Selection, { Range } from './selection';\r\nimport instances from './instances';\r\nimport logger from './logger';\r\nimport Theme from './theme';\r\n\r\nconst debug = logger('quill');\r\n\r\nconst globalRegistry = new Parchment.Registry();\r\nParchment.ParentBlot.uiClass = 'ql-ui';\r\n\r\nclass Quill {\r\n  static debug(limit) {\r\n    if (limit === true) {\r\n      limit = 'log';\r\n    }\r\n    logger.level(limit);\r\n  }\r\n\r\n  static find(node) {\r\n    return instances.get(node) || globalRegistry.find(node);\r\n  }\r\n\r\n  static import(name) {\r\n    if (this.imports[name] == null) {\r\n      debug.error(`Cannot import ${name}. Are you sure it was registered?`);\r\n    }\r\n    return this.imports[name];\r\n  }\r\n\r\n  static register(path, target, overwrite = false) {\r\n    if (typeof path !== 'string') {\r\n      const name = path.attrName || path.blotName;\r\n      if (typeof name === 'string') {\r\n        // register(Blot | Attributor, overwrite)\r\n        this.register(`formats/${name}`, path, target);\r\n      } else {\r\n        Object.keys(path).forEach(key => {\r\n          this.register(key, path[key], target);\r\n        });\r\n      }\r\n    } else {\r\n      if (this.imports[path] != null && !overwrite) {\r\n        debug.warn(`Overwriting ${path} with`, target);\r\n      }\r\n      this.imports[path] = target;\r\n      if (\r\n        (path.startsWith('blots/') || path.startsWith('formats/')) &&\r\n        target.blotName !== 'abstract'\r\n      ) {\r\n        globalRegistry.register(target);\r\n      }\r\n      if (typeof target.register === 'function') {\r\n        target.register(globalRegistry);\r\n      }\r\n    }\r\n  }\r\n\r\n  constructor(container, options = {}) {\r\n    //配置选项\r\n    this.options = expandConfig(container, options);\r\n    //返回根节点\r\n    this.container = this.options.container;\r\n    if (this.container == null) {\r\n      return debug.error('Invalid Quill container', container);\r\n    }\r\n    if (this.options.debug) {\r\n      Quill.debug(this.options.debug);\r\n    }\r\n    //缓存html\r\n    const html = this.container.innerHTML.trim();\r\n    this.container.classList.add('ql-container');\r\n    this.container.innerHTML = '';\r\n    //\r\n    instances.set(this.container, this);\r\n    //根节点下添加子节点\r\n    this.root = this.addContainer('ql-editor');\r\n    this.root.classList.add('ql-blank');\r\n    this.root.setAttribute('data-gramm', false);\r\n\r\n    //\r\n    this.scrollingContainer = this.options.scrollingContainer || this.root;\r\n    //事件触发器\r\n    this.emitter = new Emitter();\r\n\r\n    const ScrollBlot = this.options.registry.query(\r\n      Parchment.ScrollBlot.blotName,\r\n    );\r\n    console.log(ScrollBlot)\r\n    this.scroll = new ScrollBlot(this.options.registry, this.root, {\r\n      emitter: this.emitter,\r\n    });\r\n    this.editor = new Editor(this.scroll);\r\n    this.selection = new Selection(this.scroll, this.emitter);\r\n    this.theme = new this.options.theme(this, this.options); // eslint-disable-line new-cap\r\n    this.keyboard = this.theme.addModule('keyboard');\r\n    this.clipboard = this.theme.addModule('clipboard');\r\n    this.history = this.theme.addModule('history');\r\n    this.uploader = this.theme.addModule('uploader');\r\n    this.theme.init();\r\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, type => {\r\n      if (type === Emitter.events.TEXT_CHANGE) {\r\n        this.root.classList.toggle('ql-blank', this.editor.isBlank());\r\n      }\r\n    });\r\n    this.emitter.on(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\r\n      const oldRange = this.selection.lastRange;\r\n      const [newRange] = this.selection.getRange();\r\n      const selectionInfo =\r\n        oldRange && newRange ? { oldRange, newRange } : undefined;\r\n      modify.call(\r\n        this,\r\n        () => this.editor.update(null, mutations, selectionInfo),\r\n        source,\r\n      );\r\n    });\r\n    const contents = this.clipboard.convert({\r\n      html: `${html}<p><br></p>`,\r\n      text: '\\n',\r\n    });\r\n    this.setContents(contents);\r\n    this.history.clear();\r\n    if (this.options.placeholder) {\r\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\r\n    }\r\n    if (this.options.readOnly) {\r\n      this.disable();\r\n    }\r\n    this.allowReadOnlyEdits = false;\r\n  }\r\n\r\n  addContainer(container, refNode = null) {\r\n    if (typeof container === 'string') {\r\n      const className = container;\r\n      container = document.createElement('div');\r\n      container.classList.add(className);\r\n    }\r\n    this.container.insertBefore(container, refNode);\r\n    return container;\r\n  }\r\n\r\n  blur() {\r\n    this.selection.setRange(null);\r\n  }\r\n\r\n  deleteText(index, length, source) {\r\n    [index, length, , source] = overload(index, length, source);\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        return this.editor.deleteText(index, length);\r\n      },\r\n      source,\r\n      index,\r\n      -1 * length,\r\n    );\r\n  }\r\n\r\n  disable() {\r\n    this.enable(false);\r\n  }\r\n\r\n  editReadOnly(modifier) {\r\n    this.allowReadOnlyEdits = true;\r\n    const value = modifier();\r\n    this.allowReadOnlyEdits = false;\r\n    return value;\r\n  }\r\n\r\n  enable(enabled = true) {\r\n    this.scroll.enable(enabled);\r\n    this.container.classList.toggle('ql-disabled', !enabled);\r\n  }\r\n\r\n  focus() {\r\n    const { scrollTop } = this.scrollingContainer;\r\n    this.selection.focus();\r\n    this.scrollingContainer.scrollTop = scrollTop;\r\n    this.scrollIntoView();\r\n  }\r\n\r\n  format(name, value, source = Emitter.sources.API) {\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        const range = this.getSelection(true);\r\n        let change = new Delta();\r\n        if (range == null) return change;\r\n        if (this.scroll.query(name, Parchment.Scope.BLOCK)) {\r\n          change = this.editor.formatLine(range.index, range.length, {\r\n            [name]: value,\r\n          });\r\n        } else if (range.length === 0) {\r\n          this.selection.format(name, value);\r\n          return change;\r\n        } else {\r\n          change = this.editor.formatText(range.index, range.length, {\r\n            [name]: value,\r\n          });\r\n        }\r\n        this.setSelection(range, Emitter.sources.SILENT);\r\n        return change;\r\n      },\r\n      source,\r\n    );\r\n  }\r\n\r\n  formatLine(index, length, name, value, source) {\r\n    let formats;\r\n    // eslint-disable-next-line prefer-const\r\n    [index, length, formats, source] = overload(\r\n      index,\r\n      length,\r\n      name,\r\n      value,\r\n      source,\r\n    );\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        return this.editor.formatLine(index, length, formats);\r\n      },\r\n      source,\r\n      index,\r\n      0,\r\n    );\r\n  }\r\n\r\n  formatText(index, length, name, value, source) {\r\n    let formats;\r\n    // eslint-disable-next-line prefer-const\r\n    [index, length, formats, source] = overload(\r\n      index,\r\n      length,\r\n      name,\r\n      value,\r\n      source,\r\n    );\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        return this.editor.formatText(index, length, formats);\r\n      },\r\n      source,\r\n      index,\r\n      0,\r\n    );\r\n  }\r\n\r\n  getBounds(index, length = 0) {\r\n    let bounds;\r\n    if (typeof index === 'number') {\r\n      bounds = this.selection.getBounds(index, length);\r\n    } else {\r\n      bounds = this.selection.getBounds(index.index, index.length);\r\n    }\r\n    const containerBounds = this.container.getBoundingClientRect();\r\n    return {\r\n      bottom: bounds.bottom - containerBounds.top,\r\n      height: bounds.height,\r\n      left: bounds.left - containerBounds.left,\r\n      right: bounds.right - containerBounds.left,\r\n      top: bounds.top - containerBounds.top,\r\n      width: bounds.width,\r\n    };\r\n  }\r\n\r\n  getContents(index = 0, length = this.getLength() - index) {\r\n    [index, length] = overload(index, length);\r\n    return this.editor.getContents(index, length);\r\n  }\r\n\r\n  getFormat(index = this.getSelection(true), length = 0) {\r\n    if (typeof index === 'number') {\r\n      return this.editor.getFormat(index, length);\r\n    }\r\n    return this.editor.getFormat(index.index, index.length);\r\n  }\r\n\r\n  getIndex(blot) {\r\n    return blot.offset(this.scroll);\r\n  }\r\n\r\n  getLength() {\r\n    return this.scroll.length();\r\n  }\r\n\r\n  getLeaf(index) {\r\n    return this.scroll.leaf(index);\r\n  }\r\n\r\n  getLine(index) {\r\n    return this.scroll.line(index);\r\n  }\r\n\r\n  getLines(index = 0, length = Number.MAX_VALUE) {\r\n    if (typeof index !== 'number') {\r\n      return this.scroll.lines(index.index, index.length);\r\n    }\r\n    return this.scroll.lines(index, length);\r\n  }\r\n\r\n  getModule(name) {\r\n    return this.theme.modules[name];\r\n  }\r\n\r\n  getSelection(focus = false) {\r\n    if (focus) this.focus();\r\n    this.update(); // Make sure we access getRange with editor in consistent state\r\n    return this.selection.getRange()[0];\r\n  }\r\n\r\n  getSemanticHTML(index = 0, length = this.getLength() - index) {\r\n    [index, length] = overload(index, length);\r\n    return this.editor.getHTML(index, length);\r\n  }\r\n\r\n  getText(index = 0, length = this.getLength() - index) {\r\n    [index, length] = overload(index, length);\r\n    return this.editor.getText(index, length);\r\n  }\r\n\r\n  hasFocus() {\r\n    return this.selection.hasFocus();\r\n  }\r\n\r\n  insertEmbed(index, embed, value, source = Quill.sources.API) {\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        return this.editor.insertEmbed(index, embed, value);\r\n      },\r\n      source,\r\n      index,\r\n    );\r\n  }\r\n\r\n  insertText(index, text, name, value, source) {\r\n    let formats;\r\n    // eslint-disable-next-line prefer-const\r\n    [index, , formats, source] = overload(index, 0, name, value, source);\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        return this.editor.insertText(index, text, formats);\r\n      },\r\n      source,\r\n      index,\r\n      text.length,\r\n    );\r\n  }\r\n\r\n  isEnabled() {\r\n    return this.scroll.isEnabled();\r\n  }\r\n\r\n  off(...args) {\r\n    return this.emitter.off(...args);\r\n  }\r\n\r\n  on(...args) {\r\n    return this.emitter.on(...args);\r\n  }\r\n\r\n  once(...args) {\r\n    return this.emitter.once(...args);\r\n  }\r\n\r\n  removeFormat(index, length, source) {\r\n    [index, length, , source] = overload(index, length, source);\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        return this.editor.removeFormat(index, length);\r\n      },\r\n      source,\r\n      index,\r\n    );\r\n  }\r\n\r\n  scrollIntoView() {\r\n    this.selection.scrollIntoView(this.scrollingContainer);\r\n  }\r\n\r\n  setContents(delta, source = Emitter.sources.API) {\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        delta = new Delta(delta);\r\n        const length = this.getLength();\r\n        const deleted = this.editor.deleteText(0, length);\r\n        const applied = this.editor.applyDelta(delta);\r\n        const lastOp = applied.ops[applied.ops.length - 1];\r\n        if (\r\n          lastOp != null &&\r\n          typeof lastOp.insert === 'string' &&\r\n          lastOp.insert[lastOp.insert.length - 1] === '\\n'\r\n        ) {\r\n          this.editor.deleteText(this.getLength() - 1, 1);\r\n          applied.delete(1);\r\n        }\r\n        return deleted.compose(applied);\r\n      },\r\n      source,\r\n    );\r\n  }\r\n\r\n  setSelection(index, length, source) {\r\n    if (index == null) {\r\n      this.selection.setRange(null, length || Quill.sources.API);\r\n    } else {\r\n      [index, length, , source] = overload(index, length, source);\r\n      this.selection.setRange(new Range(Math.max(0, index), length), source);\r\n      if (source !== Emitter.sources.SILENT) {\r\n        this.selection.scrollIntoView(this.scrollingContainer);\r\n      }\r\n    }\r\n  }\r\n\r\n  setText(text, source = Emitter.sources.API) {\r\n    const delta = new Delta().insert(text);\r\n    return this.setContents(delta, source);\r\n  }\r\n\r\n  update(source = Emitter.sources.USER) {\r\n    const change = this.scroll.update(source); // Will update selection before selection.update() does if text changes\r\n    this.selection.update(source);\r\n    // TODO this is usually undefined\r\n    return change;\r\n  }\r\n\r\n  updateContents(delta, source = Emitter.sources.API) {\r\n    return modify.call(\r\n      this,\r\n      () => {\r\n        delta = new Delta(delta);\r\n        return this.editor.applyDelta(delta, source);\r\n      },\r\n      source,\r\n      true,\r\n    );\r\n  }\r\n}\r\nQuill.DEFAULTS = {\r\n  bounds: null,\r\n  modules: {},\r\n  placeholder: '',\r\n  readOnly: false,\r\n  registry: globalRegistry,\r\n  scrollingContainer: null,\r\n  theme: 'default',\r\n};\r\nQuill.events = Emitter.events;\r\nQuill.sources = Emitter.sources;\r\n// eslint-disable-next-line no-undef\r\nQuill.version = typeof QUILL_VERSION === 'undefined' ? 'dev' : QUILL_VERSION;\r\n\r\nQuill.imports = {\r\n  delta: Delta,\r\n  parchment: Parchment,\r\n  'core/module': Module,\r\n  'core/theme': Theme,\r\n};\r\n\r\nfunction expandConfig(container, userConfig) {\r\n  userConfig = extend(\r\n    true,\r\n    {\r\n      container,\r\n      modules: {\r\n        clipboard: true,\r\n        keyboard: true,\r\n        history: true,\r\n        uploader: true,\r\n      },\r\n    },\r\n    userConfig,\r\n  );\r\n  if (!userConfig.theme || userConfig.theme === Quill.DEFAULTS.theme) {\r\n    userConfig.theme = Theme;\r\n  } else {\r\n    userConfig.theme = Quill.import(`themes/${userConfig.theme}`);\r\n    if (userConfig.theme == null) {\r\n      throw new Error(\r\n        `Invalid theme ${userConfig.theme}. Did you register it?`,\r\n      );\r\n    }\r\n  }\r\n  const themeConfig = extend(true, {}, userConfig.theme.DEFAULTS);\r\n  [themeConfig, userConfig].forEach(config => {\r\n    config.modules = config.modules || {};\r\n    Object.keys(config.modules).forEach(module => {\r\n      if (config.modules[module] === true) {\r\n        config.modules[module] = {};\r\n      }\r\n    });\r\n  });\r\n  const moduleNames = Object.keys(themeConfig.modules).concat(\r\n    Object.keys(userConfig.modules),\r\n  );\r\n  const moduleConfig = moduleNames.reduce((config, name) => {\r\n    const moduleClass = Quill.import(`modules/${name}`);\r\n    if (moduleClass == null) {\r\n      debug.error(\r\n        `Cannot load ${name} module. Are you sure you registered it?`,\r\n      );\r\n    } else {\r\n      config[name] = moduleClass.DEFAULTS || {};\r\n    }\r\n    return config;\r\n  }, {});\r\n  // Special case toolbar shorthand\r\n  if (\r\n    userConfig.modules != null &&\r\n    userConfig.modules.toolbar &&\r\n    userConfig.modules.toolbar.constructor !== Object\r\n  ) {\r\n    userConfig.modules.toolbar = {\r\n      container: userConfig.modules.toolbar,\r\n    };\r\n  }\r\n  userConfig = extend(\r\n    true,\r\n    {},\r\n    Quill.DEFAULTS,\r\n    { modules: moduleConfig },\r\n    themeConfig,\r\n    userConfig,\r\n  );\r\n  ['bounds', 'container', 'scrollingContainer'].forEach(key => {\r\n    if (typeof userConfig[key] === 'string') {\r\n      userConfig[key] = document.querySelector(userConfig[key]);\r\n    }\r\n  });\r\n  userConfig.modules = Object.keys(userConfig.modules).reduce(\r\n    (config, name) => {\r\n      if (userConfig.modules[name]) {\r\n        config[name] = userConfig.modules[name];\r\n      }\r\n      return config;\r\n    },\r\n    {},\r\n  );\r\n  return userConfig;\r\n}\r\n\r\n// Handle selection preservation and TEXT_CHANGE emission\r\n// common to modification APIs\r\nfunction modify(modifier, source, index, shift) {\r\n  if (\r\n    !this.isEnabled() &&\r\n    source === Emitter.sources.USER &&\r\n    !this.allowReadOnlyEdits\r\n  ) {\r\n    return new Delta();\r\n  }\r\n  let range = index == null ? null : this.getSelection();\r\n  const oldDelta = this.editor.delta;\r\n  const change = modifier();\r\n  if (range != null) {\r\n    if (index === true) {\r\n      index = range.index; // eslint-disable-line prefer-destructuring\r\n    }\r\n    if (shift == null) {\r\n      range = shiftRange(range, change, source);\r\n    } else if (shift !== 0) {\r\n      range = shiftRange(range, index, shift, source);\r\n    }\r\n    this.setSelection(range, Emitter.sources.SILENT);\r\n  }\r\n  if (change.length() > 0) {\r\n    const args = [Emitter.events.TEXT_CHANGE, change, oldDelta, source];\r\n    this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\r\n    if (source !== Emitter.sources.SILENT) {\r\n      this.emitter.emit(...args);\r\n    }\r\n  }\r\n  return change;\r\n}\r\n\r\nfunction overload(index, length, name, value, source) {\r\n  let formats = {};\r\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\r\n    // Allow for throwaway end (used by insertText/insertEmbed)\r\n    if (typeof length !== 'number') {\r\n      source = value;\r\n      value = name;\r\n      name = length;\r\n      length = index.length; // eslint-disable-line prefer-destructuring\r\n      index = index.index; // eslint-disable-line prefer-destructuring\r\n    } else {\r\n      length = index.length; // eslint-disable-line prefer-destructuring\r\n      index = index.index; // eslint-disable-line prefer-destructuring\r\n    }\r\n  } else if (typeof length !== 'number') {\r\n    source = value;\r\n    value = name;\r\n    name = length;\r\n    length = 0;\r\n  }\r\n  // Handle format being object, two format name/value strings or excluded\r\n  if (typeof name === 'object') {\r\n    formats = name;\r\n    source = value;\r\n  } else if (typeof name === 'string') {\r\n    if (value != null) {\r\n      formats[name] = value;\r\n    } else {\r\n      source = name;\r\n    }\r\n  }\r\n  // Handle optional source\r\n  source = source || Emitter.sources.API;\r\n  return [index, length, formats, source];\r\n}\r\n\r\nfunction shiftRange(range, index, length, source) {\r\n  if (range == null) return null;\r\n  let start;\r\n  let end;\r\n  if (index instanceof Delta) {\r\n    [start, end] = [range.index, range.index + range.length].map(pos =>\r\n      index.transformPosition(pos, source !== Emitter.sources.USER),\r\n    );\r\n  } else {\r\n    [start, end] = [range.index, range.index + range.length].map(pos => {\r\n      if (pos < index || (pos === index && source === Emitter.sources.USER))\r\n        return pos;\r\n      if (length >= 0) {\r\n        return pos + length;\r\n      }\r\n      return Math.max(index, pos + length);\r\n    });\r\n  }\r\n  return new Range(start, end - start);\r\n}\r\n\r\nexport { globalRegistry, expandConfig, overload, Quill as default };\r\n","import { LeafBlot, Scope } from 'parchment';\r\nimport clone from 'clone';\r\nimport equal from 'deep-equal';\r\nimport Emitter from './emitter';\r\nimport logger from './logger';\r\n\r\nconst debug = logger('quill:selection');\r\n\r\nclass Range {\r\n  constructor(index, length = 0) {\r\n    this.index = index;\r\n    this.length = length;\r\n  }\r\n}\r\n\r\nclass Selection {\r\n  constructor(scroll, emitter) {\r\n    this.emitter = emitter;\r\n    this.scroll = scroll;\r\n    this.composing = false;\r\n    this.mouseDown = false;\r\n    this.root = this.scroll.domNode;\r\n    this.cursor = this.scroll.create('cursor', this);\r\n    // savedRange is last non-null range\r\n    this.savedRange = new Range(0, 0);\r\n    this.lastRange = this.savedRange;\r\n    this.handleComposition();\r\n    this.handleDragging();\r\n    this.emitter.listenDOM('selectionchange', document, () => {\r\n      if (!this.mouseDown && !this.composing) {\r\n        setTimeout(this.update.bind(this, Emitter.sources.USER), 1);\r\n      }\r\n    });\r\n    this.emitter.on(Emitter.events.SCROLL_BEFORE_UPDATE, () => {\r\n      if (!this.hasFocus()) return;\r\n      const native = this.getNativeRange();\r\n      if (native == null) return;\r\n      if (native.start.node === this.cursor.textNode) return; // cursor.restore() will handle\r\n      this.emitter.once(Emitter.events.SCROLL_UPDATE, () => {\r\n        try {\r\n          if (\r\n            this.root.contains(native.start.node) &&\r\n            this.root.contains(native.end.node)\r\n          ) {\r\n            this.setNativeRange(\r\n              native.start.node,\r\n              native.start.offset,\r\n              native.end.node,\r\n              native.end.offset,\r\n            );\r\n          }\r\n          this.update(Emitter.sources.SILENT);\r\n        } catch (ignored) {\r\n          // ignore\r\n        }\r\n      });\r\n    });\r\n    this.emitter.on(Emitter.events.SCROLL_OPTIMIZE, (mutations, context) => {\r\n      if (context.range) {\r\n        const { startNode, startOffset, endNode, endOffset } = context.range;\r\n        this.setNativeRange(startNode, startOffset, endNode, endOffset);\r\n        this.update(Emitter.sources.SILENT);\r\n      }\r\n    });\r\n    this.update(Emitter.sources.SILENT);\r\n  }\r\n\r\n  handleComposition() {\r\n    this.root.addEventListener('compositionstart', () => {\r\n      this.composing = true;\r\n      this.scroll.batchStart();\r\n    });\r\n    this.root.addEventListener('compositionend', () => {\r\n      this.scroll.batchEnd();\r\n      this.composing = false;\r\n      if (this.cursor.parent) {\r\n        const range = this.cursor.restore();\r\n        if (!range) return;\r\n        setTimeout(() => {\r\n          this.setNativeRange(\r\n            range.startNode,\r\n            range.startOffset,\r\n            range.endNode,\r\n            range.endOffset,\r\n          );\r\n        }, 1);\r\n      }\r\n    });\r\n  }\r\n\r\n  handleDragging() {\r\n    this.emitter.listenDOM('mousedown', document.body, () => {\r\n      this.mouseDown = true;\r\n    });\r\n    this.emitter.listenDOM('mouseup', document.body, () => {\r\n      this.mouseDown = false;\r\n      this.update(Emitter.sources.USER);\r\n    });\r\n  }\r\n\r\n  focus() {\r\n    if (this.hasFocus()) return;\r\n    this.root.focus();\r\n    this.setRange(this.savedRange);\r\n  }\r\n\r\n  format(format, value) {\r\n    this.scroll.update();\r\n    const nativeRange = this.getNativeRange();\r\n    if (\r\n      nativeRange == null ||\r\n      !nativeRange.native.collapsed ||\r\n      this.scroll.query(format, Scope.BLOCK)\r\n    )\r\n      return;\r\n    if (nativeRange.start.node !== this.cursor.textNode) {\r\n      const blot = this.scroll.find(nativeRange.start.node, false);\r\n      if (blot == null) return;\r\n      // TODO Give blot ability to not split\r\n      if (blot instanceof LeafBlot) {\r\n        const after = blot.split(nativeRange.start.offset);\r\n        blot.parent.insertBefore(this.cursor, after);\r\n      } else {\r\n        blot.insertBefore(this.cursor, nativeRange.start.node); // Should never happen\r\n      }\r\n      this.cursor.attach();\r\n    }\r\n    this.cursor.format(format, value);\r\n    this.scroll.optimize();\r\n    this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\r\n    this.update();\r\n  }\r\n\r\n  getBounds(index, length = 0) {\r\n    const scrollLength = this.scroll.length();\r\n    index = Math.min(index, scrollLength - 1);\r\n    length = Math.min(index + length, scrollLength - 1) - index;\r\n    let node;\r\n    let [leaf, offset] = this.scroll.leaf(index);\r\n    if (leaf == null) return null;\r\n    [node, offset] = leaf.position(offset, true);\r\n    const range = document.createRange();\r\n    if (length > 0) {\r\n      range.setStart(node, offset);\r\n      [leaf, offset] = this.scroll.leaf(index + length);\r\n      if (leaf == null) return null;\r\n      [node, offset] = leaf.position(offset, true);\r\n      range.setEnd(node, offset);\r\n      return range.getBoundingClientRect();\r\n    }\r\n    let side = 'left';\r\n    let rect;\r\n    if (node instanceof Text) {\r\n      if (offset < node.data.length) {\r\n        range.setStart(node, offset);\r\n        range.setEnd(node, offset + 1);\r\n      } else {\r\n        range.setStart(node, offset - 1);\r\n        range.setEnd(node, offset);\r\n        side = 'right';\r\n      }\r\n      rect = range.getBoundingClientRect();\r\n    } else {\r\n      rect = leaf.domNode.getBoundingClientRect();\r\n      if (offset > 0) side = 'right';\r\n    }\r\n    return {\r\n      bottom: rect.top + rect.height,\r\n      height: rect.height,\r\n      left: rect[side],\r\n      right: rect[side],\r\n      top: rect.top,\r\n      width: 0,\r\n    };\r\n  }\r\n\r\n  getNativeRange() {\r\n    const selection = document.getSelection();\r\n    if (selection == null || selection.rangeCount <= 0) return null;\r\n    const nativeRange = selection.getRangeAt(0);\r\n    if (nativeRange == null) return null;\r\n    const range = this.normalizeNative(nativeRange);\r\n    debug.info('getNativeRange', range);\r\n    return range;\r\n  }\r\n\r\n  getRange() {\r\n    const normalized = this.getNativeRange();\r\n    if (normalized == null) return [null, null];\r\n    const range = this.normalizedToRange(normalized);\r\n    return [range, normalized];\r\n  }\r\n\r\n  hasFocus() {\r\n    return (\r\n      document.activeElement === this.root ||\r\n      contains(this.root, document.activeElement)\r\n    );\r\n  }\r\n\r\n  normalizedToRange(range) {\r\n    const positions = [[range.start.node, range.start.offset]];\r\n    if (!range.native.collapsed) {\r\n      positions.push([range.end.node, range.end.offset]);\r\n    }\r\n    const indexes = positions.map(position => {\r\n      const [node, offset] = position;\r\n      const blot = this.scroll.find(node, true);\r\n      const index = blot.offset(this.scroll);\r\n      if (offset === 0) {\r\n        return index;\r\n      }\r\n      if (blot instanceof LeafBlot) {\r\n        return index + blot.index(node, offset);\r\n      }\r\n      return index + blot.length();\r\n    });\r\n    const end = Math.min(Math.max(...indexes), this.scroll.length() - 1);\r\n    const start = Math.min(end, ...indexes);\r\n    return new Range(start, end - start);\r\n  }\r\n\r\n  normalizeNative(nativeRange) {\r\n    if (\r\n      !contains(this.root, nativeRange.startContainer) ||\r\n      (!nativeRange.collapsed && !contains(this.root, nativeRange.endContainer))\r\n    ) {\r\n      return null;\r\n    }\r\n    const range = {\r\n      start: {\r\n        node: nativeRange.startContainer,\r\n        offset: nativeRange.startOffset,\r\n      },\r\n      end: { node: nativeRange.endContainer, offset: nativeRange.endOffset },\r\n      native: nativeRange,\r\n    };\r\n    [range.start, range.end].forEach(position => {\r\n      let { node, offset } = position;\r\n      while (!(node instanceof Text) && node.childNodes.length > 0) {\r\n        if (node.childNodes.length > offset) {\r\n          node = node.childNodes[offset];\r\n          offset = 0;\r\n        } else if (node.childNodes.length === offset) {\r\n          node = node.lastChild;\r\n          if (node instanceof Text) {\r\n            offset = node.data.length;\r\n          } else if (node.childNodes.length > 0) {\r\n            // Container case\r\n            offset = node.childNodes.length;\r\n          } else {\r\n            // Embed case\r\n            offset = node.childNodes.length + 1;\r\n          }\r\n        } else {\r\n          break;\r\n        }\r\n      }\r\n      position.node = node;\r\n      position.offset = offset;\r\n    });\r\n    return range;\r\n  }\r\n\r\n  rangeToNative(range) {\r\n    const indexes = range.collapsed\r\n      ? [range.index]\r\n      : [range.index, range.index + range.length];\r\n    const args = [];\r\n    const scrollLength = this.scroll.length();\r\n    indexes.forEach((index, i) => {\r\n      index = Math.min(scrollLength - 1, index);\r\n      const [leaf, leafOffset] = this.scroll.leaf(index);\r\n      const [node, offset] = leaf.position(leafOffset, i !== 0);\r\n      args.push(node, offset);\r\n    });\r\n    if (args.length < 2) {\r\n      return args.concat(args);\r\n    }\r\n    return args;\r\n  }\r\n\r\n  scrollIntoView(scrollingContainer) {\r\n    const range = this.lastRange;\r\n    if (range == null) return;\r\n    const bounds = this.getBounds(range.index, range.length);\r\n    if (bounds == null) return;\r\n    const limit = this.scroll.length() - 1;\r\n    const [first] = this.scroll.line(Math.min(range.index, limit));\r\n    let last = first;\r\n    if (range.length > 0) {\r\n      [last] = this.scroll.line(Math.min(range.index + range.length, limit));\r\n    }\r\n    if (first == null || last == null) return;\r\n    const scrollBounds = scrollingContainer.getBoundingClientRect();\r\n    if (bounds.top < scrollBounds.top) {\r\n      scrollingContainer.scrollTop -= scrollBounds.top - bounds.top;\r\n    } else if (bounds.bottom > scrollBounds.bottom) {\r\n      scrollingContainer.scrollTop += bounds.bottom - scrollBounds.bottom;\r\n    }\r\n  }\r\n\r\n  setNativeRange(\r\n    startNode,\r\n    startOffset,\r\n    endNode = startNode,\r\n    endOffset = startOffset,\r\n    force = false,\r\n  ) {\r\n    debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\r\n    if (\r\n      startNode != null &&\r\n      (this.root.parentNode == null ||\r\n        startNode.parentNode == null ||\r\n        endNode.parentNode == null)\r\n    ) {\r\n      return;\r\n    }\r\n    const selection = document.getSelection();\r\n    if (selection == null) return;\r\n    if (startNode != null) {\r\n      if (!this.hasFocus()) this.root.focus();\r\n      const { native } = this.getNativeRange() || {};\r\n      if (\r\n        native == null ||\r\n        force ||\r\n        startNode !== native.startContainer ||\r\n        startOffset !== native.startOffset ||\r\n        endNode !== native.endContainer ||\r\n        endOffset !== native.endOffset\r\n      ) {\r\n        if (startNode.tagName === 'BR') {\r\n          startOffset = Array.from(startNode.parentNode.childNodes).indexOf(\r\n            startNode,\r\n          );\r\n          startNode = startNode.parentNode;\r\n        }\r\n        if (endNode.tagName === 'BR') {\r\n          endOffset = Array.from(endNode.parentNode.childNodes).indexOf(\r\n            endNode,\r\n          );\r\n          endNode = endNode.parentNode;\r\n        }\r\n        const range = document.createRange();\r\n        range.setStart(startNode, startOffset);\r\n        range.setEnd(endNode, endOffset);\r\n        selection.removeAllRanges();\r\n        selection.addRange(range);\r\n      }\r\n    } else {\r\n      selection.removeAllRanges();\r\n      this.root.blur();\r\n    }\r\n  }\r\n\r\n  setRange(range, force = false, source = Emitter.sources.API) {\r\n    if (typeof force === 'string') {\r\n      source = force;\r\n      force = false;\r\n    }\r\n    debug.info('setRange', range);\r\n    if (range != null) {\r\n      const args = this.rangeToNative(range);\r\n      this.setNativeRange(...args, force);\r\n    } else {\r\n      this.setNativeRange(null);\r\n    }\r\n    this.update(source);\r\n  }\r\n\r\n  update(source = Emitter.sources.USER) {\r\n    const oldRange = this.lastRange;\r\n    const [lastRange, nativeRange] = this.getRange();\r\n    this.lastRange = lastRange;\r\n    if (this.lastRange != null) {\r\n      this.savedRange = this.lastRange;\r\n    }\r\n    if (!equal(oldRange, this.lastRange)) {\r\n      if (\r\n        !this.composing &&\r\n        nativeRange != null &&\r\n        nativeRange.native.collapsed &&\r\n        nativeRange.start.node !== this.cursor.textNode\r\n      ) {\r\n        const range = this.cursor.restore();\r\n        if (range) {\r\n          this.setNativeRange(\r\n            range.startNode,\r\n            range.startOffset,\r\n            range.endNode,\r\n            range.endOffset,\r\n          );\r\n        }\r\n      }\r\n      const args = [\r\n        Emitter.events.SELECTION_CHANGE,\r\n        clone(this.lastRange),\r\n        clone(oldRange),\r\n        source,\r\n      ];\r\n      this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\r\n      if (source !== Emitter.sources.SILENT) {\r\n        this.emitter.emit(...args);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction contains(parent, descendant) {\r\n  try {\r\n    // Firefox inserts inaccessible nodes around video elements\r\n    descendant.parentNode; // eslint-disable-line no-unused-expressions\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n  return parent.contains(descendant);\r\n}\r\n\r\nexport { Range, Selection as default };\r\n","class Theme {\r\n  constructor(quill, options) {\r\n    this.quill = quill;\r\n    this.options = options;\r\n    this.modules = {};\r\n  }\r\n\r\n  init() {\r\n    Object.keys(this.options.modules).forEach(name => {\r\n      if (this.modules[name] == null) {\r\n        this.addModule(name);\r\n      }\r\n    });\r\n  }\r\n\r\n  addModule(name) {\r\n    const ModuleClass = this.quill.constructor.import(`modules/${name}`);\r\n    this.modules[name] = new ModuleClass(\r\n      this.quill,\r\n      this.options.modules[name] || {},\r\n    );\r\n    return this.modules[name];\r\n  }\r\n}\r\nTheme.DEFAULTS = {\r\n  modules: {},\r\n};\r\nTheme.themes = {\r\n  default: Theme,\r\n};\r\n\r\nexport default Theme;\r\n","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\r\n\r\nconst config = {\r\n  scope: Scope.BLOCK,\r\n  whitelist: ['right', 'center', 'justify'],\r\n};\r\n\r\nconst AlignAttribute = new Attributor('align', 'align', config);\r\nconst AlignClass = new ClassAttributor('align', 'ql-align', config);\r\nconst AlignStyle = new StyleAttributor('align', 'text-align', config);\r\n\r\nexport { AlignAttribute, AlignClass, AlignStyle };\r\n","import { ClassAttributor, Scope } from 'parchment';\r\nimport { ColorAttributor } from './color';\r\n\r\nconst BackgroundClass = new ClassAttributor('background', 'ql-bg', {\r\n  scope: Scope.INLINE,\r\n});\r\nconst BackgroundStyle = new ColorAttributor('background', 'background-color', {\r\n  scope: Scope.INLINE,\r\n});\r\n\r\nexport { BackgroundClass, BackgroundStyle };\r\n","import Block from '../blots/block';\r\n\r\nclass Blockquote extends Block {}\r\nBlockquote.blotName = 'blockquote';\r\nBlockquote.tagName = 'blockquote';\r\n\r\nexport default Blockquote;\r\n","import Inline from '../blots/inline';\r\n\r\nclass Bold extends Inline {\r\n  static create() {\r\n    return super.create();\r\n  }\r\n\r\n  static formats() {\r\n    return true;\r\n  }\r\n\r\n  optimize(context) {\r\n    super.optimize(context);\r\n    if (this.domNode.tagName !== this.statics.tagName[0]) {\r\n      this.replaceWith(this.statics.blotName);\r\n    }\r\n  }\r\n}\r\nBold.blotName = 'bold';\r\nBold.tagName = ['STRONG', 'B'];\r\n\r\nexport default Bold;\r\n","import Block from '../blots/block';\r\nimport Break from '../blots/break';\r\nimport Cursor from '../blots/cursor';\r\nimport Inline from '../blots/inline';\r\nimport TextBlot, { escapeText } from '../blots/text';\r\nimport Container from '../blots/container';\r\nimport Quill from '../core/quill';\r\n\r\nclass CodeBlockContainer extends Container {\r\n  static create(value) {\r\n    const domNode = super.create(value);\r\n    domNode.setAttribute('spellcheck', false);\r\n    return domNode;\r\n  }\r\n\r\n  html(index, length) {\r\n    const text = this.children\r\n      .map(child => child.domNode.innerText)\r\n      .join('\\n')\r\n      .slice(index, index + length);\r\n    return `<pre>${escapeText(text)}</pre>`;\r\n  }\r\n}\r\n\r\nclass CodeBlock extends Block {\r\n  static register() {\r\n    Quill.register(CodeBlockContainer);\r\n  }\r\n}\r\n\r\nclass Code extends Inline {}\r\nCode.blotName = 'code';\r\nCode.tagName = 'CODE';\r\n\r\nCodeBlock.blotName = 'code-block';\r\nCodeBlock.className = 'ql-code-block';\r\nCodeBlock.tagName = 'DIV';\r\nCodeBlockContainer.blotName = 'code-block-container';\r\nCodeBlockContainer.className = 'ql-code-block-container';\r\nCodeBlockContainer.tagName = 'DIV';\r\n\r\nCodeBlockContainer.allowedChildren = [CodeBlock];\r\n\r\nCodeBlock.allowedChildren = [TextBlot, Break, Cursor];\r\nCodeBlock.requiredContainer = CodeBlockContainer;\r\nCodeBlock.TAB = '  ';\r\n\r\nexport { Code, CodeBlockContainer, CodeBlock as default };\r\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\r\n\r\nclass ColorAttributor extends StyleAttributor {\r\n  value(domNode) {\r\n    let value = super.value(domNode);\r\n    if (!value.startsWith('rgb(')) return value;\r\n    value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\r\n    const hex = value\r\n      .split(',')\r\n      .map(component => `00${parseInt(component, 10).toString(16)}`.slice(-2))\r\n      .join('');\r\n    return `#${hex}`;\r\n  }\r\n}\r\n\r\nconst ColorClass = new ClassAttributor('color', 'ql-color', {\r\n  scope: Scope.INLINE,\r\n});\r\nconst ColorStyle = new ColorAttributor('color', 'color', {\r\n  scope: Scope.INLINE,\r\n});\r\n\r\nexport { ColorAttributor, ColorClass, ColorStyle };\r\n","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\r\n\r\nconst config = {\r\n  scope: Scope.BLOCK,\r\n  whitelist: ['rtl'],\r\n};\r\n\r\nconst DirectionAttribute = new Attributor('direction', 'dir', config);\r\nconst DirectionClass = new ClassAttributor('direction', 'ql-direction', config);\r\nconst DirectionStyle = new StyleAttributor('direction', 'direction', config);\r\n\r\nexport { DirectionAttribute, DirectionClass, DirectionStyle };\r\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\r\n\r\nconst config = {\r\n  scope: Scope.INLINE,\r\n  whitelist: ['serif', 'monospace'],\r\n};\r\n\r\nconst FontClass = new ClassAttributor('font', 'ql-font', config);\r\n\r\nclass FontStyleAttributor extends StyleAttributor {\r\n  value(node) {\r\n    return super.value(node).replace(/[\"']/g, '');\r\n  }\r\n}\r\n\r\nconst FontStyle = new FontStyleAttributor('font', 'font-family', config);\r\n\r\nexport { FontStyle, FontClass };\r\n","import Embed from '../blots/embed';\r\n\r\nclass Formula extends Embed {\r\n  static create(value) {\r\n    if (window.katex == null) {\r\n      throw new Error('Formula module requires KaTeX.');\r\n    }\r\n    const node = super.create(value);\r\n    if (typeof value === 'string') {\r\n      window.katex.render(value, node, {\r\n        throwOnError: false,\r\n        errorColor: '#f00',\r\n      });\r\n      node.setAttribute('data-value', value);\r\n    }\r\n    return node;\r\n  }\r\n\r\n  static value(domNode) {\r\n    return domNode.getAttribute('data-value');\r\n  }\r\n\r\n  html() {\r\n    const { formula } = this.value();\r\n    return `<span>${formula}</span>`;\r\n  }\r\n}\r\nFormula.blotName = 'formula';\r\nFormula.className = 'ql-formula';\r\nFormula.tagName = 'SPAN';\r\n\r\nexport default Formula;\r\n","import Block from '../blots/block';\r\n\r\nclass Header extends Block {\r\n  static formats(domNode) {\r\n    return this.tagName.indexOf(domNode.tagName) + 1;\r\n  }\r\n}\r\nHeader.blotName = 'header';\r\nHeader.tagName = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\r\n\r\nexport default Header;\r\n","import { EmbedBlot } from 'parchment';\r\nimport { sanitize } from './link';\r\n\r\nconst ATTRIBUTES = ['alt', 'height', 'width'];\r\n\r\nclass Image extends EmbedBlot {\r\n  static create(value) {\r\n    const node = super.create(value);\r\n    if (typeof value === 'string') {\r\n      node.setAttribute('src', this.sanitize(value));\r\n    }\r\n    return node;\r\n  }\r\n\r\n  static formats(domNode) {\r\n    return ATTRIBUTES.reduce((formats, attribute) => {\r\n      if (domNode.hasAttribute(attribute)) {\r\n        formats[attribute] = domNode.getAttribute(attribute);\r\n      }\r\n      return formats;\r\n    }, {});\r\n  }\r\n\r\n  static match(url) {\r\n    return /\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url);\r\n  }\r\n\r\n  static register() {\r\n    if (/Firefox/i.test(navigator.userAgent)) {\r\n      setTimeout(() => {\r\n        // Disable image resizing in Firefox\r\n        document.execCommand('enableObjectResizing', false, false);\r\n      }, 1);\r\n    }\r\n  }\r\n\r\n  static sanitize(url) {\r\n    return sanitize(url, ['http', 'https', 'data']) ? url : '//:0';\r\n  }\r\n\r\n  static value(domNode) {\r\n    return domNode.getAttribute('src');\r\n  }\r\n\r\n  format(name, value) {\r\n    if (ATTRIBUTES.indexOf(name) > -1) {\r\n      if (value) {\r\n        this.domNode.setAttribute(name, value);\r\n      } else {\r\n        this.domNode.removeAttribute(name);\r\n      }\r\n    } else {\r\n      super.format(name, value);\r\n    }\r\n  }\r\n}\r\nImage.blotName = 'image';\r\nImage.tagName = 'IMG';\r\n\r\nexport default Image;\r\n","import { ClassAttributor, Scope } from 'parchment';\r\n\r\nclass IndentAttributor extends ClassAttributor {\r\n  add(node, value) {\r\n    if (value === '+1' || value === '-1') {\r\n      const indent = this.value(node) || 0;\r\n      value = value === '+1' ? indent + 1 : indent - 1;\r\n    }\r\n    if (value === 0) {\r\n      this.remove(node);\r\n      return true;\r\n    }\r\n    return super.add(node, value);\r\n  }\r\n\r\n  canAdd(node, value) {\r\n    return super.canAdd(node, value) || super.canAdd(node, parseInt(value, 10));\r\n  }\r\n\r\n  value(node) {\r\n    return parseInt(super.value(node), 10) || undefined; // Don't return NaN\r\n  }\r\n}\r\n\r\nconst IndentClass = new IndentAttributor('indent', 'ql-indent', {\r\n  scope: Scope.BLOCK,\r\n  whitelist: [1, 2, 3, 4, 5, 6, 7, 8],\r\n});\r\n\r\nexport default IndentClass;\r\n","import Bold from './bold';\r\n\r\nclass Italic extends Bold {}\r\nItalic.blotName = 'italic';\r\nItalic.tagName = ['EM', 'I'];\r\n\r\nexport default Italic;\r\n","import Inline from '../blots/inline';\r\n\r\nclass Link extends Inline {\r\n  static create(value) {\r\n    const node = super.create(value);\r\n    node.setAttribute('href', this.sanitize(value));\r\n    node.setAttribute('target', '_blank');\r\n    return node;\r\n  }\r\n\r\n  static formats(domNode) {\r\n    return domNode.getAttribute('href');\r\n  }\r\n\r\n  static sanitize(url) {\r\n    return sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL;\r\n  }\r\n\r\n  format(name, value) {\r\n    if (name !== this.statics.blotName || !value) {\r\n      super.format(name, value);\r\n    } else {\r\n      this.domNode.setAttribute('href', this.constructor.sanitize(value));\r\n    }\r\n  }\r\n}\r\nLink.blotName = 'link';\r\nLink.tagName = 'A';\r\nLink.SANITIZED_URL = 'about:blank';\r\nLink.PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel'];\r\n\r\nfunction sanitize(url, protocols) {\r\n  const anchor = document.createElement('a');\r\n  anchor.href = url;\r\n  const protocol = anchor.href.slice(0, anchor.href.indexOf(':'));\r\n  return protocols.indexOf(protocol) > -1;\r\n}\r\n\r\nexport { Link as default, sanitize };\r\n","import Block from '../blots/block';\r\nimport Container from '../blots/container';\r\nimport Quill from '../core/quill';\r\n\r\nclass ListContainer extends Container {}\r\nListContainer.blotName = 'list-container';\r\nListContainer.tagName = 'OL';\r\n\r\nclass ListItem extends Block {\r\n  static create(value) {\r\n    const node = super.create();\r\n    node.setAttribute('data-list', value);\r\n    return node;\r\n  }\r\n\r\n  static formats(domNode) {\r\n    return domNode.getAttribute('data-list') || undefined;\r\n  }\r\n\r\n  static register() {\r\n    Quill.register(ListContainer);\r\n  }\r\n\r\n  constructor(scroll, domNode) {\r\n    super(scroll, domNode);\r\n    const ui = domNode.ownerDocument.createElement('span');\r\n    const listEventHandler = e => {\r\n      if (!scroll.isEnabled()) return;\r\n      const format = this.statics.formats(domNode, scroll);\r\n      if (format === 'checked') {\r\n        this.format('list', 'unchecked');\r\n        e.preventDefault();\r\n      } else if (format === 'unchecked') {\r\n        this.format('list', 'checked');\r\n        e.preventDefault();\r\n      }\r\n    };\r\n    ui.addEventListener('mousedown', listEventHandler);\r\n    ui.addEventListener('touchstart', listEventHandler);\r\n    this.attachUI(ui);\r\n  }\r\n\r\n  format(name, value) {\r\n    if (name === this.statics.blotName && value) {\r\n      this.domNode.setAttribute('data-list', value);\r\n    } else {\r\n      super.format(name, value);\r\n    }\r\n  }\r\n}\r\nListItem.blotName = 'list';\r\nListItem.tagName = 'LI';\r\n\r\nListContainer.allowedChildren = [ListItem];\r\nListItem.requiredContainer = ListContainer;\r\n\r\nexport { ListContainer, ListItem as default };\r\n","import Inline from '../blots/inline';\r\n\r\nclass Script extends Inline {\r\n  static create(value) {\r\n    if (value === 'super') {\r\n      return document.createElement('sup');\r\n    }\r\n    if (value === 'sub') {\r\n      return document.createElement('sub');\r\n    }\r\n    return super.create(value);\r\n  }\r\n\r\n  static formats(domNode) {\r\n    if (domNode.tagName === 'SUB') return 'sub';\r\n    if (domNode.tagName === 'SUP') return 'super';\r\n    return undefined;\r\n  }\r\n}\r\nScript.blotName = 'script';\r\nScript.tagName = ['SUB', 'SUP'];\r\n\r\nexport default Script;\r\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\r\n\r\nconst SizeClass = new ClassAttributor('size', 'ql-size', {\r\n  scope: Scope.INLINE,\r\n  whitelist: ['small', 'large', 'huge'],\r\n});\r\nconst SizeStyle = new StyleAttributor('size', 'font-size', {\r\n  scope: Scope.INLINE,\r\n  whitelist: ['10px', '18px', '32px'],\r\n});\r\n\r\nexport { SizeClass, SizeStyle };\r\n","import Inline from '../blots/inline';\r\n\r\nclass Strike extends Inline {}\r\nStrike.blotName = 'strike';\r\nStrike.tagName = 'S';\r\n\r\nexport default Strike;\r\n","import Block from '../blots/block';\r\nimport Container from '../blots/container';\r\n\r\nclass TableCell extends Block {\r\n  static create(value) {\r\n    const node = super.create();\r\n    if (value) {\r\n      node.setAttribute('data-row', value);\r\n    } else {\r\n      node.setAttribute('data-row', tableId());\r\n    }\r\n    return node;\r\n  }\r\n\r\n  static formats(domNode) {\r\n    if (domNode.hasAttribute('data-row')) {\r\n      return domNode.getAttribute('data-row');\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  cellOffset() {\r\n    if (this.parent) {\r\n      return this.parent.children.indexOf(this);\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  format(name, value) {\r\n    if (name === TableCell.blotName && value) {\r\n      this.domNode.setAttribute('data-row', value);\r\n    } else {\r\n      super.format(name, value);\r\n    }\r\n  }\r\n\r\n  row() {\r\n    return this.parent;\r\n  }\r\n\r\n  rowOffset() {\r\n    if (this.row()) {\r\n      return this.row().rowOffset();\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  table() {\r\n    return this.row() && this.row().table();\r\n  }\r\n}\r\nTableCell.blotName = 'table';\r\nTableCell.tagName = 'TD';\r\n\r\nclass TableRow extends Container {\r\n  checkMerge() {\r\n    if (super.checkMerge() && this.next.children.head != null) {\r\n      const thisHead = this.children.head.formats();\r\n      const thisTail = this.children.tail.formats();\r\n      const nextHead = this.next.children.head.formats();\r\n      const nextTail = this.next.children.tail.formats();\r\n      return (\r\n        thisHead.table === thisTail.table &&\r\n        thisHead.table === nextHead.table &&\r\n        thisHead.table === nextTail.table\r\n      );\r\n    }\r\n    return false;\r\n  }\r\n\r\n  optimize(...args) {\r\n    super.optimize(...args);\r\n    this.children.forEach(child => {\r\n      if (child.next == null) return;\r\n      const childFormats = child.formats();\r\n      const nextFormats = child.next.formats();\r\n      if (childFormats.table !== nextFormats.table) {\r\n        const next = this.splitAfter(child);\r\n        if (next) {\r\n          next.optimize();\r\n        }\r\n        // We might be able to merge with prev now\r\n        if (this.prev) {\r\n          this.prev.optimize();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  rowOffset() {\r\n    if (this.parent) {\r\n      return this.parent.children.indexOf(this);\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  table() {\r\n    return this.parent && this.parent.parent;\r\n  }\r\n}\r\nTableRow.blotName = 'table-row';\r\nTableRow.tagName = 'TR';\r\n\r\nclass TableBody extends Container {}\r\nTableBody.blotName = 'table-body';\r\nTableBody.tagName = 'TBODY';\r\n\r\nclass TableContainer extends Container {\r\n  balanceCells() {\r\n    const rows = this.descendants(TableRow);\r\n    const maxColumns = rows.reduce((max, row) => {\r\n      return Math.max(row.children.length, max);\r\n    }, 0);\r\n    rows.forEach(row => {\r\n      new Array(maxColumns - row.children.length).fill(0).forEach(() => {\r\n        let value;\r\n        if (row.children.head != null) {\r\n          value = TableCell.formats(row.children.head.domNode);\r\n        }\r\n        const blot = this.scroll.create(TableCell.blotName, value);\r\n        row.appendChild(blot);\r\n        blot.optimize(); // Add break blot\r\n      });\r\n    });\r\n  }\r\n\r\n  cells(column) {\r\n    return this.rows().map(row => row.children.at(column));\r\n  }\r\n\r\n  deleteColumn(index) {\r\n    const [body] = this.descendant(TableBody);\r\n    if (body == null || body.children.head == null) return;\r\n    body.children.forEach(row => {\r\n      const cell = row.children.at(index);\r\n      if (cell != null) {\r\n        cell.remove();\r\n      }\r\n    });\r\n  }\r\n\r\n  insertColumn(index) {\r\n    const [body] = this.descendant(TableBody);\r\n    if (body == null || body.children.head == null) return;\r\n    body.children.forEach(row => {\r\n      const ref = row.children.at(index);\r\n      const value = TableCell.formats(row.children.head.domNode);\r\n      const cell = this.scroll.create(TableCell.blotName, value);\r\n      row.insertBefore(cell, ref);\r\n    });\r\n  }\r\n\r\n  insertRow(index) {\r\n    const [body] = this.descendant(TableBody);\r\n    if (body == null || body.children.head == null) return;\r\n    const id = tableId();\r\n    const row = this.scroll.create(TableRow.blotName);\r\n    body.children.head.children.forEach(() => {\r\n      const cell = this.scroll.create(TableCell.blotName, id);\r\n      row.appendChild(cell);\r\n    });\r\n    const ref = body.children.at(index);\r\n    body.insertBefore(row, ref);\r\n  }\r\n\r\n  rows() {\r\n    const body = this.children.head;\r\n    if (body == null) return [];\r\n    return body.children.map(row => row);\r\n  }\r\n}\r\nTableContainer.blotName = 'table-container';\r\nTableContainer.tagName = 'TABLE';\r\n\r\nTableContainer.allowedChildren = [TableBody];\r\nTableBody.requiredContainer = TableContainer;\r\n\r\nTableBody.allowedChildren = [TableRow];\r\nTableRow.requiredContainer = TableBody;\r\n\r\nTableRow.allowedChildren = [TableCell];\r\nTableCell.requiredContainer = TableRow;\r\n\r\nfunction tableId() {\r\n  const id = Math.random()\r\n    .toString(36)\r\n    .slice(2, 6);\r\n  return `row-${id}`;\r\n}\r\n\r\nexport { TableCell, TableRow, TableBody, TableContainer, tableId };\r\n","import Inline from '../blots/inline';\r\n\r\nclass Underline extends Inline {}\r\nUnderline.blotName = 'underline';\r\nUnderline.tagName = 'U';\r\n\r\nexport default Underline;\r\n","import { BlockEmbed } from '../blots/block';\r\nimport Link from './link';\r\n\r\nconst ATTRIBUTES = ['height', 'width'];\r\n\r\nclass Video extends BlockEmbed {\r\n  static create(value) {\r\n    const node = super.create(value);\r\n    node.setAttribute('frameborder', '0');\r\n    node.setAttribute('allowfullscreen', true);\r\n    node.setAttribute('src', this.sanitize(value));\r\n    return node;\r\n  }\r\n\r\n  static formats(domNode) {\r\n    return ATTRIBUTES.reduce((formats, attribute) => {\r\n      if (domNode.hasAttribute(attribute)) {\r\n        formats[attribute] = domNode.getAttribute(attribute);\r\n      }\r\n      return formats;\r\n    }, {});\r\n  }\r\n\r\n  static sanitize(url) {\r\n    return Link.sanitize(url); // eslint-disable-line import/no-named-as-default-member\r\n  }\r\n\r\n  static value(domNode) {\r\n    return domNode.getAttribute('src');\r\n  }\r\n\r\n  format(name, value) {\r\n    if (ATTRIBUTES.indexOf(name) > -1) {\r\n      if (value) {\r\n        this.domNode.setAttribute(name, value);\r\n      } else {\r\n        this.domNode.removeAttribute(name);\r\n      }\r\n    } else {\r\n      super.format(name, value);\r\n    }\r\n  }\r\n\r\n  html() {\r\n    const { video } = this.value();\r\n    return `<a href=\"${video}\">${video}</a>`;\r\n  }\r\n}\r\nVideo.blotName = 'video';\r\nVideo.className = 'ql-video';\r\nVideo.tagName = 'IFRAME';\r\n\r\nexport default Video;\r\n","import extend from 'extend';\r\nimport Delta from 'quill-delta';\r\nimport {\r\n  Attributor,\r\n  ClassAttributor,\r\n  EmbedBlot,\r\n  Scope,\r\n  StyleAttributor,\r\n  BlockBlot,\r\n} from 'parchment';\r\nimport { BlockEmbed } from '../blots/block';\r\nimport Quill from '../core/quill';\r\nimport logger from '../core/logger';\r\nimport Module from '../core/module';\r\n\r\nimport { AlignAttribute, AlignStyle } from '../formats/align';\r\nimport { BackgroundStyle } from '../formats/background';\r\nimport CodeBlock from '../formats/code';\r\nimport { ColorStyle } from '../formats/color';\r\nimport { DirectionAttribute, DirectionStyle } from '../formats/direction';\r\nimport { FontStyle } from '../formats/font';\r\nimport { SizeStyle } from '../formats/size';\r\n\r\nconst debug = logger('quill:clipboard');\r\n\r\nconst CLIPBOARD_CONFIG = [\r\n  [Node.TEXT_NODE, matchText],\r\n  [Node.TEXT_NODE, matchNewline],\r\n  ['br', matchBreak],\r\n  [Node.ELEMENT_NODE, matchNewline],\r\n  [Node.ELEMENT_NODE, matchBlot],\r\n  [Node.ELEMENT_NODE, matchAttributor],\r\n  [Node.ELEMENT_NODE, matchStyles],\r\n  ['li', matchIndent],\r\n  ['ol, ul', matchList],\r\n  ['pre', matchCodeBlock],\r\n  ['tr', matchTable],\r\n  ['b', matchAlias.bind(matchAlias, 'bold')],\r\n  ['i', matchAlias.bind(matchAlias, 'italic')],\r\n  ['style', matchIgnore],\r\n];\r\n\r\nconst ATTRIBUTE_ATTRIBUTORS = [AlignAttribute, DirectionAttribute].reduce(\r\n  (memo, attr) => {\r\n    memo[attr.keyName] = attr;\r\n    return memo;\r\n  },\r\n  {},\r\n);\r\n\r\nconst STYLE_ATTRIBUTORS = [\r\n  AlignStyle,\r\n  BackgroundStyle,\r\n  ColorStyle,\r\n  DirectionStyle,\r\n  FontStyle,\r\n  SizeStyle,\r\n].reduce((memo, attr) => {\r\n  memo[attr.keyName] = attr;\r\n  return memo;\r\n}, {});\r\n\r\nclass Clipboard extends Module {\r\n  constructor(quill, options) {\r\n    super(quill, options);\r\n    this.quill.root.addEventListener('copy', e => this.onCaptureCopy(e, false));\r\n    this.quill.root.addEventListener('cut', e => this.onCaptureCopy(e, true));\r\n    this.quill.root.addEventListener('paste', this.onCapturePaste.bind(this));\r\n    this.matchers = [];\r\n    CLIPBOARD_CONFIG.concat(this.options.matchers).forEach(\r\n      ([selector, matcher]) => {\r\n        this.addMatcher(selector, matcher);\r\n      },\r\n    );\r\n  }\r\n\r\n  addMatcher(selector, matcher) {\r\n    this.matchers.push([selector, matcher]);\r\n  }\r\n\r\n  convert({ html, text }, formats = {}) {\r\n    if (formats[CodeBlock.blotName]) {\r\n      return new Delta().insert(text, {\r\n        [CodeBlock.blotName]: formats[CodeBlock.blotName],\r\n      });\r\n    }\r\n    if (!html) {\r\n      return new Delta().insert(text || '');\r\n    }\r\n    const doc = new DOMParser().parseFromString(html, 'text/html');\r\n    const container = doc.body;\r\n    const nodeMatches = new WeakMap();\r\n    const [elementMatchers, textMatchers] = this.prepareMatching(\r\n      container,\r\n      nodeMatches,\r\n    );\r\n    const delta = traverse(\r\n      this.quill.scroll,\r\n      container,\r\n      elementMatchers,\r\n      textMatchers,\r\n      nodeMatches,\r\n    );\r\n    // Remove trailing newline\r\n    if (\r\n      deltaEndsWith(delta, '\\n') &&\r\n      (delta.ops[delta.ops.length - 1].attributes == null || formats.table)\r\n    ) {\r\n      return delta.compose(new Delta().retain(delta.length() - 1).delete(1));\r\n    }\r\n    return delta;\r\n  }\r\n\r\n  dangerouslyPasteHTML(index, html, source = Quill.sources.API) {\r\n    if (typeof index === 'string') {\r\n      const delta = this.convert({ html: index, text: '' });\r\n      this.quill.setContents(delta, html);\r\n      this.quill.setSelection(0, Quill.sources.SILENT);\r\n    } else {\r\n      const paste = this.convert({ html, text: '' });\r\n      this.quill.updateContents(\r\n        new Delta().retain(index).concat(paste),\r\n        source,\r\n      );\r\n      this.quill.setSelection(index + paste.length(), Quill.sources.SILENT);\r\n    }\r\n  }\r\n\r\n  onCaptureCopy(e, isCut = false) {\r\n    if (e.defaultPrevented) return;\r\n    e.preventDefault();\r\n    const [range] = this.quill.selection.getRange();\r\n    if (range == null) return;\r\n    const { html, text } = this.onCopy(range, isCut);\r\n    e.clipboardData.setData('text/plain', text);\r\n    e.clipboardData.setData('text/html', html);\r\n    if (isCut) {\r\n      this.quill.deleteText(range, Quill.sources.USER);\r\n    }\r\n  }\r\n\r\n  onCapturePaste(e) {\r\n    if (e.defaultPrevented || !this.quill.isEnabled()) return;\r\n    e.preventDefault();\r\n    const range = this.quill.getSelection(true);\r\n    if (range == null) return;\r\n    const html = e.clipboardData.getData('text/html');\r\n    const text = e.clipboardData.getData('text/plain');\r\n    const files = Array.from(e.clipboardData.files || []);\r\n    if (!html && files.length > 0) {\r\n      this.quill.uploader.upload(range, files);\r\n    } else {\r\n      this.onPaste(range, { html, text });\r\n    }\r\n  }\r\n\r\n  onCopy(range) {\r\n    const text = this.quill.getText(range);\r\n    const html = this.quill.getSemanticHTML(range);\r\n    return { html, text };\r\n  }\r\n\r\n  onPaste(range, { text, html }) {\r\n    const formats = this.quill.getFormat(range.index);\r\n    const pastedDelta = this.convert({ text, html }, formats);\r\n    debug.log('onPaste', pastedDelta, { text, html });\r\n    const delta = new Delta()\r\n      .retain(range.index)\r\n      .delete(range.length)\r\n      .concat(pastedDelta);\r\n    this.quill.updateContents(delta, Quill.sources.USER);\r\n    // range.length contributes to delta.length()\r\n    this.quill.setSelection(\r\n      delta.length() - range.length,\r\n      Quill.sources.SILENT,\r\n    );\r\n    this.quill.scrollIntoView();\r\n  }\r\n\r\n  prepareMatching(container, nodeMatches) {\r\n    const elementMatchers = [];\r\n    const textMatchers = [];\r\n    this.matchers.forEach(pair => {\r\n      const [selector, matcher] = pair;\r\n      switch (selector) {\r\n        case Node.TEXT_NODE:\r\n          textMatchers.push(matcher);\r\n          break;\r\n        case Node.ELEMENT_NODE:\r\n          elementMatchers.push(matcher);\r\n          break;\r\n        default:\r\n          Array.from(container.querySelectorAll(selector)).forEach(node => {\r\n            if (nodeMatches.has(node)) {\r\n              const matches = nodeMatches.get(node);\r\n              matches.push(matcher);\r\n            } else {\r\n              nodeMatches.set(node, [matcher]);\r\n            }\r\n          });\r\n          break;\r\n      }\r\n    });\r\n    return [elementMatchers, textMatchers];\r\n  }\r\n}\r\nClipboard.DEFAULTS = {\r\n  matchers: [],\r\n};\r\n\r\nfunction applyFormat(delta, format, value) {\r\n  if (typeof format === 'object') {\r\n    return Object.keys(format).reduce((newDelta, key) => {\r\n      return applyFormat(newDelta, key, format[key]);\r\n    }, delta);\r\n  }\r\n  return delta.reduce((newDelta, op) => {\r\n    if (op.attributes && op.attributes[format]) {\r\n      return newDelta.push(op);\r\n    }\r\n    return newDelta.insert(\r\n      op.insert,\r\n      extend({}, { [format]: value }, op.attributes),\r\n    );\r\n  }, new Delta());\r\n}\r\n\r\nfunction deltaEndsWith(delta, text) {\r\n  let endText = '';\r\n  for (\r\n    let i = delta.ops.length - 1;\r\n    i >= 0 && endText.length < text.length;\r\n    --i // eslint-disable-line no-plusplus\r\n  ) {\r\n    const op = delta.ops[i];\r\n    if (typeof op.insert !== 'string') break;\r\n    endText = op.insert + endText;\r\n  }\r\n  return endText.slice(-1 * text.length) === text;\r\n}\r\n\r\nfunction isLine(node) {\r\n  if (node.childNodes.length === 0) return false; // Exclude embed blocks\r\n  return [\r\n    'address',\r\n    'article',\r\n    'blockquote',\r\n    'canvas',\r\n    'dd',\r\n    'div',\r\n    'dl',\r\n    'dt',\r\n    'fieldset',\r\n    'figcaption',\r\n    'figure',\r\n    'footer',\r\n    'form',\r\n    'h1',\r\n    'h2',\r\n    'h3',\r\n    'h4',\r\n    'h5',\r\n    'h6',\r\n    'header',\r\n    'iframe',\r\n    'li',\r\n    'main',\r\n    'nav',\r\n    'ol',\r\n    'output',\r\n    'p',\r\n    'pre',\r\n    'section',\r\n    'table',\r\n    'td',\r\n    'tr',\r\n    'ul',\r\n    'video',\r\n  ].includes(node.tagName.toLowerCase());\r\n}\r\n\r\nconst preNodes = new WeakMap();\r\nfunction isPre(node) {\r\n  if (node == null) return false;\r\n  if (!preNodes.has(node)) {\r\n    if (node.tagName === 'PRE') {\r\n      preNodes.set(node, true);\r\n    } else {\r\n      preNodes.set(node, isPre(node.parentNode));\r\n    }\r\n  }\r\n  return preNodes.get(node);\r\n}\r\n\r\nfunction traverse(scroll, node, elementMatchers, textMatchers, nodeMatches) {\r\n  // Post-order\r\n  if (node.nodeType === node.TEXT_NODE) {\r\n    return textMatchers.reduce((delta, matcher) => {\r\n      return matcher(node, delta, scroll);\r\n    }, new Delta());\r\n  }\r\n  if (node.nodeType === node.ELEMENT_NODE) {\r\n    return Array.from(node.childNodes || []).reduce((delta, childNode) => {\r\n      let childrenDelta = traverse(\r\n        scroll,\r\n        childNode,\r\n        elementMatchers,\r\n        textMatchers,\r\n        nodeMatches,\r\n      );\r\n      if (childNode.nodeType === node.ELEMENT_NODE) {\r\n        childrenDelta = elementMatchers.reduce((reducedDelta, matcher) => {\r\n          return matcher(childNode, reducedDelta, scroll);\r\n        }, childrenDelta);\r\n        childrenDelta = (nodeMatches.get(childNode) || []).reduce(\r\n          (reducedDelta, matcher) => {\r\n            return matcher(childNode, reducedDelta, scroll);\r\n          },\r\n          childrenDelta,\r\n        );\r\n      }\r\n      return delta.concat(childrenDelta);\r\n    }, new Delta());\r\n  }\r\n  return new Delta();\r\n}\r\n\r\nfunction matchAlias(format, node, delta) {\r\n  return applyFormat(delta, format, true);\r\n}\r\n\r\nfunction matchAttributor(node, delta, scroll) {\r\n  const attributes = Attributor.keys(node);\r\n  const classes = ClassAttributor.keys(node);\r\n  const styles = StyleAttributor.keys(node);\r\n  const formats = {};\r\n  attributes\r\n    .concat(classes)\r\n    .concat(styles)\r\n    .forEach(name => {\r\n      let attr = scroll.query(name, Scope.ATTRIBUTE);\r\n      if (attr != null) {\r\n        formats[attr.attrName] = attr.value(node);\r\n        if (formats[attr.attrName]) return;\r\n      }\r\n      attr = ATTRIBUTE_ATTRIBUTORS[name];\r\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\r\n        formats[attr.attrName] = attr.value(node) || undefined;\r\n      }\r\n      attr = STYLE_ATTRIBUTORS[name];\r\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\r\n        attr = STYLE_ATTRIBUTORS[name];\r\n        formats[attr.attrName] = attr.value(node) || undefined;\r\n      }\r\n    });\r\n  if (Object.keys(formats).length > 0) {\r\n    return applyFormat(delta, formats);\r\n  }\r\n  return delta;\r\n}\r\n\r\nfunction matchBlot(node, delta, scroll) {\r\n  const match = scroll.query(node);\r\n  if (match == null) return delta;\r\n  if (match.prototype instanceof EmbedBlot) {\r\n    const embed = {};\r\n    const value = match.value(node);\r\n    if (value != null) {\r\n      embed[match.blotName] = value;\r\n      return new Delta().insert(embed, match.formats(node, scroll));\r\n    }\r\n  } else {\r\n    if (match.prototype instanceof BlockBlot && !deltaEndsWith(delta, '\\n')) {\r\n      delta.insert('\\n');\r\n    }\r\n    if (typeof match.formats === 'function') {\r\n      return applyFormat(delta, match.blotName, match.formats(node, scroll));\r\n    }\r\n  }\r\n  return delta;\r\n}\r\n\r\nfunction matchBreak(node, delta) {\r\n  if (!deltaEndsWith(delta, '\\n')) {\r\n    delta.insert('\\n');\r\n  }\r\n  return delta;\r\n}\r\n\r\nfunction matchCodeBlock(node, delta, scroll) {\r\n  const match = scroll.query('code-block');\r\n  const language = match ? match.formats(node, scroll) : true;\r\n  return applyFormat(delta, 'code-block', language);\r\n}\r\n\r\nfunction matchIgnore() {\r\n  return new Delta();\r\n}\r\n\r\nfunction matchIndent(node, delta, scroll) {\r\n  const match = scroll.query(node);\r\n  if (\r\n    match == null ||\r\n    match.blotName !== 'list' ||\r\n    !deltaEndsWith(delta, '\\n')\r\n  ) {\r\n    return delta;\r\n  }\r\n  let indent = -1;\r\n  let parent = node.parentNode;\r\n  while (parent != null) {\r\n    if (['OL', 'UL'].includes(parent.tagName)) {\r\n      indent += 1;\r\n    }\r\n    parent = parent.parentNode;\r\n  }\r\n  if (indent <= 0) return delta;\r\n  return delta.reduce((composed, op) => {\r\n    if (op.attributes && op.attributes.list) {\r\n      return composed.push(op);\r\n    }\r\n    return composed.insert(op.insert, { indent, ...(op.attributes || {}) });\r\n  }, new Delta());\r\n}\r\n\r\nfunction matchList(node, delta) {\r\n  const list = node.tagName === 'OL' ? 'ordered' : 'bullet';\r\n  return applyFormat(delta, 'list', list);\r\n}\r\n\r\nfunction matchNewline(node, delta, scroll) {\r\n  if (!deltaEndsWith(delta, '\\n')) {\r\n    if (isLine(node)) {\r\n      return delta.insert('\\n');\r\n    }\r\n    if (delta.length() > 0 && node.nextSibling) {\r\n      let { nextSibling } = node;\r\n      while (nextSibling != null) {\r\n        if (isLine(nextSibling)) {\r\n          return delta.insert('\\n');\r\n        }\r\n        const match = scroll.query(nextSibling);\r\n        if (match && match.prototype instanceof BlockEmbed) {\r\n          return delta.insert('\\n');\r\n        }\r\n        nextSibling = nextSibling.firstChild;\r\n      }\r\n    }\r\n  }\r\n  return delta;\r\n}\r\n\r\nfunction matchStyles(node, delta) {\r\n  const formats = {};\r\n  const style = node.style || {};\r\n  if (style.fontStyle === 'italic') {\r\n    formats.italic = true;\r\n  }\r\n  if (\r\n    style.fontWeight.startsWith('bold') ||\r\n    parseInt(style.fontWeight, 10) >= 700\r\n  ) {\r\n    formats.bold = true;\r\n  }\r\n  if (Object.keys(formats).length > 0) {\r\n    delta = applyFormat(delta, formats);\r\n  }\r\n  if (parseFloat(style.textIndent || 0) > 0) {\r\n    // Could be 0.5in\r\n    return new Delta().insert('\\t').concat(delta);\r\n  }\r\n  return delta;\r\n}\r\n\r\nfunction matchTable(node, delta) {\r\n  const table =\r\n    node.parentNode.tagName === 'TABLE'\r\n      ? node.parentNode\r\n      : node.parentNode.parentNode;\r\n  const rows = Array.from(table.querySelectorAll('tr'));\r\n  const row = rows.indexOf(node) + 1;\r\n  return applyFormat(delta, 'table', row);\r\n}\r\n\r\nfunction matchText(node, delta) {\r\n  let text = node.data;\r\n  // Word represents empty line with <o:p>&nbsp;</o:p>\r\n  if (node.parentNode.tagName === 'O:P') {\r\n    return delta.insert(text.trim());\r\n  }\r\n  if (text.trim().length === 0 && text.includes('\\n')) {\r\n    return delta;\r\n  }\r\n  if (!isPre(node)) {\r\n    const replacer = (collapse, match) => {\r\n      const replaced = match.replace(/[^\\u00a0]/g, ''); // \\u00a0 is nbsp;\r\n      return replaced.length < 1 && collapse ? ' ' : replaced;\r\n    };\r\n    text = text.replace(/\\r\\n/g, ' ').replace(/\\n/g, ' ');\r\n    text = text.replace(/\\s\\s+/g, replacer.bind(replacer, true)); // collapse whitespace\r\n    if (\r\n      (node.previousSibling == null && isLine(node.parentNode)) ||\r\n      (node.previousSibling != null && isLine(node.previousSibling))\r\n    ) {\r\n      text = text.replace(/^\\s+/, replacer.bind(replacer, false));\r\n    }\r\n    if (\r\n      (node.nextSibling == null && isLine(node.parentNode)) ||\r\n      (node.nextSibling != null && isLine(node.nextSibling))\r\n    ) {\r\n      text = text.replace(/\\s+$/, replacer.bind(replacer, false));\r\n    }\r\n  }\r\n  return delta.insert(text);\r\n}\r\n\r\nexport {\r\n  Clipboard as default,\r\n  matchAttributor,\r\n  matchBlot,\r\n  matchNewline,\r\n  matchText,\r\n  traverse,\r\n};\r\n","import { Scope } from 'parchment';\r\nimport Quill from '../core/quill';\r\nimport Module from '../core/module';\r\n\r\nclass History extends Module {\r\n  constructor(quill, options) {\r\n    super(quill, options);\r\n    this.lastRecorded = 0;\r\n    this.ignoreChange = false;\r\n    this.clear();\r\n    this.quill.on(\r\n      Quill.events.EDITOR_CHANGE,\r\n      (eventName, delta, oldDelta, source) => {\r\n        if (eventName !== Quill.events.TEXT_CHANGE || this.ignoreChange) return;\r\n        if (!this.options.userOnly || source === Quill.sources.USER) {\r\n          this.record(delta, oldDelta);\r\n        } else {\r\n          this.transform(delta);\r\n        }\r\n      },\r\n    );\r\n    this.quill.keyboard.addBinding(\r\n      { key: 'z', shortKey: true },\r\n      this.undo.bind(this),\r\n    );\r\n    this.quill.keyboard.addBinding(\r\n      { key: 'z', shortKey: true, shiftKey: true },\r\n      this.redo.bind(this),\r\n    );\r\n    if (/Win/i.test(navigator.platform)) {\r\n      this.quill.keyboard.addBinding(\r\n        { key: 'y', shortKey: true },\r\n        this.redo.bind(this),\r\n      );\r\n    }\r\n  }\r\n\r\n  change(source, dest) {\r\n    if (this.stack[source].length === 0) return;\r\n    const delta = this.stack[source].pop();\r\n    const base = this.quill.getContents();\r\n    const inverseDelta = delta.invert(base);\r\n    this.stack[dest].push(inverseDelta);\r\n    this.lastRecorded = 0;\r\n    this.ignoreChange = true;\r\n    this.quill.updateContents(delta, Quill.sources.USER);\r\n    this.ignoreChange = false;\r\n    const index = getLastChangeIndex(this.quill.scroll, delta);\r\n    this.quill.setSelection(index);\r\n  }\r\n\r\n  clear() {\r\n    this.stack = { undo: [], redo: [] };\r\n  }\r\n\r\n  cutoff() {\r\n    this.lastRecorded = 0;\r\n  }\r\n\r\n  record(changeDelta, oldDelta) {\r\n    if (changeDelta.ops.length === 0) return;\r\n    this.stack.redo = [];\r\n    let undoDelta = changeDelta.invert(oldDelta);\r\n    const timestamp = Date.now();\r\n    if (\r\n      this.lastRecorded + this.options.delay > timestamp &&\r\n      this.stack.undo.length > 0\r\n    ) {\r\n      const delta = this.stack.undo.pop();\r\n      undoDelta = undoDelta.compose(delta);\r\n    } else {\r\n      this.lastRecorded = timestamp;\r\n    }\r\n    if (undoDelta.length() === 0) return;\r\n    this.stack.undo.push(undoDelta);\r\n    if (this.stack.undo.length > this.options.maxStack) {\r\n      this.stack.undo.shift();\r\n    }\r\n  }\r\n\r\n  redo() {\r\n    this.change('redo', 'undo');\r\n  }\r\n\r\n  transform(delta) {\r\n    transformStack(this.stack.undo, delta);\r\n    transformStack(this.stack.redo, delta);\r\n  }\r\n\r\n  undo() {\r\n    this.change('undo', 'redo');\r\n  }\r\n}\r\nHistory.DEFAULTS = {\r\n  delay: 1000,\r\n  maxStack: 100,\r\n  userOnly: false,\r\n};\r\n\r\nfunction transformStack(stack, delta) {\r\n  let remoteDelta = delta;\r\n  for (let i = stack.length - 1; i >= 0; i -= 1) {\r\n    const oldDelta = stack[i];\r\n    stack[i] = remoteDelta.transform(oldDelta, true);\r\n    remoteDelta = oldDelta.transform(remoteDelta);\r\n    if (stack[i].length() === 0) {\r\n      stack.splice(i, 1);\r\n    }\r\n  }\r\n}\r\n\r\nfunction endsWithNewlineChange(scroll, delta) {\r\n  const lastOp = delta.ops[delta.ops.length - 1];\r\n  if (lastOp == null) return false;\r\n  if (lastOp.insert != null) {\r\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\r\n  }\r\n  if (lastOp.attributes != null) {\r\n    return Object.keys(lastOp.attributes).some(attr => {\r\n      return scroll.query(attr, Scope.BLOCK) != null;\r\n    });\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction getLastChangeIndex(scroll, delta) {\r\n  const deleteLength = delta.reduce((length, op) => {\r\n    return length + (op.delete || 0);\r\n  }, 0);\r\n  let changeIndex = delta.length() - deleteLength;\r\n  if (endsWithNewlineChange(scroll, delta)) {\r\n    changeIndex -= 1;\r\n  }\r\n  return changeIndex;\r\n}\r\n\r\nexport { History as default, getLastChangeIndex };\r\n","import clone from 'clone';\r\nimport equal from 'deep-equal';\r\nimport extend from 'extend';\r\nimport Delta, { AttributeMap } from 'quill-delta';\r\nimport { EmbedBlot, Scope, TextBlot } from 'parchment';\r\nimport Quill from '../core/quill';\r\nimport logger from '../core/logger';\r\nimport Module from '../core/module';\r\n\r\nconst debug = logger('quill:keyboard');\r\n\r\nconst SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\r\n\r\nclass Keyboard extends Module {\r\n  static match(evt, binding) {\r\n    if (\r\n      ['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].some(key => {\r\n        return !!binding[key] !== evt[key] && binding[key] !== null;\r\n      })\r\n    ) {\r\n      return false;\r\n    }\r\n    return binding.key === evt.key || binding.key === evt.which;\r\n  }\r\n\r\n  constructor(quill, options) {\r\n    super(quill, options);\r\n    this.bindings = {};\r\n    Object.keys(this.options.bindings).forEach(name => {\r\n      if (this.options.bindings[name]) {\r\n        this.addBinding(this.options.bindings[name]);\r\n      }\r\n    });\r\n    this.addBinding({ key: 'Enter', shiftKey: null }, this.handleEnter);\r\n    this.addBinding(\r\n      { key: 'Enter', metaKey: null, ctrlKey: null, altKey: null },\r\n      () => {},\r\n    );\r\n    if (/Firefox/i.test(navigator.userAgent)) {\r\n      // Need to handle delete and backspace for Firefox in the general case #1171\r\n      this.addBinding(\r\n        { key: 'Backspace' },\r\n        { collapsed: true },\r\n        this.handleBackspace,\r\n      );\r\n      this.addBinding(\r\n        { key: 'Delete' },\r\n        { collapsed: true },\r\n        this.handleDelete,\r\n      );\r\n    } else {\r\n      this.addBinding(\r\n        { key: 'Backspace' },\r\n        { collapsed: true, prefix: /^.?$/ },\r\n        this.handleBackspace,\r\n      );\r\n      this.addBinding(\r\n        { key: 'Delete' },\r\n        { collapsed: true, suffix: /^.?$/ },\r\n        this.handleDelete,\r\n      );\r\n    }\r\n    this.addBinding(\r\n      { key: 'Backspace' },\r\n      { collapsed: false },\r\n      this.handleDeleteRange,\r\n    );\r\n    this.addBinding(\r\n      { key: 'Delete' },\r\n      { collapsed: false },\r\n      this.handleDeleteRange,\r\n    );\r\n    this.addBinding(\r\n      {\r\n        key: 'Backspace',\r\n        altKey: null,\r\n        ctrlKey: null,\r\n        metaKey: null,\r\n        shiftKey: null,\r\n      },\r\n      { collapsed: true, offset: 0 },\r\n      this.handleBackspace,\r\n    );\r\n    this.listen();\r\n  }\r\n\r\n  addBinding(keyBinding, context = {}, handler = {}) {\r\n    const binding = normalize(keyBinding);\r\n    if (binding == null) {\r\n      debug.warn('Attempted to add invalid keyboard binding', binding);\r\n      return;\r\n    }\r\n    if (typeof context === 'function') {\r\n      context = { handler: context };\r\n    }\r\n    if (typeof handler === 'function') {\r\n      handler = { handler };\r\n    }\r\n    const keys = Array.isArray(binding.key) ? binding.key : [binding.key];\r\n    keys.forEach(key => {\r\n      const singleBinding = extend({}, binding, { key }, context, handler);\r\n      this.bindings[singleBinding.key] = this.bindings[singleBinding.key] || [];\r\n      this.bindings[singleBinding.key].push(singleBinding);\r\n    });\r\n  }\r\n\r\n  listen() {\r\n    this.quill.root.addEventListener('keydown', evt => {\r\n      if (evt.defaultPrevented) return;\r\n      const bindings = (this.bindings[evt.key] || []).concat(\r\n        this.bindings[evt.which] || [],\r\n      );\r\n      const matches = bindings.filter(binding => Keyboard.match(evt, binding));\r\n      if (matches.length === 0) return;\r\n      const range = this.quill.getSelection();\r\n      if (range == null || !this.quill.hasFocus()) return;\r\n      const [line, offset] = this.quill.getLine(range.index);\r\n      const [leafStart, offsetStart] = this.quill.getLeaf(range.index);\r\n      const [leafEnd, offsetEnd] =\r\n        range.length === 0\r\n          ? [leafStart, offsetStart]\r\n          : this.quill.getLeaf(range.index + range.length);\r\n      const prefixText =\r\n        leafStart instanceof TextBlot\r\n          ? leafStart.value().slice(0, offsetStart)\r\n          : '';\r\n      const suffixText =\r\n        leafEnd instanceof TextBlot ? leafEnd.value().slice(offsetEnd) : '';\r\n      const curContext = {\r\n        collapsed: range.length === 0,\r\n        empty: range.length === 0 && line.length() <= 1,\r\n        format: this.quill.getFormat(range),\r\n        line,\r\n        offset,\r\n        prefix: prefixText,\r\n        suffix: suffixText,\r\n        event: evt,\r\n      };\r\n      const prevented = matches.some(binding => {\r\n        if (\r\n          binding.collapsed != null &&\r\n          binding.collapsed !== curContext.collapsed\r\n        ) {\r\n          return false;\r\n        }\r\n        if (binding.empty != null && binding.empty !== curContext.empty) {\r\n          return false;\r\n        }\r\n        if (binding.offset != null && binding.offset !== curContext.offset) {\r\n          return false;\r\n        }\r\n        if (Array.isArray(binding.format)) {\r\n          // any format is present\r\n          if (binding.format.every(name => curContext.format[name] == null)) {\r\n            return false;\r\n          }\r\n        } else if (typeof binding.format === 'object') {\r\n          // all formats must match\r\n          if (\r\n            !Object.keys(binding.format).every(name => {\r\n              if (binding.format[name] === true)\r\n                return curContext.format[name] != null;\r\n              if (binding.format[name] === false)\r\n                return curContext.format[name] == null;\r\n              return equal(binding.format[name], curContext.format[name]);\r\n            })\r\n          ) {\r\n            return false;\r\n          }\r\n        }\r\n        if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) {\r\n          return false;\r\n        }\r\n        if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) {\r\n          return false;\r\n        }\r\n        return binding.handler.call(this, range, curContext, binding) !== true;\r\n      });\r\n      if (prevented) {\r\n        evt.preventDefault();\r\n      }\r\n    });\r\n  }\r\n\r\n  handleBackspace(range, context) {\r\n    // Check for astral symbols\r\n    const length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix)\r\n      ? 2\r\n      : 1;\r\n    if (range.index === 0 || this.quill.getLength() <= 1) return;\r\n    let formats = {};\r\n    const [line] = this.quill.getLine(range.index);\r\n    let delta = new Delta().retain(range.index - length).delete(length);\r\n    if (context.offset === 0) {\r\n      // Always deleting newline here, length always 1\r\n      const [prev] = this.quill.getLine(range.index - 1);\r\n      if (prev) {\r\n        const curFormats = line.formats();\r\n        const prevFormats = this.quill.getFormat(range.index - 1, 1);\r\n        formats = AttributeMap.diff(curFormats, prevFormats) || {};\r\n        if (Object.keys(formats).length > 0) {\r\n          // line.length() - 1 targets \\n in line, another -1 for newline being deleted\r\n          const formatDelta = new Delta()\r\n            .retain(range.index + line.length() - 2)\r\n            .retain(1, formats);\r\n          delta = delta.compose(formatDelta);\r\n        }\r\n      }\r\n    }\r\n    this.quill.updateContents(delta, Quill.sources.USER);\r\n    this.quill.focus();\r\n  }\r\n\r\n  handleDelete(range, context) {\r\n    // Check for astral symbols\r\n    const length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix)\r\n      ? 2\r\n      : 1;\r\n    if (range.index >= this.quill.getLength() - length) return;\r\n    let formats = {};\r\n    const [line] = this.quill.getLine(range.index);\r\n    let delta = new Delta().retain(range.index).delete(length);\r\n    if (context.offset >= line.length() - 1) {\r\n      const [next] = this.quill.getLine(range.index + 1);\r\n      if (next) {\r\n        const curFormats = line.formats();\r\n        const nextFormats = this.quill.getFormat(range.index, 1);\r\n        formats = AttributeMap.diff(curFormats, nextFormats) || {};\r\n        if (Object.keys(formats).length > 0) {\r\n          delta = delta.retain(next.length() - 1).retain(1, formats);\r\n        }\r\n      }\r\n    }\r\n    this.quill.updateContents(delta, Quill.sources.USER);\r\n    this.quill.focus();\r\n  }\r\n\r\n  handleDeleteRange(range) {\r\n    const lines = this.quill.getLines(range);\r\n    let formats = {};\r\n    if (lines.length > 1) {\r\n      const firstFormats = lines[0].formats();\r\n      const lastFormats = lines[lines.length - 1].formats();\r\n      formats = AttributeMap.diff(lastFormats, firstFormats) || {};\r\n    }\r\n    this.quill.deleteText(range, Quill.sources.USER);\r\n    if (Object.keys(formats).length > 0) {\r\n      this.quill.formatLine(range.index, 1, formats, Quill.sources.USER);\r\n    }\r\n    this.quill.setSelection(range.index, Quill.sources.SILENT);\r\n    this.quill.focus();\r\n  }\r\n\r\n  handleEnter(range, context) {\r\n    const lineFormats = Object.keys(context.format).reduce(\r\n      (formats, format) => {\r\n        if (\r\n          this.quill.scroll.query(format, Scope.BLOCK) &&\r\n          !Array.isArray(context.format[format])\r\n        ) {\r\n          formats[format] = context.format[format];\r\n        }\r\n        return formats;\r\n      },\r\n      {},\r\n    );\r\n    const delta = new Delta()\r\n      .retain(range.index)\r\n      .delete(range.length)\r\n      .insert('\\n', lineFormats);\r\n    this.quill.updateContents(delta, Quill.sources.USER);\r\n    this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\r\n    this.quill.focus();\r\n\r\n    Object.keys(context.format).forEach(name => {\r\n      if (lineFormats[name] != null) return;\r\n      if (Array.isArray(context.format[name])) return;\r\n      if (name === 'code' || name === 'link') return;\r\n      this.quill.format(name, context.format[name], Quill.sources.USER);\r\n    });\r\n  }\r\n}\r\n\r\nKeyboard.DEFAULTS = {\r\n  bindings: {\r\n    bold: makeFormatHandler('bold'),\r\n    italic: makeFormatHandler('italic'),\r\n    underline: makeFormatHandler('underline'),\r\n    indent: {\r\n      // highlight tab or tab at beginning of list, indent or blockquote\r\n      key: 'Tab',\r\n      format: ['blockquote', 'indent', 'list'],\r\n      handler(range, context) {\r\n        if (context.collapsed && context.offset !== 0) return true;\r\n        this.quill.format('indent', '+1', Quill.sources.USER);\r\n        return false;\r\n      },\r\n    },\r\n    outdent: {\r\n      key: 'Tab',\r\n      shiftKey: true,\r\n      format: ['blockquote', 'indent', 'list'],\r\n      // highlight tab or tab at beginning of list, indent or blockquote\r\n      handler(range, context) {\r\n        if (context.collapsed && context.offset !== 0) return true;\r\n        this.quill.format('indent', '-1', Quill.sources.USER);\r\n        return false;\r\n      },\r\n    },\r\n    'outdent backspace': {\r\n      key: 'Backspace',\r\n      collapsed: true,\r\n      shiftKey: null,\r\n      metaKey: null,\r\n      ctrlKey: null,\r\n      altKey: null,\r\n      format: ['indent', 'list'],\r\n      offset: 0,\r\n      handler(range, context) {\r\n        if (context.format.indent != null) {\r\n          this.quill.format('indent', '-1', Quill.sources.USER);\r\n        } else if (context.format.list != null) {\r\n          this.quill.format('list', false, Quill.sources.USER);\r\n        }\r\n      },\r\n    },\r\n    'indent code-block': makeCodeBlockHandler(true),\r\n    'outdent code-block': makeCodeBlockHandler(false),\r\n    'remove tab': {\r\n      key: 'Tab',\r\n      shiftKey: true,\r\n      collapsed: true,\r\n      prefix: /\\t$/,\r\n      handler(range) {\r\n        this.quill.deleteText(range.index - 1, 1, Quill.sources.USER);\r\n      },\r\n    },\r\n    tab: {\r\n      key: 'Tab',\r\n      handler(range, context) {\r\n        if (context.format.table) return true;\r\n        this.quill.history.cutoff();\r\n        const delta = new Delta()\r\n          .retain(range.index)\r\n          .delete(range.length)\r\n          .insert('\\t');\r\n        this.quill.updateContents(delta, Quill.sources.USER);\r\n        this.quill.history.cutoff();\r\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\r\n        return false;\r\n      },\r\n    },\r\n    'blockquote empty enter': {\r\n      key: 'Enter',\r\n      collapsed: true,\r\n      format: ['blockquote'],\r\n      empty: true,\r\n      handler() {\r\n        this.quill.format('blockquote', false, Quill.sources.USER);\r\n      },\r\n    },\r\n    'list empty enter': {\r\n      key: 'Enter',\r\n      collapsed: true,\r\n      format: ['list'],\r\n      empty: true,\r\n      handler(range, context) {\r\n        const formats = { list: false };\r\n        if (context.format.indent) {\r\n          formats.indent = false;\r\n        }\r\n        this.quill.formatLine(\r\n          range.index,\r\n          range.length,\r\n          formats,\r\n          Quill.sources.USER,\r\n        );\r\n      },\r\n    },\r\n    'checklist enter': {\r\n      key: 'Enter',\r\n      collapsed: true,\r\n      format: { list: 'checked' },\r\n      handler(range) {\r\n        const [line, offset] = this.quill.getLine(range.index);\r\n        const formats = extend({}, line.formats(), { list: 'checked' });\r\n        const delta = new Delta()\r\n          .retain(range.index)\r\n          .insert('\\n', formats)\r\n          .retain(line.length() - offset - 1)\r\n          .retain(1, { list: 'unchecked' });\r\n        this.quill.updateContents(delta, Quill.sources.USER);\r\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\r\n        this.quill.scrollIntoView();\r\n      },\r\n    },\r\n    'header enter': {\r\n      key: 'Enter',\r\n      collapsed: true,\r\n      format: ['header'],\r\n      suffix: /^$/,\r\n      handler(range, context) {\r\n        const [line, offset] = this.quill.getLine(range.index);\r\n        const delta = new Delta()\r\n          .retain(range.index)\r\n          .insert('\\n', context.format)\r\n          .retain(line.length() - offset - 1)\r\n          .retain(1, { header: null });\r\n        this.quill.updateContents(delta, Quill.sources.USER);\r\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\r\n        this.quill.scrollIntoView();\r\n      },\r\n    },\r\n    'table backspace': {\r\n      key: 'Backspace',\r\n      format: ['table'],\r\n      collapsed: true,\r\n      offset: 0,\r\n      handler() {},\r\n    },\r\n    'table delete': {\r\n      key: 'Delete',\r\n      format: ['table'],\r\n      collapsed: true,\r\n      suffix: /^$/,\r\n      handler() {},\r\n    },\r\n    'table enter': {\r\n      key: 'Enter',\r\n      shiftKey: null,\r\n      format: ['table'],\r\n      handler(range) {\r\n        const module = this.quill.getModule('table');\r\n        if (module) {\r\n          const [table, row, cell, offset] = module.getTable(range);\r\n          const shift = tableSide(table, row, cell, offset);\r\n          if (shift == null) return;\r\n          let index = table.offset();\r\n          if (shift < 0) {\r\n            const delta = new Delta().retain(index).insert('\\n');\r\n            this.quill.updateContents(delta, Quill.sources.USER);\r\n            this.quill.setSelection(\r\n              range.index + 1,\r\n              range.length,\r\n              Quill.sources.SILENT,\r\n            );\r\n          } else if (shift > 0) {\r\n            index += table.length();\r\n            const delta = new Delta().retain(index).insert('\\n');\r\n            this.quill.updateContents(delta, Quill.sources.USER);\r\n            this.quill.setSelection(index, Quill.sources.USER);\r\n          }\r\n        }\r\n      },\r\n    },\r\n    'table tab': {\r\n      key: 'Tab',\r\n      shiftKey: null,\r\n      format: ['table'],\r\n      handler(range, context) {\r\n        const { event, line: cell } = context;\r\n        const offset = cell.offset(this.quill.scroll);\r\n        if (event.shiftKey) {\r\n          this.quill.setSelection(offset - 1, Quill.sources.USER);\r\n        } else {\r\n          this.quill.setSelection(offset + cell.length(), Quill.sources.USER);\r\n        }\r\n      },\r\n    },\r\n    'list autofill': {\r\n      key: ' ',\r\n      shiftKey: null,\r\n      collapsed: true,\r\n      format: {\r\n        list: false,\r\n        'code-block': false,\r\n        blockquote: false,\r\n        header: false,\r\n        table: false,\r\n      },\r\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\r\n      handler(range, context) {\r\n        if (this.quill.scroll.query('list') == null) return true;\r\n        const { length } = context.prefix;\r\n        const [line, offset] = this.quill.getLine(range.index);\r\n        if (offset > length) return true;\r\n        let value;\r\n        switch (context.prefix.trim()) {\r\n          case '[]':\r\n          case '[ ]':\r\n            value = 'unchecked';\r\n            break;\r\n          case '[x]':\r\n            value = 'checked';\r\n            break;\r\n          case '-':\r\n          case '*':\r\n            value = 'bullet';\r\n            break;\r\n          default:\r\n            value = 'ordered';\r\n        }\r\n        this.quill.insertText(range.index, ' ', Quill.sources.USER);\r\n        this.quill.history.cutoff();\r\n        const delta = new Delta()\r\n          .retain(range.index - offset)\r\n          .delete(length + 1)\r\n          .retain(line.length() - 2 - offset)\r\n          .retain(1, { list: value });\r\n        this.quill.updateContents(delta, Quill.sources.USER);\r\n        this.quill.history.cutoff();\r\n        this.quill.setSelection(range.index - length, Quill.sources.SILENT);\r\n        return false;\r\n      },\r\n    },\r\n    'code exit': {\r\n      key: 'Enter',\r\n      collapsed: true,\r\n      format: ['code-block'],\r\n      prefix: /^$/,\r\n      suffix: /^\\s*$/,\r\n      handler(range) {\r\n        const [line, offset] = this.quill.getLine(range.index);\r\n        let numLines = 2;\r\n        let cur = line;\r\n        while (\r\n          cur != null &&\r\n          cur.length() <= 1 &&\r\n          cur.formats()['code-block']\r\n        ) {\r\n          cur = cur.prev;\r\n          numLines -= 1;\r\n          // Requisite prev lines are empty\r\n          if (numLines <= 0) {\r\n            const delta = new Delta()\r\n              .retain(range.index + line.length() - offset - 2)\r\n              .retain(1, { 'code-block': null })\r\n              .delete(1);\r\n            this.quill.updateContents(delta, Quill.sources.USER);\r\n            this.quill.setSelection(range.index - 1, Quill.sources.SILENT);\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      },\r\n    },\r\n    'embed left': makeEmbedArrowHandler('ArrowLeft', false),\r\n    'embed left shift': makeEmbedArrowHandler('ArrowLeft', true),\r\n    'embed right': makeEmbedArrowHandler('ArrowRight', false),\r\n    'embed right shift': makeEmbedArrowHandler('ArrowRight', true),\r\n    'table down': makeTableArrowHandler(false),\r\n    'table up': makeTableArrowHandler(true),\r\n  },\r\n};\r\n\r\nfunction makeCodeBlockHandler(indent) {\r\n  return {\r\n    key: 'Tab',\r\n    shiftKey: !indent,\r\n    format: { 'code-block': true },\r\n    handler(range) {\r\n      const CodeBlock = this.quill.scroll.query('code-block');\r\n      const lines =\r\n        range.length === 0\r\n          ? this.quill.getLines(range.index, 1)\r\n          : this.quill.getLines(range);\r\n      let { index, length } = range;\r\n      lines.forEach((line, i) => {\r\n        if (indent) {\r\n          line.insertAt(0, CodeBlock.TAB);\r\n          if (i === 0) {\r\n            index += CodeBlock.TAB.length;\r\n          } else {\r\n            length += CodeBlock.TAB.length;\r\n          }\r\n        } else if (line.domNode.textContent.startsWith(CodeBlock.TAB)) {\r\n          line.deleteAt(0, CodeBlock.TAB.length);\r\n          if (i === 0) {\r\n            index -= CodeBlock.TAB.length;\r\n          } else {\r\n            length -= CodeBlock.TAB.length;\r\n          }\r\n        }\r\n      });\r\n      this.quill.update(Quill.sources.USER);\r\n      this.quill.setSelection(index, length, Quill.sources.SILENT);\r\n    },\r\n  };\r\n}\r\n\r\nfunction makeEmbedArrowHandler(key, shiftKey) {\r\n  const where = key === 'ArrowLeft' ? 'prefix' : 'suffix';\r\n  return {\r\n    key,\r\n    shiftKey,\r\n    altKey: null,\r\n    [where]: /^$/,\r\n    handler(range) {\r\n      let { index } = range;\r\n      if (key === 'ArrowRight') {\r\n        index += range.length + 1;\r\n      }\r\n      const [leaf] = this.quill.getLeaf(index);\r\n      if (!(leaf instanceof EmbedBlot)) return true;\r\n      if (key === 'ArrowLeft') {\r\n        if (shiftKey) {\r\n          this.quill.setSelection(\r\n            range.index - 1,\r\n            range.length + 1,\r\n            Quill.sources.USER,\r\n          );\r\n        } else {\r\n          this.quill.setSelection(range.index - 1, Quill.sources.USER);\r\n        }\r\n      } else if (shiftKey) {\r\n        this.quill.setSelection(\r\n          range.index,\r\n          range.length + 1,\r\n          Quill.sources.USER,\r\n        );\r\n      } else {\r\n        this.quill.setSelection(\r\n          range.index + range.length + 1,\r\n          Quill.sources.USER,\r\n        );\r\n      }\r\n      return false;\r\n    },\r\n  };\r\n}\r\n\r\nfunction makeFormatHandler(format) {\r\n  return {\r\n    key: format[0],\r\n    shortKey: true,\r\n    handler(range, context) {\r\n      this.quill.format(format, !context.format[format], Quill.sources.USER);\r\n    },\r\n  };\r\n}\r\n\r\nfunction makeTableArrowHandler(up) {\r\n  return {\r\n    key: up ? 'ArrowUp' : 'ArrowDown',\r\n    collapsed: true,\r\n    format: ['table'],\r\n    handler(range, context) {\r\n      // TODO move to table module\r\n      const key = up ? 'prev' : 'next';\r\n      const cell = context.line;\r\n      const targetRow = cell.parent[key];\r\n      if (targetRow != null) {\r\n        if (targetRow.statics.blotName === 'table-row') {\r\n          let targetCell = targetRow.children.head;\r\n          let cur = cell;\r\n          while (cur.prev != null) {\r\n            cur = cur.prev;\r\n            targetCell = targetCell.next;\r\n          }\r\n          const index =\r\n            targetCell.offset(this.quill.scroll) +\r\n            Math.min(context.offset, targetCell.length() - 1);\r\n          this.quill.setSelection(index, 0, Quill.sources.USER);\r\n        }\r\n      } else {\r\n        const targetLine = cell.table()[key];\r\n        if (targetLine != null) {\r\n          if (up) {\r\n            this.quill.setSelection(\r\n              targetLine.offset(this.quill.scroll) + targetLine.length() - 1,\r\n              0,\r\n              Quill.sources.USER,\r\n            );\r\n          } else {\r\n            this.quill.setSelection(\r\n              targetLine.offset(this.quill.scroll),\r\n              0,\r\n              Quill.sources.USER,\r\n            );\r\n          }\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n  };\r\n}\r\n\r\nfunction normalize(binding) {\r\n  if (typeof binding === 'string' || typeof binding === 'number') {\r\n    binding = { key: binding };\r\n  } else if (typeof binding === 'object') {\r\n    binding = clone(binding, false);\r\n  } else {\r\n    return null;\r\n  }\r\n  if (binding.shortKey) {\r\n    binding[SHORTKEY] = binding.shortKey;\r\n    delete binding.shortKey;\r\n  }\r\n  return binding;\r\n}\r\n\r\nfunction tableSide(table, row, cell, offset) {\r\n  if (row.prev == null && row.next == null) {\r\n    if (cell.prev == null && cell.next == null) {\r\n      return offset === 0 ? -1 : 1;\r\n    }\r\n    return cell.prev == null ? -1 : 1;\r\n  }\r\n  if (row.prev == null) {\r\n    return -1;\r\n  }\r\n  if (row.next == null) {\r\n    return 1;\r\n  }\r\n  return null;\r\n}\r\n\r\nexport { Keyboard as default, SHORTKEY, normalize };\r\n","import Delta from 'quill-delta';\r\nimport { ClassAttributor, Scope } from 'parchment';\r\nimport Inline from '../blots/inline';\r\nimport Quill from '../core/quill';\r\nimport Module from '../core/module';\r\nimport { blockDelta } from '../blots/block';\r\nimport BreakBlot from '../blots/break';\r\nimport CursorBlot from '../blots/cursor';\r\nimport TextBlot, { escapeText } from '../blots/text';\r\nimport CodeBlock, { CodeBlockContainer } from '../formats/code';\r\nimport { traverse } from './clipboard';\r\n\r\nconst TokenAttributor = new ClassAttributor('code-token', 'hljs', {\r\n  scope: Scope.INLINE,\r\n});\r\nclass CodeToken extends Inline {\r\n  static formats(node, scroll) {\r\n    while (node != null && node !== scroll.domNode) {\r\n      if (node.classList.contains(CodeBlock.className)) {\r\n        return super.formats(node, scroll);\r\n      }\r\n      node = node.parentNode;\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  constructor(scroll, domNode, value) {\r\n    super(scroll, domNode, value);\r\n    TokenAttributor.add(this.domNode, value);\r\n  }\r\n\r\n  format(format, value) {\r\n    if (format !== CodeToken.blotName) {\r\n      super.format(format, value);\r\n    } else if (value) {\r\n      TokenAttributor.add(this.domNode, value);\r\n    } else {\r\n      TokenAttributor.remove(this.domNode);\r\n      this.domNode.classList.remove(this.statics.className);\r\n    }\r\n  }\r\n\r\n  optimize(...args) {\r\n    super.optimize(...args);\r\n    if (!TokenAttributor.value(this.domNode)) {\r\n      this.unwrap();\r\n    }\r\n  }\r\n}\r\nCodeToken.blotName = 'code-token';\r\nCodeToken.className = 'ql-token';\r\n\r\nclass SyntaxCodeBlock extends CodeBlock {\r\n  static create(value) {\r\n    const domNode = super.create(value);\r\n    if (typeof value === 'string') {\r\n      domNode.setAttribute('data-language', value);\r\n    }\r\n    return domNode;\r\n  }\r\n\r\n  static formats(domNode) {\r\n    return domNode.getAttribute('data-language') || 'plain';\r\n  }\r\n\r\n  static register() {} // Syntax module will register\r\n\r\n  format(name, value) {\r\n    if (name === this.statics.blotName && value) {\r\n      this.domNode.setAttribute('data-language', value);\r\n    } else {\r\n      super.format(name, value);\r\n    }\r\n  }\r\n\r\n  replaceWith(name, value) {\r\n    this.formatAt(0, this.length(), CodeToken.blotName, false);\r\n    return super.replaceWith(name, value);\r\n  }\r\n}\r\n\r\nclass SyntaxCodeBlockContainer extends CodeBlockContainer {\r\n  attach() {\r\n    super.attach();\r\n    this.forceNext = false;\r\n    this.scroll.emitMount(this);\r\n  }\r\n\r\n  format(name, value) {\r\n    if (name === SyntaxCodeBlock.blotName) {\r\n      this.forceNext = true;\r\n      this.children.forEach(child => {\r\n        child.format(name, value);\r\n      });\r\n    }\r\n  }\r\n\r\n  formatAt(index, length, name, value) {\r\n    if (name === SyntaxCodeBlock.blotName) {\r\n      this.forceNext = true;\r\n    }\r\n    super.formatAt(index, length, name, value);\r\n  }\r\n\r\n  highlight(highlight, forced = false) {\r\n    if (this.children.head == null) return;\r\n    const nodes = Array.from(this.domNode.childNodes).filter(\r\n      node => node !== this.uiNode,\r\n    );\r\n    const text = `${nodes.map(node => node.textContent).join('\\n')}\\n`;\r\n    const language = SyntaxCodeBlock.formats(this.children.head.domNode);\r\n    if (forced || this.forceNext || this.cachedText !== text) {\r\n      if (text.trim().length > 0 || this.cachedText == null) {\r\n        const oldDelta = this.children.reduce((delta, child) => {\r\n          return delta.concat(blockDelta(child, false));\r\n        }, new Delta());\r\n        const delta = highlight(text, language);\r\n        oldDelta.diff(delta).reduce((index, { retain, attributes }) => {\r\n          // Should be all retains\r\n          if (!retain) return index;\r\n          if (attributes) {\r\n            Object.keys(attributes).forEach(format => {\r\n              if (\r\n                [SyntaxCodeBlock.blotName, CodeToken.blotName].includes(format)\r\n              ) {\r\n                this.formatAt(index, retain, format, attributes[format]);\r\n              }\r\n            });\r\n          }\r\n          return index + retain;\r\n        }, 0);\r\n      }\r\n      this.cachedText = text;\r\n      this.forceNext = false;\r\n    }\r\n  }\r\n\r\n  optimize(context) {\r\n    super.optimize(context);\r\n    if (\r\n      this.parent != null &&\r\n      this.children.head != null &&\r\n      this.uiNode != null\r\n    ) {\r\n      const language = SyntaxCodeBlock.formats(this.children.head.domNode);\r\n      if (language !== this.uiNode.value) {\r\n        this.uiNode.value = language;\r\n      }\r\n    }\r\n  }\r\n}\r\nSyntaxCodeBlockContainer.allowedChildren = [SyntaxCodeBlock];\r\nSyntaxCodeBlock.requiredContainer = SyntaxCodeBlockContainer;\r\nSyntaxCodeBlock.allowedChildren = [CodeToken, CursorBlot, TextBlot, BreakBlot];\r\n\r\nclass Syntax extends Module {\r\n  static register() {\r\n    Quill.register(CodeToken, true);\r\n    Quill.register(SyntaxCodeBlock, true);\r\n    Quill.register(SyntaxCodeBlockContainer, true);\r\n  }\r\n\r\n  constructor(quill, options) {\r\n    super(quill, options);\r\n    if (this.options.hljs == null) {\r\n      throw new Error(\r\n        'Syntax module requires highlight.js. Please include the library on the page before Quill.',\r\n      );\r\n    }\r\n    this.highlightBlot = this.highlightBlot.bind(this);\r\n    this.initListener();\r\n    this.initTimer();\r\n  }\r\n\r\n  initListener() {\r\n    this.quill.on(Quill.events.SCROLL_BLOT_MOUNT, blot => {\r\n      if (!(blot instanceof SyntaxCodeBlockContainer)) return;\r\n      const select = this.quill.root.ownerDocument.createElement('select');\r\n      this.options.languages.forEach(({ key, label }) => {\r\n        const option = select.ownerDocument.createElement('option');\r\n        option.textContent = label;\r\n        option.setAttribute('value', key);\r\n        select.appendChild(option);\r\n      });\r\n      select.addEventListener('change', () => {\r\n        blot.format(SyntaxCodeBlock.blotName, select.value);\r\n        this.quill.root.focus(); // Prevent scrolling\r\n        this.highlight(blot, true);\r\n      });\r\n      if (blot.uiNode == null) {\r\n        blot.attachUI(select);\r\n        if (blot.children.head) {\r\n          select.value = SyntaxCodeBlock.formats(blot.children.head.domNode);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  initTimer() {\r\n    let timer = null;\r\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\r\n      clearTimeout(timer);\r\n      timer = setTimeout(() => {\r\n        this.highlight();\r\n        timer = null;\r\n      }, this.options.interval);\r\n    });\r\n  }\r\n\r\n  highlight(blot = null, force = false) {\r\n    if (this.quill.selection.composing) return;\r\n    this.quill.update(Quill.sources.USER);\r\n    const range = this.quill.getSelection();\r\n    const blots =\r\n      blot == null\r\n        ? this.quill.scroll.descendants(SyntaxCodeBlockContainer)\r\n        : [blot];\r\n    blots.forEach(container => {\r\n      container.highlight(this.highlightBlot, force);\r\n    });\r\n    this.quill.update(Quill.sources.SILENT);\r\n    if (range != null) {\r\n      this.quill.setSelection(range, Quill.sources.SILENT);\r\n    }\r\n  }\r\n\r\n  highlightBlot(text, language = 'plain') {\r\n    if (language === 'plain') {\r\n      return escapeText(text)\r\n        .split('\\n')\r\n        .reduce((delta, line, i) => {\r\n          if (i !== 0) {\r\n            delta.insert('\\n', { [CodeBlock.blotName]: language });\r\n          }\r\n          return delta.insert(line);\r\n        }, new Delta());\r\n    }\r\n    const container = this.quill.root.ownerDocument.createElement('div');\r\n    container.classList.add(CodeBlock.className);\r\n    container.innerHTML = this.options.hljs.highlight(language, text).value;\r\n    return traverse(\r\n      this.quill.scroll,\r\n      container,\r\n      [\r\n        (node, delta) => {\r\n          const value = TokenAttributor.value(node);\r\n          if (value) {\r\n            return delta.compose(\r\n              new Delta().retain(delta.length(), {\r\n                [CodeToken.blotName]: value,\r\n              }),\r\n            );\r\n          }\r\n          return delta;\r\n        },\r\n      ],\r\n      [\r\n        (node, delta) => {\r\n          return node.data.split('\\n').reduce((memo, nodeText, i) => {\r\n            if (i !== 0) memo.insert('\\n', { [CodeBlock.blotName]: language });\r\n            return memo.insert(nodeText);\r\n          }, delta);\r\n        },\r\n      ],\r\n      new WeakMap(),\r\n    );\r\n  }\r\n}\r\nSyntax.DEFAULTS = {\r\n  hljs: (() => {\r\n    return window.hljs;\r\n  })(),\r\n  interval: 1000,\r\n  languages: [\r\n    { key: 'plain', label: 'Plain' },\r\n    { key: 'bash', label: 'Bash' },\r\n    { key: 'cpp', label: 'C++' },\r\n    { key: 'cs', label: 'C#' },\r\n    { key: 'css', label: 'CSS' },\r\n    { key: 'diff', label: 'Diff' },\r\n    { key: 'xml', label: 'HTML/XML' },\r\n    { key: 'java', label: 'Java' },\r\n    { key: 'javascript', label: 'Javascript' },\r\n    { key: 'markdown', label: 'Markdown' },\r\n    { key: 'php', label: 'PHP' },\r\n    { key: 'python', label: 'Python' },\r\n    { key: 'ruby', label: 'Ruby' },\r\n    { key: 'sql', label: 'SQL' },\r\n  ],\r\n};\r\n\r\nexport { SyntaxCodeBlock as CodeBlock, CodeToken, Syntax as default };\r\n","import Delta from 'quill-delta';\r\nimport Quill from '../core/quill';\r\nimport Module from '../core/module';\r\nimport {\r\n  TableCell,\r\n  TableRow,\r\n  TableBody,\r\n  TableContainer,\r\n  tableId,\r\n} from '../formats/table';\r\n\r\nclass Table extends Module {\r\n  static register() {\r\n    Quill.register(TableCell);\r\n    Quill.register(TableRow);\r\n    Quill.register(TableBody);\r\n    Quill.register(TableContainer);\r\n  }\r\n\r\n  constructor(...args) {\r\n    super(...args);\r\n    this.listenBalanceCells();\r\n  }\r\n\r\n  balanceTables() {\r\n    this.quill.scroll.descendants(TableContainer).forEach(table => {\r\n      table.balanceCells();\r\n    });\r\n  }\r\n\r\n  deleteColumn() {\r\n    const [table, , cell] = this.getTable();\r\n    if (cell == null) return;\r\n    table.deleteColumn(cell.cellOffset());\r\n    this.quill.update(Quill.sources.USER);\r\n  }\r\n\r\n  deleteRow() {\r\n    const [, row] = this.getTable();\r\n    if (row == null) return;\r\n    row.remove();\r\n    this.quill.update(Quill.sources.USER);\r\n  }\r\n\r\n  deleteTable() {\r\n    const [table] = this.getTable();\r\n    if (table == null) return;\r\n    const offset = table.offset();\r\n    table.remove();\r\n    this.quill.update(Quill.sources.USER);\r\n    this.quill.setSelection(offset, Quill.sources.SILENT);\r\n  }\r\n\r\n  getTable(range = this.quill.getSelection()) {\r\n    if (range == null) return [null, null, null, -1];\r\n    const [cell, offset] = this.quill.getLine(range.index);\r\n    if (cell == null || cell.statics.blotName !== TableCell.blotName) {\r\n      return [null, null, null, -1];\r\n    }\r\n    const row = cell.parent;\r\n    const table = row.parent.parent;\r\n    return [table, row, cell, offset];\r\n  }\r\n\r\n  insertColumn(offset) {\r\n    const range = this.quill.getSelection();\r\n    const [table, row, cell] = this.getTable(range);\r\n    if (cell == null) return;\r\n    const column = cell.cellOffset();\r\n    table.insertColumn(column + offset);\r\n    this.quill.update(Quill.sources.USER);\r\n    let shift = row.rowOffset();\r\n    if (offset === 0) {\r\n      shift += 1;\r\n    }\r\n    this.quill.setSelection(\r\n      range.index + shift,\r\n      range.length,\r\n      Quill.sources.SILENT,\r\n    );\r\n  }\r\n\r\n  insertColumnLeft() {\r\n    this.insertColumn(0);\r\n  }\r\n\r\n  insertColumnRight() {\r\n    this.insertColumn(1);\r\n  }\r\n\r\n  insertRow(offset) {\r\n    const range = this.quill.getSelection();\r\n    const [table, row, cell] = this.getTable(range);\r\n    if (cell == null) return;\r\n    const index = row.rowOffset();\r\n    table.insertRow(index + offset);\r\n    this.quill.update(Quill.sources.USER);\r\n    if (offset > 0) {\r\n      this.quill.setSelection(range, Quill.sources.SILENT);\r\n    } else {\r\n      this.quill.setSelection(\r\n        range.index + row.children.length,\r\n        range.length,\r\n        Quill.sources.SILENT,\r\n      );\r\n    }\r\n  }\r\n\r\n  insertRowAbove() {\r\n    this.insertRow(0);\r\n  }\r\n\r\n  insertRowBelow() {\r\n    this.insertRow(1);\r\n  }\r\n\r\n  insertTable(rows, columns) {\r\n    const range = this.quill.getSelection();\r\n    if (range == null) return;\r\n    const delta = new Array(rows).fill(0).reduce(memo => {\r\n      const text = new Array(columns).fill('\\n').join('');\r\n      return memo.insert(text, { table: tableId() });\r\n    }, new Delta().retain(range.index));\r\n    this.quill.updateContents(delta, Quill.sources.USER);\r\n    this.quill.setSelection(range.index, Quill.sources.SILENT);\r\n    this.balanceTables();\r\n  }\r\n\r\n  listenBalanceCells() {\r\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, mutations => {\r\n      mutations.some(mutation => {\r\n        if (['TD', 'TR', 'TBODY', 'TABLE'].includes(mutation.target.tagName)) {\r\n          this.quill.once(Quill.events.TEXT_CHANGE, (delta, old, source) => {\r\n            if (source !== Quill.sources.USER) return;\r\n            this.balanceTables();\r\n          });\r\n          return true;\r\n        }\r\n        return false;\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport default Table;\r\n","import Delta from 'quill-delta';\r\nimport { EmbedBlot, Scope } from 'parchment';\r\nimport Quill from '../core/quill';\r\nimport logger from '../core/logger';\r\nimport Module from '../core/module';\r\n\r\nconst debug = logger('quill:toolbar');\r\n\r\nclass Toolbar extends Module {\r\n  constructor(quill, options) {\r\n    super(quill, options);\r\n    if (Array.isArray(this.options.container)) {\r\n      const container = document.createElement('div');\r\n      addControls(container, this.options.container);\r\n      quill.container.parentNode.insertBefore(container, quill.container);\r\n      this.container = container;\r\n    } else if (typeof this.options.container === 'string') {\r\n      this.container = document.querySelector(this.options.container);\r\n    } else {\r\n      this.container = this.options.container;\r\n    }\r\n    if (!(this.container instanceof HTMLElement)) {\r\n      return debug.error('Container required for toolbar', this.options);\r\n    }\r\n    this.container.classList.add('ql-toolbar');\r\n    this.controls = [];\r\n    this.handlers = {};\r\n    Object.keys(this.options.handlers).forEach(format => {\r\n      this.addHandler(format, this.options.handlers[format]);\r\n    });\r\n    Array.from(this.container.querySelectorAll('button, select')).forEach(\r\n      input => {\r\n        this.attach(input);\r\n      },\r\n    );\r\n    this.quill.on(Quill.events.EDITOR_CHANGE, (type, range) => {\r\n      if (type === Quill.events.SELECTION_CHANGE) {\r\n        this.update(range);\r\n      }\r\n    });\r\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\r\n      const [range] = this.quill.selection.getRange(); // quill.getSelection triggers update\r\n      this.update(range);\r\n    });\r\n  }\r\n\r\n  addHandler(format, handler) {\r\n    this.handlers[format] = handler;\r\n  }\r\n\r\n  attach(input) {\r\n    let format = Array.from(input.classList).find(className => {\r\n      return className.indexOf('ql-') === 0;\r\n    });\r\n    if (!format) return;\r\n    format = format.slice('ql-'.length);\r\n    if (input.tagName === 'BUTTON') {\r\n      input.setAttribute('type', 'button');\r\n    }\r\n    if (\r\n      this.handlers[format] == null &&\r\n      this.quill.scroll.query(format) == null\r\n    ) {\r\n      debug.warn('ignoring attaching to nonexistent format', format, input);\r\n      return;\r\n    }\r\n    const eventName = input.tagName === 'SELECT' ? 'change' : 'click';\r\n    input.addEventListener(eventName, e => {\r\n      let value;\r\n      if (input.tagName === 'SELECT') {\r\n        if (input.selectedIndex < 0) return;\r\n        const selected = input.options[input.selectedIndex];\r\n        if (selected.hasAttribute('selected')) {\r\n          value = false;\r\n        } else {\r\n          value = selected.value || false;\r\n        }\r\n      } else {\r\n        if (input.classList.contains('ql-active')) {\r\n          value = false;\r\n        } else {\r\n          value = input.value || !input.hasAttribute('value');\r\n        }\r\n        e.preventDefault();\r\n      }\r\n      this.quill.focus();\r\n      const [range] = this.quill.selection.getRange();\r\n      if (this.handlers[format] != null) {\r\n        this.handlers[format].call(this, value);\r\n      } else if (\r\n        this.quill.scroll.query(format).prototype instanceof EmbedBlot\r\n      ) {\r\n        value = prompt(`Enter ${format}`); // eslint-disable-line no-alert\r\n        if (!value) return;\r\n        this.quill.updateContents(\r\n          new Delta()\r\n            .retain(range.index)\r\n            .delete(range.length)\r\n            .insert({ [format]: value }),\r\n          Quill.sources.USER,\r\n        );\r\n      } else {\r\n        this.quill.format(format, value, Quill.sources.USER);\r\n      }\r\n      this.update(range);\r\n    });\r\n    this.controls.push([format, input]);\r\n  }\r\n\r\n  update(range) {\r\n    const formats = range == null ? {} : this.quill.getFormat(range);\r\n    this.controls.forEach(pair => {\r\n      const [format, input] = pair;\r\n      if (input.tagName === 'SELECT') {\r\n        let option;\r\n        if (range == null) {\r\n          option = null;\r\n        } else if (formats[format] == null) {\r\n          option = input.querySelector('option[selected]');\r\n        } else if (!Array.isArray(formats[format])) {\r\n          let value = formats[format];\r\n          if (typeof value === 'string') {\r\n            value = value.replace(/\"/g, '\\\\\"');\r\n          }\r\n          option = input.querySelector(`option[value=\"${value}\"]`);\r\n        }\r\n        if (option == null) {\r\n          input.value = ''; // TODO make configurable?\r\n          input.selectedIndex = -1;\r\n        } else {\r\n          option.selected = true;\r\n        }\r\n      } else if (range == null) {\r\n        input.classList.remove('ql-active');\r\n      } else if (input.hasAttribute('value')) {\r\n        // both being null should match (default values)\r\n        // '1' should match with 1 (headers)\r\n        const isActive =\r\n          formats[format] === input.getAttribute('value') ||\r\n          (formats[format] != null &&\r\n            formats[format].toString() === input.getAttribute('value')) ||\r\n          (formats[format] == null && !input.getAttribute('value'));\r\n        input.classList.toggle('ql-active', isActive);\r\n      } else {\r\n        input.classList.toggle('ql-active', formats[format] != null);\r\n      }\r\n    });\r\n  }\r\n}\r\nToolbar.DEFAULTS = {};\r\n\r\nfunction addButton(container, format, value) {\r\n  const input = document.createElement('button');\r\n  input.setAttribute('type', 'button');\r\n  input.classList.add(`ql-${format}`);\r\n  if (value != null) {\r\n    input.value = value;\r\n  }\r\n  container.appendChild(input);\r\n}\r\n\r\nfunction addControls(container, groups) {\r\n  if (!Array.isArray(groups[0])) {\r\n    groups = [groups];\r\n  }\r\n  groups.forEach(controls => {\r\n    const group = document.createElement('span');\r\n    group.classList.add('ql-formats');\r\n    controls.forEach(control => {\r\n      if (typeof control === 'string') {\r\n        addButton(group, control);\r\n      } else {\r\n        const format = Object.keys(control)[0];\r\n        const value = control[format];\r\n        if (Array.isArray(value)) {\r\n          addSelect(group, format, value);\r\n        } else {\r\n          addButton(group, format, value);\r\n        }\r\n      }\r\n    });\r\n    container.appendChild(group);\r\n  });\r\n}\r\n\r\nfunction addSelect(container, format, values) {\r\n  const input = document.createElement('select');\r\n  input.classList.add(`ql-${format}`);\r\n  values.forEach(value => {\r\n    const option = document.createElement('option');\r\n    if (value !== false) {\r\n      option.setAttribute('value', value);\r\n    } else {\r\n      option.setAttribute('selected', 'selected');\r\n    }\r\n    input.appendChild(option);\r\n  });\r\n  container.appendChild(input);\r\n}\r\n\r\nToolbar.DEFAULTS = {\r\n  container: null,\r\n  handlers: {\r\n    clean() {\r\n      const range = this.quill.getSelection();\r\n      if (range == null) return;\r\n      if (range.length === 0) {\r\n        const formats = this.quill.getFormat();\r\n        Object.keys(formats).forEach(name => {\r\n          // Clean functionality in existing apps only clean inline formats\r\n          if (this.quill.scroll.query(name, Scope.INLINE) != null) {\r\n            this.quill.format(name, false, Quill.sources.USER);\r\n          }\r\n        });\r\n      } else {\r\n        this.quill.removeFormat(range, Quill.sources.USER);\r\n      }\r\n    },\r\n    direction(value) {\r\n      const { align } = this.quill.getFormat();\r\n      if (value === 'rtl' && align == null) {\r\n        this.quill.format('align', 'right', Quill.sources.USER);\r\n      } else if (!value && align === 'right') {\r\n        this.quill.format('align', false, Quill.sources.USER);\r\n      }\r\n      this.quill.format('direction', value, Quill.sources.USER);\r\n    },\r\n    indent(value) {\r\n      const range = this.quill.getSelection();\r\n      const formats = this.quill.getFormat(range);\r\n      const indent = parseInt(formats.indent || 0, 10);\r\n      if (value === '+1' || value === '-1') {\r\n        let modifier = value === '+1' ? 1 : -1;\r\n        if (formats.direction === 'rtl') modifier *= -1;\r\n        this.quill.format('indent', indent + modifier, Quill.sources.USER);\r\n      }\r\n    },\r\n    link(value) {\r\n      if (value === true) {\r\n        value = prompt('Enter link URL:'); // eslint-disable-line no-alert\r\n      }\r\n      this.quill.format('link', value, Quill.sources.USER);\r\n    },\r\n    list(value) {\r\n      const range = this.quill.getSelection();\r\n      const formats = this.quill.getFormat(range);\r\n      if (value === 'check') {\r\n        if (formats.list === 'checked' || formats.list === 'unchecked') {\r\n          this.quill.format('list', false, Quill.sources.USER);\r\n        } else {\r\n          this.quill.format('list', 'unchecked', Quill.sources.USER);\r\n        }\r\n      } else {\r\n        this.quill.format('list', value, Quill.sources.USER);\r\n      }\r\n    },\r\n  },\r\n};\r\n\r\nexport { Toolbar as default, addControls };\r\n","import Delta from 'quill-delta';\r\nimport Emitter from '../core/emitter';\r\nimport Module from '../core/module';\r\n\r\nclass Uploader extends Module {\r\n  constructor(quill, options) {\r\n    super(quill, options);\r\n    quill.root.addEventListener('drop', e => {\r\n      e.preventDefault();\r\n      let native;\r\n      if (document.caretRangeFromPoint) {\r\n        native = document.caretRangeFromPoint(e.clientX, e.clientY);\r\n      } else if (document.caretPositionFromPoint) {\r\n        const position = document.caretPositionFromPoint(e.clientX, e.clientY);\r\n        native = document.createRange();\r\n        native.setStart(position.offsetNode, position.offset);\r\n        native.setEnd(position.offsetNode, position.offset);\r\n      } else {\r\n        return;\r\n      }\r\n      const normalized = quill.selection.normalizeNative(native);\r\n      const range = quill.selection.normalizedToRange(normalized);\r\n      this.upload(range, e.dataTransfer.files);\r\n    });\r\n  }\r\n\r\n  upload(range, files) {\r\n    const uploads = [];\r\n    Array.from(files).forEach(file => {\r\n      if (file && this.options.mimetypes.includes(file.type)) {\r\n        uploads.push(file);\r\n      }\r\n    });\r\n    if (uploads.length > 0) {\r\n      this.options.handler.call(this, range, uploads);\r\n    }\r\n  }\r\n}\r\n\r\nUploader.DEFAULTS = {\r\n  mimetypes: ['image/png', 'image/jpeg'],\r\n  handler(range, files) {\r\n    const promises = files.map(file => {\r\n      return new Promise(resolve => {\r\n        const reader = new FileReader();\r\n        reader.onload = e => {\r\n          resolve(e.target.result);\r\n        };\r\n        reader.readAsDataURL(file);\r\n      });\r\n    });\r\n    Promise.all(promises).then(images => {\r\n      const update = images.reduce((delta, image) => {\r\n        return delta.insert({ image });\r\n      }, new Delta().retain(range.index).delete(range.length));\r\n      this.quill.updateContents(update, Emitter.sources.USER);\r\n      this.quill.setSelection(\r\n        range.index + images.length,\r\n        Emitter.sources.SILENT,\r\n      );\r\n    });\r\n  },\r\n};\r\n\r\nexport default Uploader;\r\n","var clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int|Object} [cursor_pos] Edit position in text1 or object with more info\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos, _fix_unicode) {\n  // Check for equality\n  if (text1 === text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  if (cursor_pos != null) {\n    var editdiff = find_cursor_edit_diff(text1, text2, cursor_pos);\n    if (editdiff) {\n      return editdiff;\n    }\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs, _fix_unicode);\n  return diffs;\n};\n\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i !== -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [\n      [DIFF_INSERT, longtext.substring(0, i)],\n      [DIFF_EQUAL, shorttext],\n      [DIFF_INSERT, longtext.substring(i + shorttext.length)]\n    ];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length === 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n};\n\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = (delta % 2 !== 0);\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 === -d || (k1 !== d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (\n        x1 < text1_length && y1 < text2_length &&\n        text1.charAt(x1) === text2.charAt(y1)\n      ) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] !== -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 === -d || (k2 !== d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (\n        x2 < text1_length && y2 < text2_length &&\n        text1.charAt(text1_length - x2 - 1) === text2.charAt(text2_length - y2 - 1)\n      ) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] !== -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n};\n\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n};\n\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) !== text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(pointerstart, pointermid) ==\n      text2.substring(pointerstart, pointermid)\n    ) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_start(text1.charCodeAt(pointermid - 1))) {\n    pointermid--;\n  }\n\n  return pointermid;\n};\n\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.slice(-1) !== text2.slice(-1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n      text2.substring(text2.length - pointermid, text2.length - pointerend)\n    ) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_end(text1.charCodeAt(text1.length - pointermid))) {\n    pointermid--;\n  }\n\n  return pointermid;\n};\n\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null;  // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) !== -1) {\n      var prefixLength = diff_commonPrefix(\n        longtext.substring(i), shorttext.substring(j));\n      var suffixLength = diff_commonSuffix(\n        longtext.substring(0, i), shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(\n          j - suffixLength, j) + shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [\n        best_longtext_a, best_longtext_b,\n        best_shorttext_a, best_shorttext_b, best_common\n      ];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext, Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n * @param {boolean} fix_unicode Whether to normalize to a unicode-correct diff\n */\nfunction diff_cleanupMerge(diffs, fix_unicode) {\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n      diffs.splice(pointer, 1);\n      continue;\n    }\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        var previous_equality = pointer - count_insert - count_delete - 1;\n        if (fix_unicode) {\n          // prevent splitting of unicode surrogate pairs.  when fix_unicode is true,\n          // we assume that the old and new text in the diff are complete and correct\n          // unicode-encoded JS strings, but the tuple boundaries may fall between\n          // surrogate pairs.  we fix this by shaving off stray surrogates from the end\n          // of the previous equality and the beginning of this equality.  this may create\n          // empty equalities or a common prefix or suffix.  for example, if AB and AC are\n          // emojis, `[[0, 'A'], [-1, 'BA'], [0, 'C']]` would turn into deleting 'ABAC' and\n          // inserting 'AC', and then the common suffix 'AC' will be eliminated.  in this\n          // particular case, both equalities go away, we absorb any previous inequalities,\n          // and we keep scanning for the next equality before rewriting the tuples.\n          if (previous_equality >= 0 && ends_with_pair_start(diffs[previous_equality][1])) {\n            var stray = diffs[previous_equality][1].slice(-1);\n            diffs[previous_equality][1] = diffs[previous_equality][1].slice(0, -1);\n            text_delete = stray + text_delete;\n            text_insert = stray + text_insert;\n            if (!diffs[previous_equality][1]) {\n              // emptied out previous equality, so delete it and include previous delete/insert\n              diffs.splice(previous_equality, 1);\n              pointer--;\n              var k = previous_equality - 1;\n              if (diffs[k] && diffs[k][0] === DIFF_INSERT) {\n                count_insert++;\n                text_insert = diffs[k][1] + text_insert;\n                k--;\n              }\n              if (diffs[k] && diffs[k][0] === DIFF_DELETE) {\n                count_delete++;\n                text_delete = diffs[k][1] + text_delete;\n                k--;\n              }\n              previous_equality = k;\n            }\n          }\n          if (starts_with_pair_end(diffs[pointer][1])) {\n            var stray = diffs[pointer][1].charAt(0);\n            diffs[pointer][1] = diffs[pointer][1].slice(1);\n            text_delete += stray;\n            text_insert += stray;\n          }\n        }\n        if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n          // for empty equality not at end, wait for next equality\n          diffs.splice(pointer, 1);\n          break;\n        }\n        if (text_delete.length > 0 || text_insert.length > 0) {\n          // note that diff_commonPrefix and diff_commonSuffix are unicode-aware\n          if (text_delete.length > 0 && text_insert.length > 0) {\n            // Factor out any common prefixes.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if (previous_equality >= 0) {\n                diffs[previous_equality][1] += text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, [DIFF_EQUAL, text_insert.substring(0, commonlength)]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixes.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] =\n                text_insert.substring(text_insert.length - commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length - commonlength);\n              text_delete = text_delete.substring(0, text_delete.length - commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          var n = count_insert + count_delete;\n          if (text_delete.length === 0 && text_insert.length === 0) {\n            diffs.splice(pointer - n, n);\n            pointer = pointer - n;\n          } else if (text_delete.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_INSERT, text_insert]);\n            pointer = pointer - n + 1;\n          } else if (text_insert.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_DELETE, text_delete]);\n            pointer = pointer - n + 1;\n          } else {\n            diffs.splice(pointer - n, n, [DIFF_DELETE, text_delete], [DIFF_INSERT, text_insert]);\n            pointer = pointer - n + 2;\n          }\n        }\n        if (pointer !== 0 && diffs[pointer - 1][0] === DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] === DIFF_EQUAL &&\n      diffs[pointer + 1][0] === DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n        diffs[pointer - 1][1].length) === diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n          diffs[pointer][1].substring(0, diffs[pointer][1].length -\n            diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n        diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n          diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n          diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs, fix_unicode);\n  }\n};\n\nfunction is_surrogate_pair_start(charCode) {\n  return charCode >= 0xD800 && charCode <= 0xDBFF;\n}\n\nfunction is_surrogate_pair_end(charCode) {\n  return charCode >= 0xDC00 && charCode <= 0xDFFF;\n}\n\nfunction starts_with_pair_end(str) {\n  return is_surrogate_pair_end(str.charCodeAt(0));\n}\n\nfunction ends_with_pair_start(str) {\n  return is_surrogate_pair_start(str.charCodeAt(str.length - 1));\n}\n\nfunction remove_empty_tuples(tuples) {\n  var ret = [];\n  for (var i = 0; i < tuples.length; i++) {\n    if (tuples[i][1].length > 0) {\n      ret.push(tuples[i]);\n    }\n  }\n  return ret;\n}\n\nfunction make_edit_splice(before, oldMiddle, newMiddle, after) {\n  if (ends_with_pair_start(before) || starts_with_pair_end(after)) {\n    return null;\n  }\n  return remove_empty_tuples([\n    [DIFF_EQUAL, before],\n    [DIFF_DELETE, oldMiddle],\n    [DIFF_INSERT, newMiddle],\n    [DIFF_EQUAL, after]\n  ]);\n}\n\nfunction find_cursor_edit_diff(oldText, newText, cursor_pos) {\n  // note: this runs after equality check has ruled out exact equality\n  var oldRange = typeof cursor_pos === 'number' ?\n    { index: cursor_pos, length: 0 } : cursor_pos.oldRange;\n  var newRange = typeof cursor_pos === 'number' ?\n    null : cursor_pos.newRange;\n  // take into account the old and new selection to generate the best diff\n  // possible for a text edit.  for example, a text change from \"xxx\" to \"xx\"\n  // could be a delete or forwards-delete of any one of the x's, or the\n  // result of selecting two of the x's and typing \"x\".\n  var oldLength = oldText.length;\n  var newLength = newText.length;\n  if (oldRange.length === 0 && (newRange === null || newRange.length === 0)) {\n    // see if we have an insert or delete before or after cursor\n    var oldCursor = oldRange.index;\n    var oldBefore = oldText.slice(0, oldCursor);\n    var oldAfter = oldText.slice(oldCursor);\n    var maybeNewCursor = newRange ? newRange.index : null;\n    editBefore: {\n      // is this an insert or delete right before oldCursor?\n      var newCursor = oldCursor + newLength - oldLength;\n      if (maybeNewCursor !== null && maybeNewCursor !== newCursor) {\n        break editBefore;\n      }\n      if (newCursor < 0 || newCursor > newLength) {\n        break editBefore;\n      }\n      var newBefore = newText.slice(0, newCursor);\n      var newAfter = newText.slice(newCursor);\n      if (newAfter !== oldAfter) {\n        break editBefore;\n      }\n      var prefixLength = Math.min(oldCursor, newCursor);\n      var oldPrefix = oldBefore.slice(0, prefixLength);\n      var newPrefix = newBefore.slice(0, prefixLength);\n      if (oldPrefix !== newPrefix) {\n        break editBefore;\n      }\n      var oldMiddle = oldBefore.slice(prefixLength);\n      var newMiddle = newBefore.slice(prefixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldAfter);\n    }\n    editAfter: {\n      // is this an insert or delete right after oldCursor?\n      if (maybeNewCursor !== null && maybeNewCursor !== oldCursor) {\n        break editAfter;\n      }\n      var cursor = oldCursor;\n      var newBefore = newText.slice(0, cursor);\n      var newAfter = newText.slice(cursor);\n      if (newBefore !== oldBefore) {\n        break editAfter;\n      }\n      var suffixLength = Math.min(oldLength - cursor, newLength - cursor);\n      var oldSuffix = oldAfter.slice(oldAfter.length - suffixLength);\n      var newSuffix = newAfter.slice(newAfter.length - suffixLength);\n      if (oldSuffix !== newSuffix) {\n        break editAfter;\n      }\n      var oldMiddle = oldAfter.slice(0, oldAfter.length - suffixLength);\n      var newMiddle = newAfter.slice(0, newAfter.length - suffixLength);\n      return make_edit_splice(oldBefore, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n  if (oldRange.length > 0 && newRange && newRange.length === 0) {\n    replaceRange: {\n      // see if diff could be a splice of the old selection range\n      var oldPrefix = oldText.slice(0, oldRange.index);\n      var oldSuffix = oldText.slice(oldRange.index + oldRange.length);\n      var prefixLength = oldPrefix.length;\n      var suffixLength = oldSuffix.length;\n      if (newLength < prefixLength + suffixLength) {\n        break replaceRange;\n      }\n      var newPrefix = newText.slice(0, prefixLength);\n      var newSuffix = newText.slice(newLength - suffixLength);\n      if (oldPrefix !== newPrefix || oldSuffix !== newSuffix) {\n        break replaceRange;\n      }\n      var oldMiddle = oldText.slice(prefixLength, oldLength - suffixLength);\n      var newMiddle = newText.slice(prefixLength, newLength - suffixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n\n  return null;\n}\n\nfunction diff(text1, text2, cursor_pos) {\n  // only pass fix_unicode=true at the top level, not when diff_main is\n  // recursively invoked\n  return diff_main(text1, text2, cursor_pos, true);\n}\n\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.Parchment=e():t.Parchment=e()}(window,function(){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,\"a\",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p=\"\",s(s.s=0)}([function(t,e,s){t.exports=s(1)},function(t,e,s){\"use strict\";var i;s.r(e),function(t){t[t.TYPE=3]=\"TYPE\",t[t.LEVEL=12]=\"LEVEL\",t[t.ATTRIBUTE=13]=\"ATTRIBUTE\",t[t.BLOT=14]=\"BLOT\",t[t.INLINE=7]=\"INLINE\",t[t.BLOCK=11]=\"BLOCK\",t[t.BLOCK_BLOT=10]=\"BLOCK_BLOT\",t[t.INLINE_BLOT=6]=\"INLINE_BLOT\",t[t.BLOCK_ATTRIBUTE=9]=\"BLOCK_ATTRIBUTE\",t[t.INLINE_ATTRIBUTE=5]=\"INLINE_ATTRIBUTE\",t[t.ANY=15]=\"ANY\"}(i||(i={}));var r=i;var n=class{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){this.insertBefore(t[0],null),t.length>1&&this.append.apply(this,t.slice(1))}at(t){const e=this.iterator();let s=e();for(;s&&t>0;)t-=1,s=e();return s}contains(t){const e=this.iterator();let s=e();for(;s;){if(s===t)return!0;s=e()}return!1}indexOf(t){const e=this.iterator();let s=e(),i=0;for(;s;){if(s===t)return i;i+=1,s=e()}return-1}insertBefore(t,e){null!=t&&(this.remove(t),t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,s=this.head;for(;null!=s;){if(s===t)return e;e+=s.length(),s=s.next}return-1}remove(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return null!=t&&(t=t.next),e}}find(t,e=!1){const s=this.iterator();let i=s();for(;i;){const r=i.length();if(t<r||e&&t===r&&(null==i.next||0!==i.next.length()))return[i,t];t-=r,i=s()}return[null,0]}forEach(t){const e=this.iterator();let s=e();for(;s;)t(s),s=e()}forEachAt(t,e,s){if(e<=0)return;const[i,r]=this.find(t);let n=t-r;const o=this.iterator(i);let a=o();for(;a&&n<t+e;){const i=a.length();t>n?s(a,t-n,Math.min(e,n+i-t)):s(a,0,Math.min(i,t+e-n)),n+=i,a=o()}}map(t){return this.reduce((e,s)=>(e.push(t(s)),e),[])}reduce(t,e){const s=this.iterator();let i=s();for(;i;)e=t(e,i),i=s();return e}};class o extends Error{constructor(t){super(t=\"[Parchment] \"+t),this.message=t,this.name=this.constructor.name}}class a{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){return null==t?null:this.blots.has(t)?this.blots.get(t)||null:e?this.find(t.parentNode,e):null}create(t,e,s){const i=this.query(e);if(null==i)throw new o(`Unable to create ${e} blot`);const r=i,n=new r(t,e instanceof Node||e.nodeType===Node.TEXT_NODE?e:r.create(s),s);return a.blots.set(n.domNode,n),n}find(t,e=!1){return a.find(t,e)}query(t,e=r.ANY){let s;if(\"string\"==typeof t)s=this.types[t]||this.attributes[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)s=this.types.text;else if(\"number\"==typeof t)t&r.LEVEL&r.BLOCK?s=this.types.block:t&r.LEVEL&r.INLINE&&(s=this.types.inline);else if(t instanceof HTMLElement){(t.getAttribute(\"class\")||\"\").split(/\\s+/).some(t=>!!(s=this.classes[t])),s=s||this.tags[t.tagName]}return null==s?null:e&r.LEVEL&s.scope&&e&r.TYPE&s.scope?s:null}register(...t){if(t.length>1)return t.map(t=>this.register(t));const e=t[0];if(\"string\"!=typeof e.blotName&&\"string\"!=typeof e.attrName)throw new o(\"Invalid definition\");if(\"abstract\"===e.blotName)throw new o(\"Cannot register abstract class\");if(this.types[e.blotName||e.attrName]=e,\"string\"==typeof e.keyName)this.attributes[e.keyName]=e;else if(null!=e.className&&(this.classes[e.className]=e),null!=e.tagName){Array.isArray(e.tagName)?e.tagName=e.tagName.map(t=>t.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(t=>{null!=this.tags[t]&&null!=e.className||(this.tags[t]=e)})}return e}}a.blots=new WeakMap;class l{constructor(t,e){this.scroll=t,this.domNode=e,a.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(null==this.tagName)throw new o(\"Blot definition missing tagName\");let e;return Array.isArray(this.tagName)?(\"string\"==typeof t&&(t=t.toUpperCase(),parseInt(t,10).toString()===t&&(t=parseInt(t,10))),e=\"number\"==typeof t?document.createElement(this.tagName[t-1]):this.tagName.indexOf(t)>-1?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){null!=this.parent&&this.parent.removeChild(this),a.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,s,i){const n=this.isolate(t,e);if(null!=this.scroll.query(s,r.BLOT)&&i)n.wrap(s,i);else if(null!=this.scroll.query(s,r.ATTRIBUTE)){const t=this.scroll.create(this.statics.scope);n.wrap(t),t.format(s,i)}}insertAt(t,e,s){const i=null==s?this.scroll.create(\"text\",e):this.scroll.create(e,s),r=this.split(t);this.parent.insertBefore(i,r||void 0)}isolate(t,e){const s=this.split(t);if(null==s)throw new Error(\"Attempt to isolate at end\");return s.split(e),s}length(){return 1}offset(t=this.parent){return null==this.parent||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const s=\"string\"==typeof t?this.scroll.create(t,e):t;return null!=this.parent&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(t,e){return 0===t?this:this.next}update(t,e){}wrap(t,e){const s=\"string\"==typeof t?this.scroll.create(t,e):t;if(null!=this.parent&&this.parent.insertBefore(s,this.next||void 0),\"function\"!=typeof s.appendChild)throw new o(`Cannot wrap ${t}`);return s.appendChild(this),s}}l.blotName=\"abstract\";var h=l;class c extends h{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=t,c.uiClass&&this.uiNode.classList.add(c.uiClass),this.uiNode.setAttribute(\"contenteditable\",\"false\"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new n,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const e=d(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(t){if(t instanceof o)return;throw t}})}deleteAt(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,(t,e,s)=>{t.deleteAt(e,s)})}descendant(t,e=0){const[s,i]=this.children.find(e);return null==t.blotName&&t(s)||null!=t.blotName&&s instanceof t?[s,i]:s instanceof c?s.descendant(t,i):[null,-1]}descendants(t,e=0,s=Number.MAX_VALUE){let i=[],r=s;return this.children.forEachAt(e,s,(e,s,n)=>{(null==t.blotName&&t(e)||null!=t.blotName&&e instanceof t)&&i.push(e),e instanceof c&&(i=i.concat(e.descendants(t,s,r))),r-=n}),i}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{if(t)return;this.statics.allowedChildren.some(t=>e instanceof t)||(e.statics.scope===r.BLOCK_BLOT?(null!=e.next&&this.splitAfter(e),null!=e.prev&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof c?e.unwrap():e.remove())})}formatAt(t,e,s,i){this.children.forEachAt(t,e,(t,e,r)=>{t.formatAt(e,r,s,i)})}insertAt(t,e,s){const[i,r]=this.children.find(t);if(i)i.insertAt(r,e,s);else{const t=null==s?this.scroll.create(\"text\",e):this.scroll.create(e,s);this.appendChild(t)}}insertBefore(t,e){null!=t.parent&&t.parent.children.remove(t);let s=null;this.children.insertBefore(t,e||null),null!=e&&(s=e.domNode),this.domNode.parentNode===t.domNode&&this.domNode.nextSibling===s||this.domNode.insertBefore(t.domNode,s),t.parent=this,t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(s=>{t.insertBefore(s,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(t,e=!1){const[s,i]=this.children.find(t,e),r=[[this,t]];return s instanceof c?r.concat(s.path(i,e)):(null!=s&&r.push([s,i]),r)}removeChild(t){this.children.remove(t)}replaceWith(t,e){const s=\"string\"==typeof t?this.scroll.create(t,e):t;return s instanceof c&&this.moveChildren(s),super.replaceWith(s)}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(t,this.length(),(t,i,r)=>{const n=t.split(i,e);null!=n&&s.appendChild(n)}),s}splitAfter(t){const e=this.clone();for(;null!=t.next;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const s=[],i=[];t.forEach(t=>{t.target===this.domNode&&\"childList\"===t.type&&(s.push.apply(s,t.addedNodes),i.push.apply(i,t.removedNodes))}),i.forEach(t=>{if(null!=t.parentNode&&\"IFRAME\"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const e=this.scroll.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==this.domNode||e.detach())}),s.filter(t=>t.parentNode===this.domNode||t===this.uiNode).sort((t,e)=>t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(t=>{let e=null;null!=t.nextSibling&&(e=this.scroll.find(t.nextSibling));const s=d(t,this.scroll);s.next===e&&null!=s.next||(null!=s.parent&&s.parent.removeChild(this),this.insertBefore(s,e||void 0))}),this.enforceAllowedChildren()}}function d(t,e){let s=e.find(t);if(null==s)try{s=e.create(t)}catch(i){s=e.create(r.INLINE),Array.from(t.childNodes).forEach(t=>{s.domNode.appendChild(t)}),t.parentNode&&t.parentNode.replaceChild(s.domNode,t),s.attach()}return s}c.uiClass=\"\";var u=c;class m extends u{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,s,i){super.formatAt(t,e,s,i),this.enforceAllowedChildren()}insertAt(t,e,s){super.insertAt(t,e,s),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}}m.blotName=\"container\",m.scope=r.BLOCK_BLOT;var p=m;class f extends h{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}}f.scope=r.INLINE_BLOT;var N=f;class b{static keys(t){return Array.from(t.attributes).map(t=>t.name)}constructor(t,e,s={}){this.attrName=t,this.keyName=e;const i=r.TYPE&r.ATTRIBUTE;this.scope=null!=s.scope?s.scope&r.LEVEL|i:r.ATTRIBUTE,null!=s.whitelist&&(this.whitelist=s.whitelist)}add(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)}canAdd(t,e){return null==this.whitelist||(\"string\"==typeof e?this.whitelist.indexOf(e.replace(/[\"']/g,\"\"))>-1:this.whitelist.indexOf(e)>-1)}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:\"\"}}function g(t,e){return(t.getAttribute(\"class\")||\"\").split(/\\s+/).filter(t=>0===t.indexOf(`${e}-`))}var y=class extends b{static keys(t){return(t.getAttribute(\"class\")||\"\").split(/\\s+/).map(t=>t.split(\"-\").slice(0,-1).join(\"-\"))}add(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0)}remove(t){g(t,this.keyName).forEach(e=>{t.classList.remove(e)}),0===t.classList.length&&t.removeAttribute(\"class\")}value(t){const e=(g(t,this.keyName)[0]||\"\").slice(this.keyName.length+1);return this.canAdd(t,e)?e:\"\"}};function v(t){const e=t.split(\"-\"),s=e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join(\"\");return e[0]+s}var A=class extends b{static keys(t){return(t.getAttribute(\"style\")||\"\").split(\";\").map(t=>t.split(\":\")[0].trim())}add(t,e){return!!this.canAdd(t,e)&&(t.style[v(this.keyName)]=e,!0)}remove(t){t.style[v(this.keyName)]=\"\",t.getAttribute(\"style\")||t.removeAttribute(\"style\")}value(t){const e=t.style[v(this.keyName)];return this.canAdd(t,e)?e:\"\"}};var x=class{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=a.find(this.domNode);if(null==t)return;const e=b.keys(this.domNode),s=y.keys(this.domNode),i=A.keys(this.domNode);e.concat(s).concat(i).forEach(e=>{const s=t.scroll.query(e,r.ATTRIBUTE);s instanceof b&&(this.attributes[s.attrName]=s)})}copy(t){Object.keys(this.attributes).forEach(e=>{const s=this.attributes[e].value(this.domNode);t.format(e,s)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(t=>{this.attributes[t].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}};class E extends u{constructor(t,e){super(t,e),this.attributes=new x(this.domNode)}static formats(t,e){const s=e.query(E.blotName);if(null==s||t.tagName!==s.tagName)return\"string\"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)}format(t,e){if(t!==this.statics.blotName||e){const s=this.scroll.query(t,r.INLINE);if(null==s)return;s instanceof b?this.attributes.attribute(s,e):!e||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e)}else this.children.forEach(t=>{t instanceof E||(t=t.wrap(E.blotName,!0)),this.attributes.copy(t)}),this.unwrap()}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,s,i){if(null!=this.formats()[s]||this.scroll.query(s,r.ATTRIBUTE)){this.isolate(t,e).format(s,i)}else super.formatAt(t,e,s,i)}optimize(t){super.optimize(t);const e=this.formats();if(0===Object.keys(e).length)return this.unwrap();const s=this.next;s instanceof E&&s.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}(e,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(t,e){const s=super.replaceWith(t,e);return this.attributes.copy(s),s}update(t,e){super.update(t,e),t.some(t=>t.target===this.domNode&&\"attributes\"===t.type)&&this.attributes.build()}wrap(t,e){const s=super.wrap(t,e);return s instanceof E&&this.attributes.move(s),s}}E.allowedChildren=[E,N],E.blotName=\"inline\",E.scope=r.INLINE_BLOT,E.tagName=\"SPAN\";var T=E;class B extends u{constructor(t,e){super(t,e),this.attributes=new x(this.domNode)}static formats(t,e){const s=e.query(B.blotName);if(null==s||t.tagName!==s.tagName)return\"string\"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)}format(t,e){const s=this.scroll.query(t,r.BLOCK);null!=s&&(s instanceof b?this.attributes.attribute(s,e):t!==this.statics.blotName||e?!e||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e):this.replaceWith(B.blotName))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,s,i){null!=this.scroll.query(s,r.BLOCK)?this.format(s,i):super.formatAt(t,e,s,i)}insertAt(t,e,s){if(null==s||null!=this.scroll.query(e,r.INLINE))super.insertAt(t,e,s);else{const i=this.split(t);if(null==i)throw new Error(\"Attempt to insertAt after block boundaries\");{const t=this.scroll.create(e,s);i.parent.insertBefore(t,i)}}}replaceWith(t,e){const s=super.replaceWith(t,e);return this.attributes.copy(s),s}update(t,e){super.update(t,e),t.some(t=>t.target===this.domNode&&\"attributes\"===t.type)&&this.attributes.build()}}B.blotName=\"block\",B.scope=r.BLOCK_BLOT,B.tagName=\"P\",B.allowedChildren=[T,B,N];var C=B;var L=class extends N{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,s,i){0===t&&e===this.length()?this.format(s,i):super.formatAt(t,e,s,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}};const O={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},w=100;class I extends u{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(t=>{this.update(t)}),this.observer.observe(this.domNode,O),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){return this.registry.find(t,e)}query(t,e=r.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),0===t&&e===this.length()?this.children.forEach(t=>{t.remove()}):super.deleteAt(t,e)}formatAt(t,e,s,i){this.update(),super.formatAt(t,e,s,i)}insertAt(t,e,s){this.update(),super.insertAt(t,e,s)}optimize(t=[],e={}){super.optimize(e);const s=e.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)t.push(i.pop());const r=(t,e=!0)=>{null!=t&&t!==this&&null!=t.domNode.parentNode&&(s.has(t.domNode)||s.set(t.domNode,[]),e&&r(t.parent))},n=t=>{s.has(t.domNode)&&(t instanceof u&&t.children.forEach(n),s.delete(t.domNode),t.optimize(e))};let o=t;for(let e=0;o.length>0;e+=1){if(e>=w)throw new Error(\"[Parchment] Maximum optimize iterations reached\");for(o.forEach(t=>{const e=this.find(t.target,!0);null!=e&&(e.domNode===t.target&&(\"childList\"===t.type?(r(this.find(t.previousSibling,!1)),Array.from(t.addedNodes).forEach(t=>{const e=this.find(t,!1);r(e,!1),e instanceof u&&e.children.forEach(t=>{r(t,!1)})})):\"attributes\"===t.type&&r(e.prev)),r(e))}),this.children.forEach(n),i=(o=Array.from(this.observer.takeRecords())).slice();i.length>0;)t.push(i.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const s=new WeakMap;t.map(t=>{const e=a.find(t.target,!0);return null==e?null:s.has(e.domNode)?(s.get(e.domNode).push(t),null):(s.set(e.domNode,[t]),e)}).forEach(t=>{null!=t&&t!==this&&s.has(t.domNode)&&t.update(s.get(t.domNode)||[],e)}),e.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),e),this.optimize(t,e)}}I.blotName=\"scroll\",I.defaultChild=C,I.allowedChildren=[C,p],I.scope=r.BLOCK_BLOT,I.tagName=\"DIV\";var k=I;class _ extends N{constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}static create(t){return document.createTextNode(t)}static value(t){return t.data}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,s){null==s?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,s)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof _&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const s=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(t,e){t.some(t=>\"characterData\"===t.type&&t.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}}_.blotName=\"text\",_.scope=r.INLINE_BLOT;var M=_;s.d(e,\"ParentBlot\",function(){return u}),s.d(e,\"ContainerBlot\",function(){return p}),s.d(e,\"LeafBlot\",function(){return N}),s.d(e,\"EmbedBlot\",function(){return L}),s.d(e,\"ScrollBlot\",function(){return k}),s.d(e,\"BlockBlot\",function(){return C}),s.d(e,\"InlineBlot\",function(){return T}),s.d(e,\"TextBlot\",function(){return M}),s.d(e,\"Attributor\",function(){return b}),s.d(e,\"ClassAttributor\",function(){return y}),s.d(e,\"StyleAttributor\",function(){return A}),s.d(e,\"AttributorStore\",function(){return x}),s.d(e,\"Registry\",function(){return a}),s.d(e,\"Scope\",function(){return r})}])});\n//# sourceMappingURL=parchment.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar deep_equal_1 = __importDefault(require(\"deep-equal\"));\nvar extend_1 = __importDefault(require(\"extend\"));\nvar AttributeMap;\n(function (AttributeMap) {\n    function compose(a, b, keepNull) {\n        if (a === void 0) { a = {}; }\n        if (b === void 0) { b = {}; }\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        var attributes = extend_1.default(true, {}, b);\n        if (!keepNull) {\n            attributes = Object.keys(attributes).reduce(function (copy, key) {\n                if (attributes[key] != null) {\n                    copy[key] = attributes[key];\n                }\n                return copy;\n            }, {});\n        }\n        for (var key in a) {\n            if (a[key] !== undefined && b[key] === undefined) {\n                attributes[key] = a[key];\n            }\n        }\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.compose = compose;\n    function diff(a, b) {\n        if (a === void 0) { a = {}; }\n        if (b === void 0) { b = {}; }\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        var attributes = Object.keys(a)\n            .concat(Object.keys(b))\n            .reduce(function (attrs, key) {\n            if (!deep_equal_1.default(a[key], b[key])) {\n                attrs[key] = b[key] === undefined ? null : b[key];\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.diff = diff;\n    function invert(attr, base) {\n        if (attr === void 0) { attr = {}; }\n        if (base === void 0) { base = {}; }\n        attr = attr || {};\n        var baseInverted = Object.keys(base).reduce(function (memo, key) {\n            if (base[key] !== attr[key] && attr[key] !== undefined) {\n                memo[key] = base[key];\n            }\n            return memo;\n        }, {});\n        return Object.keys(attr).reduce(function (memo, key) {\n            if (attr[key] !== base[key] && base[key] === undefined) {\n                memo[key] = null;\n            }\n            return memo;\n        }, baseInverted);\n    }\n    AttributeMap.invert = invert;\n    function transform(a, b, priority) {\n        if (priority === void 0) { priority = false; }\n        if (typeof a !== 'object') {\n            return b;\n        }\n        if (typeof b !== 'object') {\n            return undefined;\n        }\n        if (!priority) {\n            return b; // b simply overwrites us without priority\n        }\n        var attributes = Object.keys(b).reduce(function (attrs, key) {\n            if (a[key] === undefined) {\n                attrs[key] = b[key]; // null is a valid value\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.transform = transform;\n})(AttributeMap || (AttributeMap = {}));\nexports.default = AttributeMap;\n//# sourceMappingURL=AttributeMap.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar deep_equal_1 = __importDefault(require(\"deep-equal\"));\nvar extend_1 = __importDefault(require(\"extend\"));\nvar fast_diff_1 = __importDefault(require(\"fast-diff\"));\nvar AttributeMap_1 = __importDefault(require(\"./AttributeMap\"));\nvar Op_1 = __importDefault(require(\"./Op\"));\nvar NULL_CHARACTER = String.fromCharCode(0); // Placeholder char for embed in diff()\nvar Delta = /** @class */ (function () {\n    function Delta(ops) {\n        // Assume we are given a well formed ops\n        if (Array.isArray(ops)) {\n            this.ops = ops;\n        }\n        else if (ops != null && Array.isArray(ops.ops)) {\n            this.ops = ops.ops;\n        }\n        else {\n            this.ops = [];\n        }\n    }\n    Delta.prototype.insert = function (arg, attributes) {\n        var newOp = {};\n        if (typeof arg === 'string' && arg.length === 0) {\n            return this;\n        }\n        newOp.insert = arg;\n        if (attributes != null &&\n            typeof attributes === 'object' &&\n            Object.keys(attributes).length > 0) {\n            newOp.attributes = attributes;\n        }\n        return this.push(newOp);\n    };\n    Delta.prototype.delete = function (length) {\n        if (length <= 0) {\n            return this;\n        }\n        return this.push({ delete: length });\n    };\n    Delta.prototype.retain = function (length, attributes) {\n        if (length <= 0) {\n            return this;\n        }\n        var newOp = { retain: length };\n        if (attributes != null &&\n            typeof attributes === 'object' &&\n            Object.keys(attributes).length > 0) {\n            newOp.attributes = attributes;\n        }\n        return this.push(newOp);\n    };\n    Delta.prototype.push = function (newOp) {\n        var index = this.ops.length;\n        var lastOp = this.ops[index - 1];\n        newOp = extend_1.default(true, {}, newOp);\n        if (typeof lastOp === 'object') {\n            if (typeof newOp.delete === 'number' &&\n                typeof lastOp.delete === 'number') {\n                this.ops[index - 1] = { delete: lastOp.delete + newOp.delete };\n                return this;\n            }\n            // Since it does not matter if we insert before or after deleting at the same index,\n            // always prefer to insert first\n            if (typeof lastOp.delete === 'number' && newOp.insert != null) {\n                index -= 1;\n                lastOp = this.ops[index - 1];\n                if (typeof lastOp !== 'object') {\n                    this.ops.unshift(newOp);\n                    return this;\n                }\n            }\n            if (deep_equal_1.default(newOp.attributes, lastOp.attributes)) {\n                if (typeof newOp.insert === 'string' &&\n                    typeof lastOp.insert === 'string') {\n                    this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n                    if (typeof newOp.attributes === 'object') {\n                        this.ops[index - 1].attributes = newOp.attributes;\n                    }\n                    return this;\n                }\n                else if (typeof newOp.retain === 'number' &&\n                    typeof lastOp.retain === 'number') {\n                    this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n                    if (typeof newOp.attributes === 'object') {\n                        this.ops[index - 1].attributes = newOp.attributes;\n                    }\n                    return this;\n                }\n            }\n        }\n        if (index === this.ops.length) {\n            this.ops.push(newOp);\n        }\n        else {\n            this.ops.splice(index, 0, newOp);\n        }\n        return this;\n    };\n    Delta.prototype.chop = function () {\n        var lastOp = this.ops[this.ops.length - 1];\n        if (lastOp && lastOp.retain && !lastOp.attributes) {\n            this.ops.pop();\n        }\n        return this;\n    };\n    Delta.prototype.filter = function (predicate) {\n        return this.ops.filter(predicate);\n    };\n    Delta.prototype.forEach = function (predicate) {\n        this.ops.forEach(predicate);\n    };\n    Delta.prototype.map = function (predicate) {\n        return this.ops.map(predicate);\n    };\n    Delta.prototype.partition = function (predicate) {\n        var passed = [];\n        var failed = [];\n        this.forEach(function (op) {\n            var target = predicate(op) ? passed : failed;\n            target.push(op);\n        });\n        return [passed, failed];\n    };\n    Delta.prototype.reduce = function (predicate, initialValue) {\n        return this.ops.reduce(predicate, initialValue);\n    };\n    Delta.prototype.changeLength = function () {\n        return this.reduce(function (length, elem) {\n            if (elem.insert) {\n                return length + Op_1.default.length(elem);\n            }\n            else if (elem.delete) {\n                return length - elem.delete;\n            }\n            return length;\n        }, 0);\n    };\n    Delta.prototype.length = function () {\n        return this.reduce(function (length, elem) {\n            return length + Op_1.default.length(elem);\n        }, 0);\n    };\n    Delta.prototype.slice = function (start, end) {\n        if (start === void 0) { start = 0; }\n        if (end === void 0) { end = Infinity; }\n        var ops = [];\n        var iter = Op_1.default.iterator(this.ops);\n        var index = 0;\n        while (index < end && iter.hasNext()) {\n            var nextOp = void 0;\n            if (index < start) {\n                nextOp = iter.next(start - index);\n            }\n            else {\n                nextOp = iter.next(end - index);\n                ops.push(nextOp);\n            }\n            index += Op_1.default.length(nextOp);\n        }\n        return new Delta(ops);\n    };\n    Delta.prototype.compose = function (other) {\n        var thisIter = Op_1.default.iterator(this.ops);\n        var otherIter = Op_1.default.iterator(other.ops);\n        var ops = [];\n        var firstOther = otherIter.peek();\n        if (firstOther != null &&\n            typeof firstOther.retain === 'number' &&\n            firstOther.attributes == null) {\n            var firstLeft = firstOther.retain;\n            while (thisIter.peekType() === 'insert' &&\n                thisIter.peekLength() <= firstLeft) {\n                firstLeft -= thisIter.peekLength();\n                ops.push(thisIter.next());\n            }\n            if (firstOther.retain - firstLeft > 0) {\n                otherIter.next(firstOther.retain - firstLeft);\n            }\n        }\n        var delta = new Delta(ops);\n        while (thisIter.hasNext() || otherIter.hasNext()) {\n            if (otherIter.peekType() === 'insert') {\n                delta.push(otherIter.next());\n            }\n            else if (thisIter.peekType() === 'delete') {\n                delta.push(thisIter.next());\n            }\n            else {\n                var length_1 = Math.min(thisIter.peekLength(), otherIter.peekLength());\n                var thisOp = thisIter.next(length_1);\n                var otherOp = otherIter.next(length_1);\n                if (typeof otherOp.retain === 'number') {\n                    var newOp = {};\n                    if (typeof thisOp.retain === 'number') {\n                        newOp.retain = length_1;\n                    }\n                    else {\n                        newOp.insert = thisOp.insert;\n                    }\n                    // Preserve null when composing with a retain, otherwise remove it for inserts\n                    var attributes = AttributeMap_1.default.compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n                    if (attributes) {\n                        newOp.attributes = attributes;\n                    }\n                    delta.push(newOp);\n                    // Optimization if rest of other is just retain\n                    if (!otherIter.hasNext() &&\n                        deep_equal_1.default(delta.ops[delta.ops.length - 1], newOp)) {\n                        var rest = new Delta(thisIter.rest());\n                        return delta.concat(rest).chop();\n                    }\n                    // Other op should be delete, we could be an insert or retain\n                    // Insert + delete cancels out\n                }\n                else if (typeof otherOp.delete === 'number' &&\n                    typeof thisOp.retain === 'number') {\n                    delta.push(otherOp);\n                }\n            }\n        }\n        return delta.chop();\n    };\n    Delta.prototype.concat = function (other) {\n        var delta = new Delta(this.ops.slice());\n        if (other.ops.length > 0) {\n            delta.push(other.ops[0]);\n            delta.ops = delta.ops.concat(other.ops.slice(1));\n        }\n        return delta;\n    };\n    Delta.prototype.diff = function (other, cursor) {\n        if (this.ops === other.ops) {\n            return new Delta();\n        }\n        var strings = [this, other].map(function (delta) {\n            return delta\n                .map(function (op) {\n                if (op.insert != null) {\n                    return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n                }\n                var prep = delta === other ? 'on' : 'with';\n                throw new Error('diff() called ' + prep + ' non-document');\n            })\n                .join('');\n        });\n        var retDelta = new Delta();\n        var diffResult = fast_diff_1.default(strings[0], strings[1], cursor);\n        var thisIter = Op_1.default.iterator(this.ops);\n        var otherIter = Op_1.default.iterator(other.ops);\n        diffResult.forEach(function (component) {\n            var length = component[1].length;\n            while (length > 0) {\n                var opLength = 0;\n                switch (component[0]) {\n                    case fast_diff_1.default.INSERT:\n                        opLength = Math.min(otherIter.peekLength(), length);\n                        retDelta.push(otherIter.next(opLength));\n                        break;\n                    case fast_diff_1.default.DELETE:\n                        opLength = Math.min(length, thisIter.peekLength());\n                        thisIter.next(opLength);\n                        retDelta.delete(opLength);\n                        break;\n                    case fast_diff_1.default.EQUAL:\n                        opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n                        var thisOp = thisIter.next(opLength);\n                        var otherOp = otherIter.next(opLength);\n                        if (deep_equal_1.default(thisOp.insert, otherOp.insert)) {\n                            retDelta.retain(opLength, AttributeMap_1.default.diff(thisOp.attributes, otherOp.attributes));\n                        }\n                        else {\n                            retDelta.push(otherOp).delete(opLength);\n                        }\n                        break;\n                }\n                length -= opLength;\n            }\n        });\n        return retDelta.chop();\n    };\n    Delta.prototype.eachLine = function (predicate, newline) {\n        if (newline === void 0) { newline = '\\n'; }\n        var iter = Op_1.default.iterator(this.ops);\n        var line = new Delta();\n        var i = 0;\n        while (iter.hasNext()) {\n            if (iter.peekType() !== 'insert') {\n                return;\n            }\n            var thisOp = iter.peek();\n            var start = Op_1.default.length(thisOp) - iter.peekLength();\n            var index = typeof thisOp.insert === 'string'\n                ? thisOp.insert.indexOf(newline, start) - start\n                : -1;\n            if (index < 0) {\n                line.push(iter.next());\n            }\n            else if (index > 0) {\n                line.push(iter.next(index));\n            }\n            else {\n                if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n                    return;\n                }\n                i += 1;\n                line = new Delta();\n            }\n        }\n        if (line.length() > 0) {\n            predicate(line, {}, i);\n        }\n    };\n    Delta.prototype.invert = function (base) {\n        var inverted = new Delta();\n        this.reduce(function (baseIndex, op) {\n            if (op.insert) {\n                inverted.delete(Op_1.default.length(op));\n            }\n            else if (op.retain && op.attributes == null) {\n                inverted.retain(op.retain);\n                return baseIndex + op.retain;\n            }\n            else if (op.delete || (op.retain && op.attributes)) {\n                var length_2 = (op.delete || op.retain);\n                var slice = base.slice(baseIndex, baseIndex + length_2);\n                slice.forEach(function (baseOp) {\n                    if (op.delete) {\n                        inverted.push(baseOp);\n                    }\n                    else if (op.retain && op.attributes) {\n                        inverted.retain(Op_1.default.length(baseOp), AttributeMap_1.default.invert(op.attributes, baseOp.attributes));\n                    }\n                });\n                return baseIndex + length_2;\n            }\n            return baseIndex;\n        }, 0);\n        return inverted.chop();\n    };\n    Delta.prototype.transform = function (arg, priority) {\n        if (priority === void 0) { priority = false; }\n        priority = !!priority;\n        if (typeof arg === 'number') {\n            return this.transformPosition(arg, priority);\n        }\n        var other = arg;\n        var thisIter = Op_1.default.iterator(this.ops);\n        var otherIter = Op_1.default.iterator(other.ops);\n        var delta = new Delta();\n        while (thisIter.hasNext() || otherIter.hasNext()) {\n            if (thisIter.peekType() === 'insert' &&\n                (priority || otherIter.peekType() !== 'insert')) {\n                delta.retain(Op_1.default.length(thisIter.next()));\n            }\n            else if (otherIter.peekType() === 'insert') {\n                delta.push(otherIter.next());\n            }\n            else {\n                var length_3 = Math.min(thisIter.peekLength(), otherIter.peekLength());\n                var thisOp = thisIter.next(length_3);\n                var otherOp = otherIter.next(length_3);\n                if (thisOp.delete) {\n                    // Our delete either makes their delete redundant or removes their retain\n                    continue;\n                }\n                else if (otherOp.delete) {\n                    delta.push(otherOp);\n                }\n                else {\n                    // We retain either their retain or insert\n                    delta.retain(length_3, AttributeMap_1.default.transform(thisOp.attributes, otherOp.attributes, priority));\n                }\n            }\n        }\n        return delta.chop();\n    };\n    Delta.prototype.transformPosition = function (index, priority) {\n        if (priority === void 0) { priority = false; }\n        priority = !!priority;\n        var thisIter = Op_1.default.iterator(this.ops);\n        var offset = 0;\n        while (thisIter.hasNext() && offset <= index) {\n            var length_4 = thisIter.peekLength();\n            var nextType = thisIter.peekType();\n            thisIter.next();\n            if (nextType === 'delete') {\n                index -= Math.min(length_4, index - offset);\n                continue;\n            }\n            else if (nextType === 'insert' && (offset < index || !priority)) {\n                index += length_4;\n            }\n            offset += length_4;\n        }\n        return index;\n    };\n    Delta.Op = Op_1.default;\n    Delta.AttributeMap = AttributeMap_1.default;\n    return Delta;\n}());\nmodule.exports = Delta;\n//# sourceMappingURL=Delta.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Op_1 = __importDefault(require(\"./Op\"));\nvar Iterator = /** @class */ (function () {\n    function Iterator(ops) {\n        this.ops = ops;\n        this.index = 0;\n        this.offset = 0;\n    }\n    Iterator.prototype.hasNext = function () {\n        return this.peekLength() < Infinity;\n    };\n    Iterator.prototype.next = function (length) {\n        if (!length) {\n            length = Infinity;\n        }\n        var nextOp = this.ops[this.index];\n        if (nextOp) {\n            var offset = this.offset;\n            var opLength = Op_1.default.length(nextOp);\n            if (length >= opLength - offset) {\n                length = opLength - offset;\n                this.index += 1;\n                this.offset = 0;\n            }\n            else {\n                this.offset += length;\n            }\n            if (typeof nextOp.delete === 'number') {\n                return { delete: length };\n            }\n            else {\n                var retOp = {};\n                if (nextOp.attributes) {\n                    retOp.attributes = nextOp.attributes;\n                }\n                if (typeof nextOp.retain === 'number') {\n                    retOp.retain = length;\n                }\n                else if (typeof nextOp.insert === 'string') {\n                    retOp.insert = nextOp.insert.substr(offset, length);\n                }\n                else {\n                    // offset should === 0, length should === 1\n                    retOp.insert = nextOp.insert;\n                }\n                return retOp;\n            }\n        }\n        else {\n            return { retain: Infinity };\n        }\n    };\n    Iterator.prototype.peek = function () {\n        return this.ops[this.index];\n    };\n    Iterator.prototype.peekLength = function () {\n        if (this.ops[this.index]) {\n            // Should never return 0 if our index is being managed correctly\n            return Op_1.default.length(this.ops[this.index]) - this.offset;\n        }\n        else {\n            return Infinity;\n        }\n    };\n    Iterator.prototype.peekType = function () {\n        if (this.ops[this.index]) {\n            if (typeof this.ops[this.index].delete === 'number') {\n                return 'delete';\n            }\n            else if (typeof this.ops[this.index].retain === 'number') {\n                return 'retain';\n            }\n            else {\n                return 'insert';\n            }\n        }\n        return 'retain';\n    };\n    Iterator.prototype.rest = function () {\n        if (!this.hasNext()) {\n            return [];\n        }\n        else if (this.offset === 0) {\n            return this.ops.slice(this.index);\n        }\n        else {\n            var offset = this.offset;\n            var index = this.index;\n            var next = this.next();\n            var rest = this.ops.slice(this.index);\n            this.offset = offset;\n            this.index = index;\n            return [next].concat(rest);\n        }\n    };\n    return Iterator;\n}());\nexports.default = Iterator;\n//# sourceMappingURL=Iterator.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Iterator_1 = __importDefault(require(\"./Iterator\"));\nvar Op;\n(function (Op) {\n    function iterator(ops) {\n        return new Iterator_1.default(ops);\n    }\n    Op.iterator = iterator;\n    function length(op) {\n        if (typeof op.delete === 'number') {\n            return op.delete;\n        }\n        else if (typeof op.retain === 'number') {\n            return op.retain;\n        }\n        else {\n            return typeof op.insert === 'string' ? op.insert.length : 1;\n        }\n    }\n    Op.length = length;\n})(Op || (Op = {}));\nexports.default = Op;\n//# sourceMappingURL=Op.js.map","import Quill from './core';\r\n\r\nimport { AlignClass, AlignStyle } from './formats/align';\r\nimport {\r\n  DirectionAttribute,\r\n  DirectionClass,\r\n  DirectionStyle,\r\n} from './formats/direction';\r\nimport Indent from './formats/indent';\r\n\r\nimport Blockquote from './formats/blockquote';\r\nimport Header from './formats/header';\r\nimport List from './formats/list';\r\n\r\nimport { BackgroundClass, BackgroundStyle } from './formats/background';\r\nimport { ColorClass, ColorStyle } from './formats/color';\r\nimport { FontClass, FontStyle } from './formats/font';\r\nimport { SizeClass, SizeStyle } from './formats/size';\r\n\r\nimport Bold from './formats/bold';\r\nimport Italic from './formats/italic';\r\nimport Link from './formats/link';\r\nimport Script from './formats/script';\r\nimport Strike from './formats/strike';\r\nimport Underline from './formats/underline';\r\n\r\nimport Formula from './formats/formula';\r\nimport Image from './formats/image';\r\nimport Video from './formats/video';\r\n\r\nimport CodeBlock, { Code as InlineCode } from './formats/code';\r\n\r\nimport Syntax from './modules/syntax';\r\nimport Table from './modules/table';\r\nimport Toolbar from './modules/toolbar';\r\n\r\nimport Icons from './ui/icons';\r\nimport Picker from './ui/picker';\r\nimport ColorPicker from './ui/color-picker';\r\nimport IconPicker from './ui/icon-picker';\r\nimport Tooltip from './ui/tooltip';\r\n\r\nimport BubbleTheme from './themes/bubble';\r\nimport SnowTheme from './themes/snow';\r\n\r\nQuill.register(\r\n  {\r\n    'attributors/attribute/direction': DirectionAttribute,\r\n\r\n    'attributors/class/align': AlignClass,\r\n    'attributors/class/background': BackgroundClass,\r\n    'attributors/class/color': ColorClass,\r\n    'attributors/class/direction': DirectionClass,\r\n    'attributors/class/font': FontClass,\r\n    'attributors/class/size': SizeClass,\r\n\r\n    'attributors/style/align': AlignStyle,\r\n    'attributors/style/background': BackgroundStyle,\r\n    'attributors/style/color': ColorStyle,\r\n    'attributors/style/direction': DirectionStyle,\r\n    'attributors/style/font': FontStyle,\r\n    'attributors/style/size': SizeStyle,\r\n  },\r\n  true,\r\n);\r\n\r\nQuill.register(\r\n  {\r\n    'formats/align': AlignClass,\r\n    'formats/direction': DirectionClass,\r\n    'formats/indent': Indent,\r\n\r\n    'formats/background': BackgroundStyle,\r\n    'formats/color': ColorStyle,\r\n    'formats/font': FontClass,\r\n    'formats/size': SizeClass,\r\n\r\n    'formats/blockquote': Blockquote,\r\n    'formats/code-block': CodeBlock,\r\n    'formats/header': Header,\r\n    'formats/list': List,\r\n\r\n    'formats/bold': Bold,\r\n    'formats/code': InlineCode,\r\n    'formats/italic': Italic,\r\n    'formats/link': Link,\r\n    'formats/script': Script,\r\n    'formats/strike': Strike,\r\n    'formats/underline': Underline,\r\n\r\n    'formats/formula': Formula,\r\n    'formats/image': Image,\r\n    'formats/video': Video,\r\n\r\n    'modules/syntax': Syntax,\r\n    'modules/table': Table,\r\n    'modules/toolbar': Toolbar,\r\n\r\n    'themes/bubble': BubbleTheme,\r\n    'themes/snow': SnowTheme,\r\n\r\n    'ui/icons': Icons,\r\n    'ui/picker': Picker,\r\n    'ui/icon-picker': IconPicker,\r\n    'ui/color-picker': ColorPicker,\r\n    'ui/tooltip': Tooltip,\r\n  },\r\n  true,\r\n);\r\n\r\nif ( typeof module === \"object\" && module && typeof module.exports === \"object\" ) {\r\n    module.exports = Quill;\r\n} else {\r\n    if ( typeof define === \"function\" && define.amd ) {\r\n        define( \"Quill\", [], function () { return jQuery; } );\r\n    }\r\n}\r\n\r\nif ( typeof window === \"object\" && typeof window.document === \"object\" ) {\r\n    window.Quill = window.Quill = Quill;\r\n}\r\n","import extend from 'extend';\r\nimport Emitter from '../core/emitter';\r\nimport Theme from '../core/theme';\r\nimport ColorPicker from '../ui/color-picker';\r\nimport IconPicker from '../ui/icon-picker';\r\nimport Picker from '../ui/picker';\r\nimport Tooltip from '../ui/tooltip';\r\n\r\nconst ALIGNS = [false, 'center', 'right', 'justify'];\r\n\r\nconst COLORS = [\r\n  '#000000',\r\n  '#e60000',\r\n  '#ff9900',\r\n  '#ffff00',\r\n  '#008a00',\r\n  '#0066cc',\r\n  '#9933ff',\r\n  '#ffffff',\r\n  '#facccc',\r\n  '#ffebcc',\r\n  '#ffffcc',\r\n  '#cce8cc',\r\n  '#cce0f5',\r\n  '#ebd6ff',\r\n  '#bbbbbb',\r\n  '#f06666',\r\n  '#ffc266',\r\n  '#ffff66',\r\n  '#66b966',\r\n  '#66a3e0',\r\n  '#c285ff',\r\n  '#888888',\r\n  '#a10000',\r\n  '#b26b00',\r\n  '#b2b200',\r\n  '#006100',\r\n  '#0047b2',\r\n  '#6b24b2',\r\n  '#444444',\r\n  '#5c0000',\r\n  '#663d00',\r\n  '#666600',\r\n  '#003700',\r\n  '#002966',\r\n  '#3d1466',\r\n];\r\n\r\nconst FONTS = [false, 'serif', 'monospace'];\r\n\r\nconst HEADERS = ['1', '2', '3', false];\r\n\r\nconst SIZES = ['small', false, 'large', 'huge'];\r\n\r\nclass BaseTheme extends Theme {\r\n  constructor(quill, options) {\r\n    super(quill, options);\r\n    const listener = e => {\r\n      if (!document.body.contains(quill.root)) {\r\n        document.body.removeEventListener('click', listener);\r\n        return;\r\n      }\r\n      if (\r\n        this.tooltip != null &&\r\n        !this.tooltip.root.contains(e.target) &&\r\n        document.activeElement !== this.tooltip.textbox &&\r\n        !this.quill.hasFocus()\r\n      ) {\r\n        this.tooltip.hide();\r\n      }\r\n      if (this.pickers != null) {\r\n        this.pickers.forEach(picker => {\r\n          if (!picker.container.contains(e.target)) {\r\n            picker.close();\r\n          }\r\n        });\r\n      }\r\n    };\r\n    quill.emitter.listenDOM('click', document.body, listener);\r\n  }\r\n\r\n  addModule(name) {\r\n    const module = super.addModule(name);\r\n    if (name === 'toolbar') {\r\n      this.extendToolbar(module);\r\n    }\r\n    return module;\r\n  }\r\n\r\n  buildButtons(buttons, icons) {\r\n    Array.from(buttons).forEach(button => {\r\n      const className = button.getAttribute('class') || '';\r\n      className.split(/\\s+/).forEach(name => {\r\n        if (!name.startsWith('ql-')) return;\r\n        name = name.slice('ql-'.length);\r\n        if (icons[name] == null) return;\r\n        if (name === 'direction') {\r\n          button.innerHTML = icons[name][''] + icons[name].rtl;\r\n        } else if (typeof icons[name] === 'string') {\r\n          button.innerHTML = icons[name];\r\n        } else {\r\n          const value = button.value || '';\r\n          if (value != null && icons[name][value]) {\r\n            button.innerHTML = icons[name][value];\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  buildPickers(selects, icons) {\r\n    this.pickers = Array.from(selects).map(select => {\r\n      if (select.classList.contains('ql-align')) {\r\n        if (select.querySelector('option') == null) {\r\n          fillSelect(select, ALIGNS);\r\n        }\r\n        return new IconPicker(select, icons.align);\r\n      }\r\n      if (\r\n        select.classList.contains('ql-background') ||\r\n        select.classList.contains('ql-color')\r\n      ) {\r\n        const format = select.classList.contains('ql-background')\r\n          ? 'background'\r\n          : 'color';\r\n        if (select.querySelector('option') == null) {\r\n          fillSelect(\r\n            select,\r\n            COLORS,\r\n            format === 'background' ? '#ffffff' : '#000000',\r\n          );\r\n        }\r\n        return new ColorPicker(select, icons[format]);\r\n      }\r\n      if (select.querySelector('option') == null) {\r\n        if (select.classList.contains('ql-font')) {\r\n          fillSelect(select, FONTS);\r\n        } else if (select.classList.contains('ql-header')) {\r\n          fillSelect(select, HEADERS);\r\n        } else if (select.classList.contains('ql-size')) {\r\n          fillSelect(select, SIZES);\r\n        }\r\n      }\r\n      return new Picker(select);\r\n    });\r\n    const update = () => {\r\n      this.pickers.forEach(picker => {\r\n        picker.update();\r\n      });\r\n    };\r\n    this.quill.on(Emitter.events.EDITOR_CHANGE, update);\r\n  }\r\n}\r\nBaseTheme.DEFAULTS = extend(true, {}, Theme.DEFAULTS, {\r\n  modules: {\r\n    toolbar: {\r\n      handlers: {\r\n        formula() {\r\n          this.quill.theme.tooltip.edit('formula');\r\n        },\r\n        image() {\r\n          let fileInput = this.container.querySelector(\r\n            'input.ql-image[type=file]',\r\n          );\r\n          if (fileInput == null) {\r\n            fileInput = document.createElement('input');\r\n            fileInput.setAttribute('type', 'file');\r\n            fileInput.setAttribute(\r\n              'accept',\r\n              this.quill.uploader.options.mimetypes.join(', '),\r\n            );\r\n            fileInput.classList.add('ql-image');\r\n            fileInput.addEventListener('change', () => {\r\n              const range = this.quill.getSelection(true);\r\n              this.quill.uploader.upload(range, fileInput.files);\r\n              fileInput.value = '';\r\n            });\r\n            this.container.appendChild(fileInput);\r\n          }\r\n          fileInput.click();\r\n        },\r\n        video() {\r\n          this.quill.theme.tooltip.edit('video');\r\n        },\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nclass BaseTooltip extends Tooltip {\r\n  constructor(quill, boundsContainer) {\r\n    super(quill, boundsContainer);\r\n    this.textbox = this.root.querySelector('input[type=\"text\"]');\r\n    this.listen();\r\n  }\r\n\r\n  listen() {\r\n    this.textbox.addEventListener('keydown', event => {\r\n      if (event.key === 'Enter') {\r\n        this.save();\r\n        event.preventDefault();\r\n      } else if (event.key === 'Escape') {\r\n        this.cancel();\r\n        event.preventDefault();\r\n      }\r\n    });\r\n  }\r\n\r\n  cancel() {\r\n    this.hide();\r\n  }\r\n\r\n  edit(mode = 'link', preview = null) {\r\n    this.root.classList.remove('ql-hidden');\r\n    this.root.classList.add('ql-editing');\r\n    if (preview != null) {\r\n      this.textbox.value = preview;\r\n    } else if (mode !== this.root.getAttribute('data-mode')) {\r\n      this.textbox.value = '';\r\n    }\r\n    this.position(this.quill.getBounds(this.quill.selection.savedRange));\r\n    this.textbox.select();\r\n    this.textbox.setAttribute(\r\n      'placeholder',\r\n      this.textbox.getAttribute(`data-${mode}`) || '',\r\n    );\r\n    this.root.setAttribute('data-mode', mode);\r\n  }\r\n\r\n  restoreFocus() {\r\n    const { scrollTop } = this.quill.scrollingContainer;\r\n    this.quill.focus();\r\n    this.quill.scrollingContainer.scrollTop = scrollTop;\r\n  }\r\n\r\n  save() {\r\n    let { value } = this.textbox;\r\n    switch (this.root.getAttribute('data-mode')) {\r\n      case 'link': {\r\n        const { scrollTop } = this.quill.root;\r\n        if (this.linkRange) {\r\n          this.quill.formatText(\r\n            this.linkRange,\r\n            'link',\r\n            value,\r\n            Emitter.sources.USER,\r\n          );\r\n          delete this.linkRange;\r\n        } else {\r\n          this.restoreFocus();\r\n          this.quill.format('link', value, Emitter.sources.USER);\r\n        }\r\n        this.quill.root.scrollTop = scrollTop;\r\n        break;\r\n      }\r\n      case 'video': {\r\n        value = extractVideoUrl(value);\r\n      } // eslint-disable-next-line no-fallthrough\r\n      case 'formula': {\r\n        if (!value) break;\r\n        const range = this.quill.getSelection(true);\r\n        if (range != null) {\r\n          const index = range.index + range.length;\r\n          this.quill.insertEmbed(\r\n            index,\r\n            this.root.getAttribute('data-mode'),\r\n            value,\r\n            Emitter.sources.USER,\r\n          );\r\n          if (this.root.getAttribute('data-mode') === 'formula') {\r\n            this.quill.insertText(index + 1, ' ', Emitter.sources.USER);\r\n          }\r\n          this.quill.setSelection(index + 2, Emitter.sources.USER);\r\n        }\r\n        break;\r\n      }\r\n      default:\r\n    }\r\n    this.textbox.value = '';\r\n    this.hide();\r\n  }\r\n}\r\n\r\nfunction extractVideoUrl(url) {\r\n  let match =\r\n    url.match(\r\n      /^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtube\\.com\\/watch.*v=([a-zA-Z0-9_-]+)/,\r\n    ) ||\r\n    url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtu\\.be\\/([a-zA-Z0-9_-]+)/);\r\n  if (match) {\r\n    return `${match[1] || 'https'}://www.youtube.com/embed/${\r\n      match[2]\r\n    }?showinfo=0`;\r\n  }\r\n  // eslint-disable-next-line no-cond-assign\r\n  if ((match = url.match(/^(?:(https?):\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/))) {\r\n    return `${match[1] || 'https'}://player.vimeo.com/video/${match[2]}/`;\r\n  }\r\n  return url;\r\n}\r\n\r\nfunction fillSelect(select, values, defaultValue = false) {\r\n  values.forEach(value => {\r\n    const option = document.createElement('option');\r\n    if (value === defaultValue) {\r\n      option.setAttribute('selected', 'selected');\r\n    } else {\r\n      option.setAttribute('value', value);\r\n    }\r\n    select.appendChild(option);\r\n  });\r\n}\r\n\r\nexport { BaseTooltip, BaseTheme as default };\r\n","import extend from 'extend';\r\nimport Emitter from '../core/emitter';\r\nimport BaseTheme, { BaseTooltip } from './base';\r\nimport { Range } from '../core/selection';\r\nimport icons from '../ui/icons';\r\n\r\nconst TOOLBAR_CONFIG = [\r\n  ['bold', 'italic', 'link'],\r\n  [{ header: 1 }, { header: 2 }, 'blockquote'],\r\n];\r\n\r\nclass BubbleTooltip extends BaseTooltip {\r\n  constructor(quill, bounds) {\r\n    super(quill, bounds);\r\n    this.quill.on(\r\n      Emitter.events.EDITOR_CHANGE,\r\n      (type, range, oldRange, source) => {\r\n        if (type !== Emitter.events.SELECTION_CHANGE) return;\r\n        if (\r\n          range != null &&\r\n          range.length > 0 &&\r\n          source === Emitter.sources.USER\r\n        ) {\r\n          this.show();\r\n          // Lock our width so we will expand beyond our offsetParent boundaries\r\n          this.root.style.left = '0px';\r\n          this.root.style.width = '';\r\n          this.root.style.width = `${this.root.offsetWidth}px`;\r\n          const lines = this.quill.getLines(range.index, range.length);\r\n          if (lines.length === 1) {\r\n            this.position(this.quill.getBounds(range));\r\n          } else {\r\n            const lastLine = lines[lines.length - 1];\r\n            const index = this.quill.getIndex(lastLine);\r\n            const length = Math.min(\r\n              lastLine.length() - 1,\r\n              range.index + range.length - index,\r\n            );\r\n            const indexBounds = this.quill.getBounds(new Range(index, length));\r\n            this.position(indexBounds);\r\n          }\r\n        } else if (\r\n          document.activeElement !== this.textbox &&\r\n          this.quill.hasFocus()\r\n        ) {\r\n          this.hide();\r\n        }\r\n      },\r\n    );\r\n  }\r\n\r\n  listen() {\r\n    super.listen();\r\n    this.root.querySelector('.ql-close').addEventListener('click', () => {\r\n      this.root.classList.remove('ql-editing');\r\n    });\r\n    this.quill.on(Emitter.events.SCROLL_OPTIMIZE, () => {\r\n      // Let selection be restored by toolbar handlers before repositioning\r\n      setTimeout(() => {\r\n        if (this.root.classList.contains('ql-hidden')) return;\r\n        const range = this.quill.getSelection();\r\n        if (range != null) {\r\n          this.position(this.quill.getBounds(range));\r\n        }\r\n      }, 1);\r\n    });\r\n  }\r\n\r\n  cancel() {\r\n    this.show();\r\n  }\r\n\r\n  position(reference) {\r\n    const shift = super.position(reference);\r\n    const arrow = this.root.querySelector('.ql-tooltip-arrow');\r\n    arrow.style.marginLeft = '';\r\n    if (shift !== 0) {\r\n      arrow.style.marginLeft = `${-1 * shift - arrow.offsetWidth / 2}px`;\r\n    }\r\n    return shift;\r\n  }\r\n}\r\nBubbleTooltip.TEMPLATE = [\r\n  '<span class=\"ql-tooltip-arrow\"></span>',\r\n  '<div class=\"ql-tooltip-editor\">',\r\n  '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\r\n  '<a class=\"ql-close\"></a>',\r\n  '</div>',\r\n].join('');\r\n\r\nclass BubbleTheme extends BaseTheme {\r\n  constructor(quill, options) {\r\n    if (\r\n      options.modules.toolbar != null &&\r\n      options.modules.toolbar.container == null\r\n    ) {\r\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\r\n    }\r\n    super(quill, options);\r\n    this.quill.container.classList.add('ql-bubble');\r\n  }\r\n\r\n  extendToolbar(toolbar) {\r\n    this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\r\n    this.tooltip.root.appendChild(toolbar.container);\r\n    this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\r\n    this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\r\n  }\r\n}\r\nBubbleTheme.DEFAULTS = extend(true, {}, BaseTheme.DEFAULTS, {\r\n  modules: {\r\n    toolbar: {\r\n      handlers: {\r\n        link(value) {\r\n          if (!value) {\r\n            this.quill.format('link', false);\r\n          } else {\r\n            this.quill.theme.tooltip.edit();\r\n          }\r\n        },\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport { BubbleTooltip, BubbleTheme as default };\r\n","import extend from 'extend';\r\nimport Emitter from '../core/emitter';\r\nimport BaseTheme, { BaseTooltip } from './base';\r\nimport LinkBlot from '../formats/link';\r\nimport { Range } from '../core/selection';\r\nimport icons from '../ui/icons';\r\n\r\nconst TOOLBAR_CONFIG = [\r\n  [{ header: ['1', '2', '3', false] }],\r\n  ['bold', 'italic', 'underline', 'link'],\r\n  [{ list: 'ordered' }, { list: 'bullet' }],\r\n  ['clean'],\r\n];\r\n\r\nclass SnowTooltip extends BaseTooltip {\r\n  constructor(quill, bounds) {\r\n    super(quill, bounds);\r\n    this.preview = this.root.querySelector('a.ql-preview');\r\n  }\r\n\r\n  listen() {\r\n    super.listen();\r\n    this.root.querySelector('a.ql-action').addEventListener('click', event => {\r\n      if (this.root.classList.contains('ql-editing')) {\r\n        this.save();\r\n      } else {\r\n        this.edit('link', this.preview.textContent);\r\n      }\r\n      event.preventDefault();\r\n    });\r\n    this.root.querySelector('a.ql-remove').addEventListener('click', event => {\r\n      if (this.linkRange != null) {\r\n        const range = this.linkRange;\r\n        this.restoreFocus();\r\n        this.quill.formatText(range, 'link', false, Emitter.sources.USER);\r\n        delete this.linkRange;\r\n      }\r\n      event.preventDefault();\r\n      this.hide();\r\n    });\r\n    this.quill.on(\r\n      Emitter.events.SELECTION_CHANGE,\r\n      (range, oldRange, source) => {\r\n        if (range == null) return;\r\n        if (range.length === 0 && source === Emitter.sources.USER) {\r\n          const [link, offset] = this.quill.scroll.descendant(\r\n            LinkBlot,\r\n            range.index,\r\n          );\r\n          if (link != null) {\r\n            this.linkRange = new Range(range.index - offset, link.length());\r\n            const preview = LinkBlot.formats(link.domNode);\r\n            this.preview.textContent = preview;\r\n            this.preview.setAttribute('href', preview);\r\n            this.show();\r\n            this.position(this.quill.getBounds(this.linkRange));\r\n            return;\r\n          }\r\n        } else {\r\n          delete this.linkRange;\r\n        }\r\n        this.hide();\r\n      },\r\n    );\r\n  }\r\n\r\n  show() {\r\n    super.show();\r\n    this.root.removeAttribute('data-mode');\r\n  }\r\n}\r\nSnowTooltip.TEMPLATE = [\r\n  '<a class=\"ql-preview\" rel=\"noopener noreferrer\" target=\"_blank\" href=\"about:blank\"></a>',\r\n  '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\r\n  '<a class=\"ql-action\"></a>',\r\n  '<a class=\"ql-remove\"></a>',\r\n].join('');\r\n\r\nclass SnowTheme extends BaseTheme {\r\n  constructor(quill, options) {\r\n    if (\r\n      options.modules.toolbar != null &&\r\n      options.modules.toolbar.container == null\r\n    ) {\r\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\r\n    }\r\n    super(quill, options);\r\n    this.quill.container.classList.add('ql-snow');\r\n  }\r\n\r\n  extendToolbar(toolbar) {\r\n    toolbar.container.classList.add('ql-snow');\r\n    this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\r\n    this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\r\n    this.tooltip = new SnowTooltip(this.quill, this.options.bounds);\r\n    if (toolbar.container.querySelector('.ql-link')) {\r\n      this.quill.keyboard.addBinding(\r\n        { key: 'k', shortKey: true },\r\n        (range, context) => {\r\n          toolbar.handlers.link.call(toolbar, !context.format.link);\r\n        },\r\n      );\r\n    }\r\n  }\r\n}\r\nSnowTheme.DEFAULTS = extend(true, {}, BaseTheme.DEFAULTS, {\r\n  modules: {\r\n    toolbar: {\r\n      handlers: {\r\n        link(value) {\r\n          if (value) {\r\n            const range = this.quill.getSelection();\r\n            if (range == null || range.length === 0) return;\r\n            let preview = this.quill.getText(range);\r\n            if (\r\n              /^\\S+@\\S+\\.\\S+$/.test(preview) &&\r\n              preview.indexOf('mailto:') !== 0\r\n            ) {\r\n              preview = `mailto:${preview}`;\r\n            }\r\n            const { tooltip } = this.quill.theme;\r\n            tooltip.edit('link', preview);\r\n          } else {\r\n            this.quill.format('link', false);\r\n          }\r\n        },\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default SnowTheme;\r\n","import Picker from './picker';\r\n\r\nclass ColorPicker extends Picker {\r\n  constructor(select, label) {\r\n    super(select);\r\n    this.label.innerHTML = label;\r\n    this.container.classList.add('ql-color-picker');\r\n    Array.from(this.container.querySelectorAll('.ql-picker-item'))\r\n      .slice(0, 7)\r\n      .forEach(item => {\r\n        item.classList.add('ql-primary');\r\n      });\r\n  }\r\n\r\n  buildItem(option) {\r\n    const item = super.buildItem(option);\r\n    item.style.backgroundColor = option.getAttribute('value') || '';\r\n    return item;\r\n  }\r\n\r\n  selectItem(item, trigger) {\r\n    super.selectItem(item, trigger);\r\n    const colorLabel = this.label.querySelector('.ql-color-label');\r\n    const value = item ? item.getAttribute('data-value') || '' : '';\r\n    if (colorLabel) {\r\n      if (colorLabel.tagName === 'line') {\r\n        colorLabel.style.stroke = value;\r\n      } else {\r\n        colorLabel.style.fill = value;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default ColorPicker;\r\n","import Picker from './picker';\r\n\r\nclass IconPicker extends Picker {\r\n  constructor(select, icons) {\r\n    super(select);\r\n    this.container.classList.add('ql-icon-picker');\r\n    Array.from(this.container.querySelectorAll('.ql-picker-item')).forEach(\r\n      item => {\r\n        item.innerHTML = icons[item.getAttribute('data-value') || ''];\r\n      },\r\n    );\r\n    this.defaultItem = this.container.querySelector('.ql-selected');\r\n    this.selectItem(this.defaultItem);\r\n  }\r\n\r\n  selectItem(target, trigger) {\r\n    super.selectItem(target, trigger);\r\n    const item = target || this.defaultItem;\r\n    if (this.label.innerHTML === item.innerHTML) return;\r\n    this.label.innerHTML = item.innerHTML;\r\n  }\r\n}\r\n\r\nexport default IconPicker;\r\n","import alignLeftIcon from '../assets/icons/align-left.svg';\r\nimport alignCenterIcon from '../assets/icons/align-center.svg';\r\nimport alignRightIcon from '../assets/icons/align-right.svg';\r\nimport alignJustifyIcon from '../assets/icons/align-justify.svg';\r\nimport backgroundIcon from '../assets/icons/background.svg';\r\nimport blockquoteIcon from '../assets/icons/blockquote.svg';\r\nimport boldIcon from '../assets/icons/bold.svg';\r\nimport cleanIcon from '../assets/icons/clean.svg';\r\nimport codeIcon from '../assets/icons/code.svg';\r\nimport colorIcon from '../assets/icons/color.svg';\r\nimport directionLeftToRightIcon from '../assets/icons/direction-ltr.svg';\r\nimport directionRightToLeftIcon from '../assets/icons/direction-rtl.svg';\r\nimport formulaIcon from '../assets/icons/formula.svg';\r\nimport headerIcon from '../assets/icons/header.svg';\r\nimport header2Icon from '../assets/icons/header-2.svg';\r\nimport italicIcon from '../assets/icons/italic.svg';\r\nimport imageIcon from '../assets/icons/image.svg';\r\nimport indentIcon from '../assets/icons/indent.svg';\r\nimport outdentIcon from '../assets/icons/outdent.svg';\r\nimport linkIcon from '../assets/icons/link.svg';\r\nimport listBulletIcon from '../assets/icons/list-bullet.svg';\r\nimport listCheckIcon from '../assets/icons/list-check.svg';\r\nimport listOrderedIcon from '../assets/icons/list-ordered.svg';\r\nimport subscriptIcon from '../assets/icons/subscript.svg';\r\nimport superscriptIcon from '../assets/icons/superscript.svg';\r\nimport strikeIcon from '../assets/icons/strike.svg';\r\nimport tableIcon from '../assets/icons/table.svg';\r\nimport underlineIcon from '../assets/icons/underline.svg';\r\nimport videoIcon from '../assets/icons/video.svg';\r\n\r\nexport default {\r\n  align: {\r\n    '': alignLeftIcon,\r\n    center: alignCenterIcon,\r\n    right: alignRightIcon,\r\n    justify: alignJustifyIcon,\r\n  },\r\n  background: backgroundIcon,\r\n  blockquote: blockquoteIcon,\r\n  bold: boldIcon,\r\n  clean: cleanIcon,\r\n  code: codeIcon,\r\n  'code-block': codeIcon,\r\n  color: colorIcon,\r\n  direction: {\r\n    '': directionLeftToRightIcon,\r\n    rtl: directionRightToLeftIcon,\r\n  },\r\n  formula: formulaIcon,\r\n  header: {\r\n    '1': headerIcon,\r\n    '2': header2Icon,\r\n  },\r\n  italic: italicIcon,\r\n  image: imageIcon,\r\n  indent: {\r\n    '+1': indentIcon,\r\n    '-1': outdentIcon,\r\n  },\r\n  link: linkIcon,\r\n  list: {\r\n    bullet: listBulletIcon,\r\n    check: listCheckIcon,\r\n    ordered: listOrderedIcon,\r\n  },\r\n  script: {\r\n    sub: subscriptIcon,\r\n    super: superscriptIcon,\r\n  },\r\n  strike: strikeIcon,\r\n  table: tableIcon,\r\n  underline: underlineIcon,\r\n  video: videoIcon,\r\n};\r\n","import DropdownIcon from '../assets/icons/dropdown.svg';\r\n\r\nlet optionsCounter = 0;\r\n\r\nfunction toggleAriaAttribute(element, attribute) {\r\n  element.setAttribute(\r\n    attribute,\r\n    !(element.getAttribute(attribute) === 'true'),\r\n  );\r\n}\r\n\r\nclass Picker {\r\n  constructor(select) {\r\n    this.select = select;\r\n    this.container = document.createElement('span');\r\n    this.buildPicker();\r\n    this.select.style.display = 'none';\r\n    this.select.parentNode.insertBefore(this.container, this.select);\r\n\r\n    this.label.addEventListener('mousedown', () => {\r\n      this.togglePicker();\r\n    });\r\n    this.label.addEventListener('keydown', event => {\r\n      switch (event.key) {\r\n        case 'Enter':\r\n          this.togglePicker();\r\n          break;\r\n        case 'Escape':\r\n          this.escape();\r\n          event.preventDefault();\r\n          break;\r\n        default:\r\n      }\r\n    });\r\n    this.select.addEventListener('change', this.update.bind(this));\r\n  }\r\n\r\n  togglePicker() {\r\n    this.container.classList.toggle('ql-expanded');\r\n    // Toggle aria-expanded and aria-hidden to make the picker accessible\r\n    toggleAriaAttribute(this.label, 'aria-expanded');\r\n    toggleAriaAttribute(this.options, 'aria-hidden');\r\n  }\r\n\r\n  buildItem(option) {\r\n    const item = document.createElement('span');\r\n    item.tabIndex = '0';\r\n    item.setAttribute('role', 'button');\r\n    item.classList.add('ql-picker-item');\r\n    if (option.hasAttribute('value')) {\r\n      item.setAttribute('data-value', option.getAttribute('value'));\r\n    }\r\n    if (option.textContent) {\r\n      item.setAttribute('data-label', option.textContent);\r\n    }\r\n    item.addEventListener('click', () => {\r\n      this.selectItem(item, true);\r\n    });\r\n    item.addEventListener('keydown', event => {\r\n      switch (event.key) {\r\n        case 'Enter':\r\n          this.selectItem(item, true);\r\n          event.preventDefault();\r\n          break;\r\n        case 'Escape':\r\n          this.escape();\r\n          event.preventDefault();\r\n          break;\r\n        default:\r\n      }\r\n    });\r\n\r\n    return item;\r\n  }\r\n\r\n  buildLabel() {\r\n    const label = document.createElement('span');\r\n    label.classList.add('ql-picker-label');\r\n    label.innerHTML = DropdownIcon;\r\n    label.tabIndex = '0';\r\n    label.setAttribute('role', 'button');\r\n    label.setAttribute('aria-expanded', 'false');\r\n    this.container.appendChild(label);\r\n    return label;\r\n  }\r\n\r\n  buildOptions() {\r\n    const options = document.createElement('span');\r\n    options.classList.add('ql-picker-options');\r\n\r\n    // Don't want screen readers to read this until options are visible\r\n    options.setAttribute('aria-hidden', 'true');\r\n    options.tabIndex = '-1';\r\n\r\n    // Need a unique id for aria-controls\r\n    options.id = `ql-picker-options-${optionsCounter}`;\r\n    optionsCounter += 1;\r\n    this.label.setAttribute('aria-controls', options.id);\r\n\r\n    this.options = options;\r\n\r\n    Array.from(this.select.options).forEach(option => {\r\n      const item = this.buildItem(option);\r\n      options.appendChild(item);\r\n      if (option.selected === true) {\r\n        this.selectItem(item);\r\n      }\r\n    });\r\n    this.container.appendChild(options);\r\n  }\r\n\r\n  buildPicker() {\r\n    Array.from(this.select.attributes).forEach(item => {\r\n      this.container.setAttribute(item.name, item.value);\r\n    });\r\n    this.container.classList.add('ql-picker');\r\n    this.label = this.buildLabel();\r\n    this.buildOptions();\r\n  }\r\n\r\n  escape() {\r\n    // Close menu and return focus to trigger label\r\n    this.close();\r\n    // Need setTimeout for accessibility to ensure that the browser executes\r\n    // focus on the next process thread and after any DOM content changes\r\n    setTimeout(() => this.label.focus(), 1);\r\n  }\r\n\r\n  close() {\r\n    this.container.classList.remove('ql-expanded');\r\n    this.label.setAttribute('aria-expanded', 'false');\r\n    this.options.setAttribute('aria-hidden', 'true');\r\n  }\r\n\r\n  selectItem(item, trigger = false) {\r\n    const selected = this.container.querySelector('.ql-selected');\r\n    if (item === selected) return;\r\n    if (selected != null) {\r\n      selected.classList.remove('ql-selected');\r\n    }\r\n    if (item == null) return;\r\n    item.classList.add('ql-selected');\r\n    this.select.selectedIndex = Array.from(item.parentNode.children).indexOf(\r\n      item,\r\n    );\r\n    if (item.hasAttribute('data-value')) {\r\n      this.label.setAttribute('data-value', item.getAttribute('data-value'));\r\n    } else {\r\n      this.label.removeAttribute('data-value');\r\n    }\r\n    if (item.hasAttribute('data-label')) {\r\n      this.label.setAttribute('data-label', item.getAttribute('data-label'));\r\n    } else {\r\n      this.label.removeAttribute('data-label');\r\n    }\r\n    if (trigger) {\r\n      this.select.dispatchEvent(new Event('change'));\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  update() {\r\n    let option;\r\n    if (this.select.selectedIndex > -1) {\r\n      const item = this.container.querySelector('.ql-picker-options').children[\r\n        this.select.selectedIndex\r\n      ];\r\n      option = this.select.options[this.select.selectedIndex];\r\n      this.selectItem(item);\r\n    } else {\r\n      this.selectItem(null);\r\n    }\r\n    const isActive =\r\n      option != null &&\r\n      option !== this.select.querySelector('option[selected]');\r\n    this.label.classList.toggle('ql-active', isActive);\r\n  }\r\n}\r\n\r\nexport default Picker;\r\n","class Tooltip {\r\n  constructor(quill, boundsContainer) {\r\n    this.quill = quill;\r\n    this.boundsContainer = boundsContainer || document.body;\r\n    this.root = quill.addContainer('ql-tooltip');\r\n    this.root.innerHTML = this.constructor.TEMPLATE;\r\n    if (this.quill.root === this.quill.scrollingContainer) {\r\n      this.quill.root.addEventListener('scroll', () => {\r\n        this.root.style.marginTop = `${-1 * this.quill.root.scrollTop}px`;\r\n      });\r\n    }\r\n    this.hide();\r\n  }\r\n\r\n  hide() {\r\n    this.root.classList.add('ql-hidden');\r\n  }\r\n\r\n  position(reference) {\r\n    const left =\r\n      reference.left + reference.width / 2 - this.root.offsetWidth / 2;\r\n    // root.scrollTop should be 0 if scrollContainer !== root\r\n    const top = reference.bottom + this.quill.root.scrollTop;\r\n    this.root.style.left = `${left}px`;\r\n    this.root.style.top = `${top}px`;\r\n    this.root.classList.remove('ql-flip');\r\n    const containerBounds = this.boundsContainer.getBoundingClientRect();\r\n    const rootBounds = this.root.getBoundingClientRect();\r\n    let shift = 0;\r\n    if (rootBounds.right > containerBounds.right) {\r\n      shift = containerBounds.right - rootBounds.right;\r\n      this.root.style.left = `${left + shift}px`;\r\n    }\r\n    if (rootBounds.left < containerBounds.left) {\r\n      shift = containerBounds.left - rootBounds.left;\r\n      this.root.style.left = `${left + shift}px`;\r\n    }\r\n    if (rootBounds.bottom > containerBounds.bottom) {\r\n      const height = rootBounds.bottom - rootBounds.top;\r\n      const verticalShift = reference.bottom - reference.top + height;\r\n      this.root.style.top = `${top - verticalShift}px`;\r\n      this.root.classList.add('ql-flip');\r\n    }\r\n    return shift;\r\n  }\r\n\r\n  show() {\r\n    this.root.classList.remove('ql-editing');\r\n    this.root.classList.remove('ql-hidden');\r\n  }\r\n}\r\n\r\nexport default Tooltip;\r\n"],"sourceRoot":""}